var pl=Object.defineProperty;var gl=(n,t,e)=>t in n?pl(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var he=(n,t,e)=>gl(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))r(p);new MutationObserver(p=>{for(const f of p)if(f.type==="childList")for(const g of f.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&r(g)}).observe(document,{childList:!0,subtree:!0});function e(p){const f={};return p.integrity&&(f.integrity=p.integrity),p.referrerPolicy&&(f.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?f.credentials="include":p.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function r(p){if(p.ep)return;p.ep=!0;const f=e(p);fetch(p.href,f)}})();var br=function(n,t){return br=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var p in r)Object.prototype.hasOwnProperty.call(r,p)&&(e[p]=r[p])},br(n,t)};function Yr(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");br(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function ji(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function $r(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),p,f=[],g;try{for(;(t===void 0||t-- >0)&&!(p=r.next()).done;)f.push(p.value)}catch(y){g={error:y}}finally{try{p&&!p.done&&(e=r.return)&&e.call(r)}finally{if(g)throw g.error}}return f}function Sr(n,t,e){if(e||arguments.length===2)for(var r=0,p=t.length,f;r<p;r++)(f||!(r in t))&&(f||(f=Array.prototype.slice.call(t,0,r)),f[r]=t[r]);return n.concat(f||Array.prototype.slice.call(t))}function ze(n){return typeof n=="function"}function ml(n){var t=function(r){Error.call(r),r.stack=new Error().stack},e=n(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Zn=ml(function(n){return function(e){n(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(r,p){return p+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function Vi(n,t){if(n){var e=n.indexOf(t);0<=e&&n.splice(e,1)}}var Zr=function(){function n(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var t,e,r,p,f;if(!this.closed){this.closed=!0;var g=this._parentage;if(g)if(this._parentage=null,Array.isArray(g))try{for(var y=ji(g),a=y.next();!a.done;a=y.next()){var d=a.value;d.remove(this)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=y.return)&&e.call(y)}finally{if(t)throw t.error}}else g.remove(this);var o=this.initialTeardown;if(ze(o))try{o()}catch(l){f=l instanceof Zn?l.errors:[l]}var i=this._finalizers;if(i){this._finalizers=null;try{for(var u=ji(i),c=u.next();!c.done;c=u.next()){var s=c.value;try{Gi(s)}catch(l){f=f??[],l instanceof Zn?f=Sr(Sr([],$r(f)),$r(l.errors)):f.push(l)}}}catch(l){r={error:l}}finally{try{c&&!c.done&&(p=u.return)&&p.call(u)}finally{if(r)throw r.error}}}if(f)throw new Zn(f)}},n.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)Gi(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},n.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},n.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},n.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&Vi(e,t)},n.prototype.remove=function(t){var e=this._finalizers;e&&Vi(e,t),t instanceof n&&t._removeParent(this)},n.EMPTY=function(){var t=new n;return t.closed=!0,t}(),n}();Zr.EMPTY;function Uo(n){return n instanceof Zr||n&&"closed"in n&&ze(n.remove)&&ze(n.add)&&ze(n.unsubscribe)}function Gi(n){ze(n)?n():n.unsubscribe()}var vl={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},yl={setTimeout:function(n,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];return setTimeout.apply(void 0,Sr([n,t],$r(e)))},clearTimeout:function(n){return clearTimeout(n)},delegate:void 0};function wl(n){yl.setTimeout(function(){throw n})}function Ki(){}function bl(n){n()}var Qr=function(n){Yr(t,n);function t(e){var r=n.call(this)||this;return r.isStopped=!1,e?(r.destination=e,Uo(e)&&e.add(r)):r.destination=xl,r}return t.create=function(e,r,p){return new xr(e,r,p)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Zr),$l=function(){function n(t){this.partialObserver=t}return n.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(r){ln(r)}},n.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(r){ln(r)}else ln(t)},n.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){ln(e)}},n}(),xr=function(n){Yr(t,n);function t(e,r,p){var f=n.call(this)||this,g;return ze(e)||!e?g={next:e??void 0,error:r??void 0,complete:p??void 0}:g=e,f.destination=new $l(g),f}return t}(Qr);function ln(n){wl(n)}function Sl(n){throw n}var xl={closed:!0,next:Ki,error:Sl,complete:Ki},El=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Al(n){return n}function Cl(n){return n.length===0?Al:n.length===1?n[0]:function(e){return n.reduce(function(r,p){return p(r)},e)}}var jo=function(){function n(t){t&&(this._subscribe=t)}return n.prototype.lift=function(t){var e=new n;return e.source=this,e.operator=t,e},n.prototype.subscribe=function(t,e,r){var p=this,f=Ll(t)?t:new xr(t,e,r);return bl(function(){var g=p,y=g.operator,a=g.source;f.add(y?y.call(f,a):a?p._subscribe(f):p._trySubscribe(f))}),f},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},n.prototype.forEach=function(t,e){var r=this;return e=Yi(e),new e(function(p,f){var g=new xr({next:function(y){try{t(y)}catch(a){f(a),g.unsubscribe()}},error:f,complete:p});r.subscribe(g)})},n.prototype._subscribe=function(t){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(t)},n.prototype[El]=function(){return this},n.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Cl(t)(this)},n.prototype.toPromise=function(t){var e=this;return t=Yi(t),new t(function(r,p){var f;e.subscribe(function(g){return f=g},function(g){return p(g)},function(){return r(f)})})},n.create=function(t){return new n(t)},n}();function Yi(n){var t;return(t=n??vl.Promise)!==null&&t!==void 0?t:Promise}function Ml(n){return n&&ze(n.next)&&ze(n.error)&&ze(n.complete)}function Ll(n){return n&&n instanceof Qr||Ml(n)&&Uo(n)}function Tl(n){return ze(n==null?void 0:n.lift)}function Xr(n){return function(t){if(Tl(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function qr(n,t,e,r,p){return new kl(n,t,e,r,p)}var kl=function(n){Yr(t,n);function t(e,r,p,f,g,y){var a=n.call(this,e)||this;return a.onFinalize=g,a.shouldUnsubscribe=y,a._next=r?function(d){try{r(d)}catch(o){e.error(o)}}:n.prototype._next,a._error=f?function(d){try{f(d)}catch(o){e.error(o)}finally{this.unsubscribe()}}:n.prototype._error,a._complete=p?function(){try{p()}catch(d){e.error(d)}finally{this.unsubscribe()}}:n.prototype._complete,a}return t.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;n.prototype.unsubscribe.call(this),!r&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},t}(Qr),Rl=new jo(function(n){return n.complete()});function Er(n,t){return Xr(function(e,r){var p=0;e.subscribe(qr(r,function(f){r.next(n.call(t,f,p++))}))})}function Zi(n,t){return Xr(function(e,r){var p=0;e.subscribe(qr(r,function(f){return n.call(t,f,p++)&&r.next(f)}))})}function _l(n){return n<=0?function(){return Rl}:Xr(function(t,e){var r=0;t.subscribe(qr(e,function(p){++r<=n&&(e.next(p),n<=r&&e.complete())}))})}var Qn={exports:{}},Qi;function Il(){return Qi||(Qi=1,function(n,t){(function(){var e="ace",r=function(){return this}();!r&&typeof window<"u"&&(r=window);var p=function(o,i,u){if(typeof o!="string"){p.original?p.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(u=i),p.modules[o]||(p.payloads[o]=u,p.modules[o]=null)};p.modules={},p.payloads={};var f=function(o,i,u){if(typeof i=="string"){var c=a(o,i);if(c!=null)return u&&u(),c}else if(Object.prototype.toString.call(i)==="[object Array]"){for(var s=[],l=0,h=i.length;l<h;++l){var m=a(o,i[l]);if(m==null&&g.original)return;s.push(m)}return u&&u.apply(null,s)||!0}},g=function(o,i){var u=f("",o,i);return u==null&&g.original?g.original.apply(this,arguments):u},y=function(o,i){if(i.indexOf("!")!==-1){var u=i.split("!");return y(o,u[0])+"!"+y(o,u[1])}if(i.charAt(0)=="."){var c=o.split("/").slice(0,-1).join("/");for(i=c+"/"+i;i.indexOf(".")!==-1&&s!=i;){var s=i;i=i.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return i},a=function(o,i){i=y(o,i);var u=p.modules[i];if(!u){if(u=p.payloads[i],typeof u=="function"){var c={},s={id:i,uri:"",exports:c,packaged:!0},l=function(m,w){return f(i,m,w)},h=u(l,c,s);c=h||s.exports,p.modules[i]=c,delete p.payloads[i]}u=p.modules[i]=c||u}return u};function d(o){var i=r;r[o]||(r[o]={}),i=r[o],(!i.define||!i.define.packaged)&&(p.original=i.define,i.define=p,i.define.packaged=!0),(!i.require||!i.require.packaged)&&(g.original=i.require,i.require=g,i.require.packaged=!0)}d(e)})(),ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,r,p){function f(g,y,a){Object.defineProperty(g,y,{value:a,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||f(String.prototype,"startsWith",function(g,y){return y=y||0,this.lastIndexOf(g,y)===y}),String.prototype.endsWith||f(String.prototype,"endsWith",function(g,y){var a=this;(y===void 0||y>a.length)&&(y=a.length),y-=g.length;var d=a.indexOf(g,y);return d!==-1&&d===y}),String.prototype.repeat||f(String.prototype,"repeat",function(g){for(var y="",a=this;g>0;)g&1&&(y+=a),(g>>=1)&&(a+=a);return y}),String.prototype.includes||f(String.prototype,"includes",function(g,y){return this.indexOf(g,y)!=-1}),Object.assign||(Object.assign=function(g){if(g==null)throw new TypeError("Cannot convert undefined or null to object");for(var y=Object(g),a=1;a<arguments.length;a++){var d=arguments[a];d!=null&&Object.keys(d).forEach(function(o){y[o]=d[o]})}return y}),Object.values||(Object.values=function(g){return Object.keys(g).map(function(y){return g[y]})}),Array.prototype.find||f(Array.prototype,"find",function(g){for(var y=this.length,a=arguments[1],d=0;d<y;d++){var o=this[d];if(g.call(a,o,d,this))return o}}),Array.prototype.findIndex||f(Array.prototype,"findIndex",function(g){for(var y=this.length,a=arguments[1],d=0;d<y;d++){var o=this[d];if(g.call(a,o,d,this))return d}}),Array.prototype.includes||f(Array.prototype,"includes",function(g,y){return this.indexOf(g,y)!=-1}),Array.prototype.fill||f(Array.prototype,"fill",function(g){for(var y=this,a=y.length>>>0,d=arguments[1],o=d>>0,i=o<0?Math.max(a+o,0):Math.min(o,a),u=arguments[2],c=u===void 0?a:u>>0,s=c<0?Math.max(a+c,0):Math.min(c,a);i<s;)y[i]=g,i++;return y}),Array.of||f(Array,"of",function(){return Array.prototype.slice.call(arguments)})}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,r,p){e("./es6-shim")}),ace.define("ace/lib/deep_copy",["require","exports","module"],function(e,r,p){r.deepCopy=function f(g){if(typeof g!="object"||!g)return g;var y;if(Array.isArray(g)){y=[];for(var a=0;a<g.length;a++)y[a]=f(g[a]);return y}if(Object.prototype.toString.call(g)!=="[object Object]")return g;y={};for(var a in g)y[a]=f(g[a]);return y}}),ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(e,r,p){r.last=function(y){return y[y.length-1]},r.stringReverse=function(y){return y.split("").reverse().join("")},r.stringRepeat=function(y,a){for(var d="";a>0;)a&1&&(d+=y),(a>>=1)&&(y+=y);return d};var f=/^\s\s*/,g=/\s\s*$/;r.stringTrimLeft=function(y){return y.replace(f,"")},r.stringTrimRight=function(y){return y.replace(g,"")},r.copyObject=function(y){var a={};for(var d in y)a[d]=y[d];return a},r.copyArray=function(y){for(var a=[],d=0,o=y.length;d<o;d++)y[d]&&typeof y[d]=="object"?a[d]=this.copyObject(y[d]):a[d]=y[d];return a},r.deepCopy=e("./deep_copy").deepCopy,r.arrayToMap=function(y){for(var a={},d=0;d<y.length;d++)a[y[d]]=1;return a},r.createMap=function(y){var a=Object.create(null);for(var d in y)a[d]=y[d];return a},r.arrayRemove=function(y,a){for(var d=0;d<=y.length;d++)a===y[d]&&y.splice(d,1)},r.escapeRegExp=function(y){return y.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},r.escapeHTML=function(y){return(""+y).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},r.getMatchOffsets=function(y,a){var d=[];return y.replace(a,function(o){d.push({offset:arguments[arguments.length-2],length:o.length})}),d},r.deferredCall=function(y){var a=null,d=function(){a=null,y()},o=function(i){return o.cancel(),a=setTimeout(d,i||0),o};return o.schedule=o,o.call=function(){return this.cancel(),y(),o},o.cancel=function(){return clearTimeout(a),a=null,o},o.isPending=function(){return a},o},r.delayedCall=function(y,a){var d=null,o=function(){d=null,y()},i=function(u){d==null&&(d=setTimeout(o,u||a))};return i.delay=function(u){d&&clearTimeout(d),d=setTimeout(o,u||a)},i.schedule=i,i.call=function(){this.cancel(),y()},i.cancel=function(){d&&clearTimeout(d),d=null},i.isPending=function(){return d},i},r.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},r.skipEmptyMatch=function(y,a,d){return d&&y.codePointAt(a)>65535?2:1}}),ace.define("ace/lib/useragent",["require","exports","module"],function(e,r,p){r.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},r.getOS=function(){return r.isMac?r.OS.MAC:r.isLinux?r.OS.LINUX:r.OS.WINDOWS};var f=typeof navigator=="object"?navigator:{},g=(/mac|win|linux/i.exec(f.platform)||["other"])[0].toLowerCase(),y=f.userAgent||"",a=f.appName||"";r.isWin=g=="win",r.isMac=g=="mac",r.isLinux=g=="linux",r.isIE=a=="Microsoft Internet Explorer"||a.indexOf("MSAppHost")>=0?parseFloat((y.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((y.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),r.isOldIE=r.isIE&&r.isIE<9,r.isGecko=r.isMozilla=y.match(/ Gecko\/\d+/),r.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",r.isWebKit=parseFloat(y.split("WebKit/")[1])||void 0,r.isChrome=parseFloat(y.split(" Chrome/")[1])||void 0,r.isSafari=parseFloat(y.split(" Safari/")[1])&&!r.isChrome||void 0,r.isEdge=parseFloat(y.split(" Edge/")[1])||void 0,r.isAIR=y.indexOf("AdobeAIR")>=0,r.isAndroid=y.indexOf("Android")>=0,r.isChromeOS=y.indexOf(" CrOS ")>=0,r.isIOS=/iPad|iPhone|iPod/.test(y)&&!window.MSStream,r.isIOS&&(r.isMac=!0),r.isMobile=r.isIOS||r.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,r,p){var f=e("./useragent"),g="http://www.w3.org/1999/xhtml";r.buildDom=function u(c,s,l){if(typeof c=="string"&&c){var h=document.createTextNode(c);return s&&s.appendChild(h),h}if(!Array.isArray(c))return c&&c.appendChild&&s&&s.appendChild(c),c;if(typeof c[0]!="string"||!c[0]){for(var m=[],w=0;w<c.length;w++){var C=u(c[w],s,l);C&&m.push(C)}return m}var A=document.createElement(c[0]),E=c[1],b=1;E&&typeof E=="object"&&!Array.isArray(E)&&(b=2);for(var w=b;w<c.length;w++)u(c[w],A,l);return b==2&&Object.keys(E).forEach(function(L){var _=E[L];L==="class"?A.className=Array.isArray(_)?_.join(" "):_:typeof _=="function"||L=="value"||L[0]=="$"?A[L]=_:L==="ref"?l&&(l[_]=A):L==="style"?typeof _=="string"&&(A.style.cssText=_):_!=null&&A.setAttribute(L,_)}),s&&s.appendChild(A),A},r.getDocumentHead=function(u){return u||(u=document),u.head||u.getElementsByTagName("head")[0]||u.documentElement},r.createElement=function(u,c){return document.createElementNS?document.createElementNS(c||g,u):document.createElement(u)},r.removeChildren=function(u){u.innerHTML=""},r.createTextNode=function(u,c){var s=c?c.ownerDocument:document;return s.createTextNode(u)},r.createFragment=function(u){var c=u?u.ownerDocument:document;return c.createDocumentFragment()},r.hasCssClass=function(u,c){var s=(u.className+"").split(/\s+/g);return s.indexOf(c)!==-1},r.addCssClass=function(u,c){r.hasCssClass(u,c)||(u.className+=" "+c)},r.removeCssClass=function(u,c){for(var s=u.className.split(/\s+/g);;){var l=s.indexOf(c);if(l==-1)break;s.splice(l,1)}u.className=s.join(" ")},r.toggleCssClass=function(u,c){for(var s=u.className.split(/\s+/g),l=!0;;){var h=s.indexOf(c);if(h==-1)break;l=!1,s.splice(h,1)}return l&&s.push(c),u.className=s.join(" "),l},r.setCssClass=function(u,c,s){s?r.addCssClass(u,c):r.removeCssClass(u,c)},r.hasCssString=function(u,c){var s=0,l;if(c=c||document,l=c.querySelectorAll("style")){for(;s<l.length;)if(l[s++].id===u)return!0}},r.removeElementById=function(u,c){c=c||document,c.getElementById(u)&&c.getElementById(u).remove()};var y,a=[];r.useStrictCSP=function(u){y=u,u==!1?d():a||(a=[])};function d(){var u=a;a=null,u&&u.forEach(function(c){o(c[0],c[1])})}function o(u,c,s){if(!(typeof document>"u")){if(a){if(s)d();else if(s===!1)return a.push([u,c])}if(!y){var l=s;!s||!s.getRootNode?l=document:(l=s.getRootNode(),(!l||l==s)&&(l=document));var h=l.ownerDocument||l;if(c&&r.hasCssString(c,l))return null;c&&(u+=`
/*# sourceURL=ace/css/`+c+" */");var m=r.createElement("style");m.appendChild(h.createTextNode(u)),c&&(m.id=c),l==h&&(l=r.getDocumentHead(h)),l.insertBefore(m,l.firstChild)}}}if(r.importCssString=o,r.importCssStylsheet=function(u,c){r.buildDom(["link",{rel:"stylesheet",href:u}],r.getDocumentHead(c))},r.scrollbarWidth=function(u){var c=r.createElement("ace_inner");c.style.width="100%",c.style.minWidth="0px",c.style.height="200px",c.style.display="block";var s=r.createElement("ace_outer"),l=s.style;l.position="absolute",l.left="-10000px",l.overflow="hidden",l.width="200px",l.minWidth="0px",l.height="150px",l.display="block",s.appendChild(c);var h=u&&u.documentElement||document&&document.documentElement;if(!h)return 0;h.appendChild(s);var m=c.offsetWidth;l.overflow="scroll";var w=c.offsetWidth;return m===w&&(w=s.clientWidth),h.removeChild(s),m-w},r.computedStyle=function(u,c){return window.getComputedStyle(u,"")||{}},r.setStyle=function(u,c,s){u[c]!==s&&(u[c]=s)},r.HAS_CSS_ANIMATION=!1,r.HAS_CSS_TRANSFORMS=!1,r.HI_DPI=f.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,f.isChromeOS&&(r.HI_DPI=!1),typeof document<"u"){var i=document.createElement("div");r.HI_DPI&&i.style.transform!==void 0&&(r.HAS_CSS_TRANSFORMS=!0),!f.isEdge&&typeof i.style.animationName<"u"&&(r.HAS_CSS_ANIMATION=!0),i=null}r.HAS_CSS_TRANSFORMS?r.translate=function(u,c,s){u.style.transform="translate("+Math.round(c)+"px, "+Math.round(s)+"px)"}:r.translate=function(u,c,s){u.style.top=Math.round(s)+"px",u.style.left=Math.round(c)+"px"}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,r,p){/*
* based on code from:
*
* @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
* Available via the MIT or new BSD license.
* see: http://github.com/jrburke/requirejs for details
*/var f=e("./dom");r.get=function(g,y){var a=new XMLHttpRequest;a.open("GET",g,!0),a.onreadystatechange=function(){a.readyState===4&&y(a.responseText)},a.send(null)},r.loadScript=function(g,y){var a=f.getDocumentHead(),d=document.createElement("script");d.src=g,a.appendChild(d),d.onload=d.onreadystatechange=function(o,i){(i||!d.readyState||d.readyState=="loaded"||d.readyState=="complete")&&(d=d.onload=d.onreadystatechange=null,i||y())}},r.qualifyURL=function(g){var y=document.createElement("a");return y.href=g,y.href}}),ace.define("ace/lib/oop",["require","exports","module"],function(e,r,p){r.inherits=function(f,g){f.super_=g,f.prototype=Object.create(g.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}})},r.mixin=function(f,g){for(var y in g)f[y]=g[y];return f},r.implement=function(f,g){r.mixin(f,g)}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,r,p){var f={},g=function(){this.propagationStopped=!0},y=function(){this.defaultPrevented=!0};f._emit=f._dispatchEvent=function(a,d){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var o=this._eventRegistry[a]||[],i=this._defaultHandlers[a];if(!(!o.length&&!i)){(typeof d!="object"||!d)&&(d={}),d.type||(d.type=a),d.stopPropagation||(d.stopPropagation=g),d.preventDefault||(d.preventDefault=y),o=o.slice();for(var u=0;u<o.length&&(o[u](d,this),!d.propagationStopped);u++);if(i&&!d.defaultPrevented)return i(d,this)}},f._signal=function(a,d){var o=(this._eventRegistry||{})[a];if(o){o=o.slice();for(var i=0;i<o.length;i++)o[i](d,this)}},f.once=function(a,d){var o=this;if(this.on(a,function i(){o.off(a,i),d.apply(null,arguments)}),!d)return new Promise(function(i){d=i})},f.setDefaultHandler=function(a,d){var o=this._defaultHandlers;if(o||(o=this._defaultHandlers={_disabled_:{}}),o[a]){var i=o[a],u=o._disabled_[a];u||(o._disabled_[a]=u=[]),u.push(i);var c=u.indexOf(d);c!=-1&&u.splice(c,1)}o[a]=d},f.removeDefaultHandler=function(a,d){var o=this._defaultHandlers;if(o){var i=o._disabled_[a];if(o[a]==d)i&&this.setDefaultHandler(a,i.pop());else if(i){var u=i.indexOf(d);u!=-1&&i.splice(u,1)}}},f.on=f.addEventListener=function(a,d,o){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[a];return i||(i=this._eventRegistry[a]=[]),i.indexOf(d)==-1&&i[o?"unshift":"push"](d),d},f.off=f.removeListener=f.removeEventListener=function(a,d){this._eventRegistry=this._eventRegistry||{};var o=this._eventRegistry[a];if(o){var i=o.indexOf(d);i!==-1&&o.splice(i,1)}},f.removeAllListeners=function(a){a||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[a]=void 0),this._defaultHandlers&&(this._defaultHandlers[a]=void 0)},r.EventEmitter=f}),ace.define("ace/lib/report_error",["require","exports","module"],function(e,r,p){r.reportError=function(g,y){var a=new Error(g);a.data=y,typeof console=="object"&&console.error&&console.error(a),setTimeout(function(){throw a})}}),ace.define("ace/lib/default_english_messages",["require","exports","module"],function(e,r,p){var f={"autocomplete.popup.aria-roledescription":"Autocomplete suggestions","autocomplete.popup.aria-label":"Autocomplete suggestions","autocomplete.popup.item.aria-roledescription":"item","autocomplete.loading":"Loading...","editor.scroller.aria-roledescription":"editor","editor.scroller.aria-label":"Editor content, press Enter to start editing, press Escape to exit","editor.gutter.aria-roledescription":"editor","editor.gutter.aria-label":"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit","error-marker.good-state":"Looks good!","prompt.recently-used":"Recently used","prompt.other-commands":"Other commands","prompt.no-matching-commands":"No matching commands","search-box.find.placeholder":"Search for","search-box.find-all.text":"All","search-box.replace.placeholder":"Replace with","search-box.replace-next.text":"Replace","search-box.replace-all.text":"All","search-box.toggle-replace.title":"Toggle Replace mode","search-box.toggle-regexp.title":"RegExp Search","search-box.toggle-case.title":"CaseSensitive Search","search-box.toggle-whole-word.title":"Whole Word Search","search-box.toggle-in-selection.title":"Search In Selection","search-box.search-counter":"$0 of $1","text-input.aria-roledescription":"editor","text-input.aria-label":"Cursor at row $0","gutter.code-folding.range.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.closed.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.open.aria-label":"Toggle code folding, row $0","gutter.code-folding.closed.title":"Unfold code","gutter.code-folding.open.title":"Fold code","gutter.annotation.aria-label.error":"Error, read annotations row $0","gutter.annotation.aria-label.warning":"Warning, read annotations row $0","gutter.annotation.aria-label.info":"Info, read annotations row $0","inline-fold.closed.title":"Unfold code","gutter-tooltip.aria-label.error.singular":"error","gutter-tooltip.aria-label.error.plural":"errors","gutter-tooltip.aria-label.warning.singular":"warning","gutter-tooltip.aria-label.warning.plural":"warnings","gutter-tooltip.aria-label.info.singular":"information message","gutter-tooltip.aria-label.info.plural":"information messages","gutter.annotation.aria-label.security":"Security finding, read annotations row $0","gutter.annotation.aria-label.hint":"Suggestion, read annotations row $0","gutter-tooltip.aria-label.security.singular":"security finding","gutter-tooltip.aria-label.security.plural":"security findings","gutter-tooltip.aria-label.hint.singular":"suggestion","gutter-tooltip.aria-label.hint.plural":"suggestions"};r.defaultEnglishMessages=f}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error","ace/lib/default_english_messages"],function(e,r,p){"no use strict";var f=e("./oop"),g=e("./event_emitter").EventEmitter,y=e("./report_error").reportError,a=e("./default_english_messages").defaultEnglishMessages,d={setOptions:function(s){Object.keys(s).forEach(function(l){this.setOption(l,s[l])},this)},getOptions:function(s){var l={};if(s)Array.isArray(s)||(l=s,s=Object.keys(l));else{var h=this.$options;s=Object.keys(h).filter(function(m){return!h[m].hidden})}return s.forEach(function(m){l[m]=this.getOption(m)},this),l},setOption:function(s,l){if(this["$"+s]!==l){var h=this.$options[s];if(!h)return o('misspelled option "'+s+'"');if(h.forwardTo)return this[h.forwardTo]&&this[h.forwardTo].setOption(s,l);h.handlesSet||(this["$"+s]=l),h&&h.set&&h.set.call(this,l)}},getOption:function(s){var l=this.$options[s];return l?l.forwardTo?this[l.forwardTo]&&this[l.forwardTo].getOption(s):l&&l.get?l.get.call(this):this["$"+s]:o('misspelled option "'+s+'"')}};function o(s){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var i,u,c=function(){function s(){this.$defaultOptions={},i=a,u="dollarSigns"}return s.prototype.defineOptions=function(l,h,m){return l.$options||(this.$defaultOptions[h]=l.$options={}),Object.keys(m).forEach(function(w){var C=m[w];typeof C=="string"&&(C={forwardTo:C}),C.name||(C.name=w),l.$options[C.name]=C,"initialValue"in C&&(l["$"+C.name]=C.initialValue)}),f.implement(l,d),this},s.prototype.resetOptions=function(l){Object.keys(l.$options).forEach(function(h){var m=l.$options[h];"value"in m&&l.setOption(h,m.value)})},s.prototype.setDefaultValue=function(l,h,m){if(!l){for(l in this.$defaultOptions)if(this.$defaultOptions[l][h])break;if(!this.$defaultOptions[l][h])return!1}var w=this.$defaultOptions[l]||(this.$defaultOptions[l]={});w[h]&&(w.forwardTo?this.setDefaultValue(w.forwardTo,h,m):w[h].value=m)},s.prototype.setDefaultValues=function(l,h){Object.keys(h).forEach(function(m){this.setDefaultValue(l,m,h[m])},this)},s.prototype.setMessages=function(l,h){i=l,h&&h.placeholders&&(u=h.placeholders)},s.prototype.nls=function(l,h,m){i[l]||(o("No message found for the key '"+l+"' in messages with id "+i.$id+", trying to find a translation for the default string '"+h+"'."),i[h]||o("No message found for the default string '"+h+"' in the provided messages. Falling back to the default English message."));var w=i[l]||i[h]||h;return m&&(u==="dollarSigns"&&(w=w.replace(/\$(\$|[\d]+)/g,function(C,A){return A=="$"?"$":m[A]})),u==="curlyBrackets"&&(w=w.replace(/\{([^\}]+)\}/g,function(C,A){return m[A]}))),w},s}();c.prototype.warn=o,c.prototype.reportError=y,f.implement(c.prototype,g),r.AppConfig=c}),ace.define("ace/theme/textmate-css",["require","exports","module"],function(e,r,p){p.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`}),ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(e,r,p){r.isDark=!1,r.cssClass="ace-tm",r.cssText=e("./textmate-css"),r.$id="ace/theme/textmate";var f=e("../lib/dom");f.importCssString(r.cssText,r.cssClass,!1)}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,r,p){"no use strict";var f=e("./lib/lang"),g=e("./lib/net"),y=e("./lib/dom"),a=e("./lib/app_config").AppConfig;p.exports=r=new a;var d={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};r.get=function(c){if(!d.hasOwnProperty(c))throw new Error("Unknown config key: "+c);return d[c]},r.set=function(c,s){if(d.hasOwnProperty(c))d[c]=s;else if(this.setDefaultValue("",c,s)==!1)throw new Error("Unknown config key: "+c);c=="useStrictCSP"&&y.useStrictCSP(s)},r.all=function(){return f.copyObject(d)},r.$modes={},r.moduleUrl=function(c,s){if(d.$moduleUrls[c])return d.$moduleUrls[c];var l=c.split("/");s=s||l[l.length-2]||"";var h=s=="snippets"?"/":"-",m=l[l.length-1];if(s=="worker"&&h=="-"){var w=new RegExp("^"+s+"[\\-_]|[\\-_]"+s+"$","g");m=m.replace(w,"")}(!m||m==s)&&l.length>1&&(m=l[l.length-2]);var C=d[s+"Path"];return C==null?C=d.basePath:h=="/"&&(s=h=""),C&&C.slice(-1)!="/"&&(C+="/"),C+s+h+m+this.get("suffix")},r.setModuleUrl=function(c,s){return d.$moduleUrls[c]=s};var o=function(c,s){if(c==="ace/theme/textmate"||c==="./theme/textmate")return s(null,e("./theme/textmate"));if(i)return i(c,s);console.error("loader is not configured")},i;r.setLoader=function(c){i=c},r.dynamicModules=Object.create(null),r.$loading={},r.$loaded={},r.loadModule=function(c,s){var l;if(Array.isArray(c))var h=c[0],m=c[1];else if(typeof c=="string")var m=c;var w=function(C){if(C&&!r.$loading[m])return s&&s(C);if(r.$loading[m]||(r.$loading[m]=[]),r.$loading[m].push(s),!(r.$loading[m].length>1)){var A=function(){o(m,function(E,b){b&&(r.$loaded[m]=b),r._emit("load.module",{name:m,module:b});var L=r.$loading[m];r.$loading[m]=null,L.forEach(function(_){_&&_(b)})})};if(!r.get("packaged"))return A();g.loadScript(r.moduleUrl(m,h),A),u()}};if(r.dynamicModules[m])r.dynamicModules[m]().then(function(C){C.default?w(C.default):w(C)});else{try{l=this.$require(m)}catch{}w(l||r.$loaded[m])}},r.$require=function(c){if(typeof p.require=="function"){var s="require";return p[s](c)}},r.setModuleLoader=function(c,s){r.dynamicModules[c]=s};var u=function(){!d.basePath&&!d.workerPath&&!d.modePath&&!d.themePath&&!Object.keys(d.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),u=function(){})};r.version="1.37.1"}),ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,r,p){e("./lib/fixoldbrowsers");var f=e("./config");f.setLoader(function(d,o){e([d],function(i){o(null,i)})});var g=function(){return this||typeof window<"u"&&window}();p.exports=function(d){f.init=y,f.$require=e,d.require=e},y(!0);function y(d){if(!(!g||!g.document)){f.set("packaged",d||e.packaged||p.packaged||g.define&&(void 0).packaged);var o={},i="",u=document.currentScript||document._currentScript,c=u&&u.ownerDocument||document;u&&u.src&&(i=u.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var s=c.getElementsByTagName("script"),l=0;l<s.length;l++){var h=s[l],m=h.src||h.getAttribute("src");if(m){for(var w=h.attributes,C=0,A=w.length;C<A;C++){var E=w[C];E.name.indexOf("data-ace-")===0&&(o[a(E.name.replace(/^data-ace-/,""))]=E.value)}var b=m.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);b&&(i=b[1])}}i&&(o.base=o.base||i,o.packaged=!0),o.basePath=o.base,o.workerPath=o.workerPath||o.base,o.modePath=o.modePath||o.base,o.themePath=o.themePath||o.base,delete o.base;for(var L in o)typeof o[L]<"u"&&f.set(L,o[L])}}function a(d){return d.replace(/-(.)/g,function(o,i){return i.toUpperCase()})}}),ace.define("ace/range",["require","exports","module"],function(e,r,p){var f=function(){function g(y,a,d,o){this.start={row:y,column:a},this.end={row:d,column:o}}return g.prototype.isEqual=function(y){return this.start.row===y.start.row&&this.end.row===y.end.row&&this.start.column===y.start.column&&this.end.column===y.end.column},g.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},g.prototype.contains=function(y,a){return this.compare(y,a)==0},g.prototype.compareRange=function(y){var a,d=y.end,o=y.start;return a=this.compare(d.row,d.column),a==1?(a=this.compare(o.row,o.column),a==1?2:a==0?1:0):a==-1?-2:(a=this.compare(o.row,o.column),a==-1?-1:a==1?42:0)},g.prototype.comparePoint=function(y){return this.compare(y.row,y.column)},g.prototype.containsRange=function(y){return this.comparePoint(y.start)==0&&this.comparePoint(y.end)==0},g.prototype.intersects=function(y){var a=this.compareRange(y);return a==-1||a==0||a==1},g.prototype.isEnd=function(y,a){return this.end.row==y&&this.end.column==a},g.prototype.isStart=function(y,a){return this.start.row==y&&this.start.column==a},g.prototype.setStart=function(y,a){typeof y=="object"?(this.start.column=y.column,this.start.row=y.row):(this.start.row=y,this.start.column=a)},g.prototype.setEnd=function(y,a){typeof y=="object"?(this.end.column=y.column,this.end.row=y.row):(this.end.row=y,this.end.column=a)},g.prototype.inside=function(y,a){return this.compare(y,a)==0?!(this.isEnd(y,a)||this.isStart(y,a)):!1},g.prototype.insideStart=function(y,a){return this.compare(y,a)==0?!this.isEnd(y,a):!1},g.prototype.insideEnd=function(y,a){return this.compare(y,a)==0?!this.isStart(y,a):!1},g.prototype.compare=function(y,a){return!this.isMultiLine()&&y===this.start.row?a<this.start.column?-1:a>this.end.column?1:0:y<this.start.row?-1:y>this.end.row?1:this.start.row===y?a>=this.start.column?0:-1:this.end.row===y?a<=this.end.column?0:1:0},g.prototype.compareStart=function(y,a){return this.start.row==y&&this.start.column==a?-1:this.compare(y,a)},g.prototype.compareEnd=function(y,a){return this.end.row==y&&this.end.column==a?1:this.compare(y,a)},g.prototype.compareInside=function(y,a){return this.end.row==y&&this.end.column==a?1:this.start.row==y&&this.start.column==a?-1:this.compare(y,a)},g.prototype.clipRows=function(y,a){if(this.end.row>a)var d={row:a+1,column:0};else if(this.end.row<y)var d={row:y,column:0};if(this.start.row>a)var o={row:a+1,column:0};else if(this.start.row<y)var o={row:y,column:0};return g.fromPoints(o||this.start,d||this.end)},g.prototype.extend=function(y,a){var d=this.compare(y,a);if(d==0)return this;if(d==-1)var o={row:y,column:a};else var i={row:y,column:a};return g.fromPoints(o||this.start,i||this.end)},g.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},g.prototype.isMultiLine=function(){return this.start.row!==this.end.row},g.prototype.clone=function(){return g.fromPoints(this.start,this.end)},g.prototype.collapseRows=function(){return this.end.column==0?new g(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new g(this.start.row,0,this.end.row,0)},g.prototype.toScreenRange=function(y){var a=y.documentToScreenPosition(this.start),d=y.documentToScreenPosition(this.end);return new g(a.row,a.column,d.row,d.column)},g.prototype.moveBy=function(y,a){this.start.row+=y,this.start.column+=a,this.end.row+=y,this.end.column+=a},g}();f.fromPoints=function(g,y){return new f(g.row,g.column,y.row,y.column)},f.comparePoints=function(g,y){return g.row-y.row||g.column-y.column},r.Range=f}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,r,p){for(var f=e("./oop"),g={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete","-13":"NumpadEnter",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",59:";",61:"=",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},y={Command:224,Backspace:8,Tab:9,Return:13,Enter:13,Pause:19,Escape:27,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Delete:46,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Backquote:192,Minus:189,Equal:187,BracketLeft:219,Backslash:220,BracketRight:221,Semicolon:186,Quote:222,Comma:188,Period:190,Slash:191,Space:32,NumpadAdd:107,NumpadDecimal:110,NumpadSubtract:109,NumpadDivide:111,NumpadMultiply:106},a=0;a<10;a++)y["Digit"+a]=48+a,y["Numpad"+a]=96+a,g.PRINTABLE_KEYS[48+a]=""+a,g.FUNCTION_KEYS[96+a]="Numpad"+a;for(var a=65;a<91;a++){var d=String.fromCharCode(a+32);y["Key"+d.toUpperCase()]=a,g.PRINTABLE_KEYS[a]=d}for(var a=1;a<13;a++)y["F"+a]=111+a,g.FUNCTION_KEYS[111+a]="F"+a;var o={Shift:16,Control:17,Alt:18,Meta:224};for(var i in o)y[i]=y[i+"Left"]=y[i+"Right"]=o[i];r.$codeToKeyCode=y,g.PRINTABLE_KEYS[173]="-";for(var u in g.FUNCTION_KEYS){var c=g.FUNCTION_KEYS[u].toLowerCase();g[c]=parseInt(u,10)}for(var u in g.PRINTABLE_KEYS){var c=g.PRINTABLE_KEYS[u].toLowerCase();g[c]=parseInt(u,10)}f.mixin(g,g.MODIFIER_KEYS),f.mixin(g,g.PRINTABLE_KEYS),f.mixin(g,g.FUNCTION_KEYS),g.enter=g.return,g.escape=g.esc,g.del=g.delete,function(){for(var s=["cmd","ctrl","alt","shift"],l=Math.pow(2,s.length);l--;)g.KEY_MODS[l]=s.filter(function(h){return l&g.KEY_MODS[h]}).join("-")+"-"}(),g.KEY_MODS[0]="",g.KEY_MODS[-1]="input-",f.mixin(r,g),r.default=r,r.keyCodeToString=function(s){var l=g[s];return typeof l!="string"&&(l=String.fromCharCode(s)),l.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,r,p){var f=e("./keys"),g=e("./useragent"),y=null,a=0,d;function o(){d=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return d={passive:!1},!0}})}catch{}}function i(){return d==null&&o(),d}function u(C,A,E){this.elem=C,this.type=A,this.callback=E}u.prototype.destroy=function(){s(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var c=r.addListener=function(C,A,E,b){C.addEventListener(A,E,i()),b&&b.$toDestroy.push(new u(C,A,E))},s=r.removeListener=function(C,A,E){C.removeEventListener(A,E,i())};r.stopEvent=function(C){return r.stopPropagation(C),r.preventDefault(C),!1},r.stopPropagation=function(C){C.stopPropagation&&C.stopPropagation()},r.preventDefault=function(C){C.preventDefault&&C.preventDefault()},r.getButton=function(C){return C.type=="dblclick"?0:C.type=="contextmenu"||g.isMac&&C.ctrlKey&&!C.altKey&&!C.shiftKey?2:C.button},r.capture=function(C,A,E){var b=C&&C.ownerDocument||document;function L(_){A&&A(_),E&&E(_),s(b,"mousemove",A),s(b,"mouseup",L),s(b,"dragstart",L)}return c(b,"mousemove",A),c(b,"mouseup",L),c(b,"dragstart",L),L},r.addMouseWheelListener=function(C,A,E){c(C,"wheel",function(b){var L=.15,_=b.deltaX||0,k=b.deltaY||0;switch(b.deltaMode){case b.DOM_DELTA_PIXEL:b.wheelX=_*L,b.wheelY=k*L;break;case b.DOM_DELTA_LINE:var T=15;b.wheelX=_*T,b.wheelY=k*T;break;case b.DOM_DELTA_PAGE:var O=150;b.wheelX=_*O,b.wheelY=k*O;break}A(b)},E)},r.addMultiMouseDownListener=function(C,A,E,b,L){var _=0,k,T,O,$={2:"dblclick",3:"tripleclick",4:"quadclick"};function v(S){if(r.getButton(S)!==0?_=0:S.detail>1?(_++,_>4&&(_=1)):_=1,g.isIE){var x=Math.abs(S.clientX-k)>5||Math.abs(S.clientY-T)>5;(!O||x)&&(_=1),O&&clearTimeout(O),O=setTimeout(function(){O=null},A[_-1]||600),_==1&&(k=S.clientX,T=S.clientY)}if(S._clicks=_,E[b]("mousedown",S),_>4)_=0;else if(_>1)return E[b]($[_],S)}Array.isArray(C)||(C=[C]),C.forEach(function(S){c(S,"mousedown",v,L)})};function l(C){return 0|(C.ctrlKey?1:0)|(C.altKey?2:0)|(C.shiftKey?4:0)|(C.metaKey?8:0)}r.getModifierString=function(C){return f.KEY_MODS[l(C)]};function h(C,A,E){var b=l(A);if(!E&&A.code&&(E=f.$codeToKeyCode[A.code]||E),!g.isMac&&y){if(A.getModifierState&&(A.getModifierState("OS")||A.getModifierState("Win"))&&(b|=8),y.altGr)if((3&b)!=3)y.altGr=0;else return;if(E===18||E===17){var L=A.location;if(E===17&&L===1)y[E]==1&&(a=A.timeStamp);else if(E===18&&b===3&&L===2){var _=A.timeStamp-a;_<50&&(y.altGr=!0)}}}if(E in f.MODIFIER_KEYS&&(E=-1),!(!b&&E===13&&A.location===3&&(C(A,b,-E),A.defaultPrevented))){if(g.isChromeOS&&b&8){if(C(A,b,E),A.defaultPrevented)return;b&=-9}return!b&&!(E in f.FUNCTION_KEYS)&&!(E in f.PRINTABLE_KEYS)?!1:C(A,b,E)}}r.addCommandKeyListener=function(C,A,E){var b=null;c(C,"keydown",function(L){y[L.keyCode]=(y[L.keyCode]||0)+1;var _=h(A,L,L.keyCode);return b=L.defaultPrevented,_},E),c(C,"keypress",function(L){b&&(L.ctrlKey||L.altKey||L.shiftKey||L.metaKey)&&(r.stopEvent(L),b=null)},E),c(C,"keyup",function(L){y[L.keyCode]=null},E),y||(m(),c(window,"focus",m))};function m(){y=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!g.isOldIE){var w=1;r.nextTick=function(C,A){A=A||window;var E="zero-timeout-message-"+w++,b=function(L){L.data==E&&(r.stopPropagation(L),s(A,"message",b),C())};c(A,"message",b),A.postMessage(E,"*")}}r.$idleBlocked=!1,r.onIdle=function(C,A){return setTimeout(function E(){r.$idleBlocked?setTimeout(E,100):C()},A)},r.$idleBlockId=null,r.blockIdle=function(C){r.$idleBlockId&&clearTimeout(r.$idleBlockId),r.$idleBlocked=!0,r.$idleBlockId=setTimeout(function(){r.$idleBlocked=!1},C||100)},r.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),r.nextFrame?r.nextFrame=r.nextFrame.bind(window):r.nextFrame=function(C){setTimeout(C,17)}}),ace.define("ace/clipboard",["require","exports","module"],function(e,r,p){var f;p.exports={lineMode:!1,pasteCancelled:function(){return f&&f>Date.now()-50?!0:f=!1},cancel:function(){f=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,r,p){var f=e("../lib/event"),g=e("../config").nls,y=e("../lib/useragent"),a=e("../lib/dom"),d=e("../lib/lang"),o=e("../clipboard"),i=y.isChrome<18,u=y.isIE,c=y.isChrome>63,s=400,l=e("../lib/keys"),h=l.KEY_MODS,m=y.isIOS,w=m?/\s/:/\n/,C=y.isMobile,A;A=function(E,b){var L=a.createElement("textarea");L.className="ace_text-input",L.setAttribute("wrap","off"),L.setAttribute("autocorrect","off"),L.setAttribute("autocapitalize","off"),L.setAttribute("spellcheck","false"),L.style.opacity="0",E.insertBefore(L,E.firstChild);var _=!1,k=!1,T=!1,O=!1,$="";C||(L.style.fontSize="1px");var v=!1,S=!1,x="",M=0,R=0,I=0,D=Number.MAX_SAFE_INTEGER,N=Number.MIN_SAFE_INTEGER,B=0;try{var W=document.activeElement===L}catch{}this.setNumberOfExtraLines=function(j){if(D=Number.MAX_SAFE_INTEGER,N=Number.MIN_SAFE_INTEGER,j<0){B=0;return}B=j},this.setAriaLabel=function(){var j="";if(b.$textInputAriaLabel&&(j+="".concat(b.$textInputAriaLabel,", ")),b.session){var Q=b.session.selection.cursor.row;j+=g("text-input.aria-label","Cursor at row $0",[Q+1])}L.setAttribute("aria-label",j)},this.setAriaOptions=function(j){j.activeDescendant?(L.setAttribute("aria-haspopup","true"),L.setAttribute("aria-autocomplete",j.inline?"both":"list"),L.setAttribute("aria-activedescendant",j.activeDescendant)):(L.setAttribute("aria-haspopup","false"),L.setAttribute("aria-autocomplete","both"),L.removeAttribute("aria-activedescendant")),j.role&&L.setAttribute("role",j.role),j.setLabel&&(L.setAttribute("aria-roledescription",g("text-input.aria-roledescription","editor")),this.setAriaLabel())},this.setAriaOptions({role:"textbox"}),f.addListener(L,"blur",function(j){S||(b.onBlur(j),W=!1)},b),f.addListener(L,"focus",function(j){if(!S){if(W=!0,y.isEdge)try{if(!document.hasFocus())return}catch{}b.onFocus(j),y.isEdge?setTimeout(H):H()}},b),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:b.renderer.enableKeyboardAccessibility}),$||c||this.$focusScroll=="browser")return L.focus({preventScroll:!0});var j=L.style.top;L.style.position="fixed",L.style.top="0px";try{var Q=L.getBoundingClientRect().top!=0}catch{return}var X=[];if(Q)for(var J=L.parentElement;J&&J.nodeType==1;)X.push(J),J.setAttribute("ace_nocontext","true"),!J.parentElement&&J.getRootNode?J=J.getRootNode().host:J=J.parentElement;L.focus({preventScroll:!0}),Q&&X.forEach(function(ie){ie.removeAttribute("ace_nocontext")}),setTimeout(function(){L.style.position="",L.style.top=="0px"&&(L.style.top=j)},0)},this.blur=function(){L.blur()},this.isFocused=function(){return W},b.on("beforeEndOperation",function(){var j=b.curOp,Q=j&&j.command&&j.command.name;if(Q!="insertstring"){var X=Q&&(j.docChanged||j.selectionChanged);T&&X&&(x=L.value="",yt()),H()}}),b.on("changeSelection",this.setAriaLabel);var F=function(j,Q){for(var X=Q,J=1;J<=j-D&&J<2*B+1;J++)X+=b.session.getLine(j-J).length+1;return X},H=m?function(j){if(!(!W||_&&!j||O)){j||(j="");var Q=`
 ab`+j+`cde fg
`;Q!=L.value&&(L.value=x=Q);var X=4,J=4+(j.length||(b.selection.isEmpty()?0:1));(M!=X||R!=J)&&L.setSelectionRange(X,J),M=X,R=J}}:function(){if(!(T||O)&&!(!W&&!G)){T=!0;var j=0,Q=0,X="";if(b.session){var J=b.selection,ie=J.getRange(),ae=J.cursor.row;ae===N+1?(D=N+1,N=D+2*B):ae===D-1?(N=D-1,D=N-2*B):(ae<D-1||ae>N+1)&&(D=ae>B?ae-B:0,N=ae>B?ae+B:2*B);for(var ge=[],le=D;le<=N;le++)ge.push(b.session.getLine(le));if(X=ge.join(`
`),j=F(ie.start.row,ie.start.column),Q=F(ie.end.row,ie.end.column),ie.start.row<D){var se=b.session.getLine(D-1);j=ie.start.row<D-1?0:j,Q+=se.length+1,X=se+`
`+X}else if(ie.end.row>N){var oe=b.session.getLine(N+1);Q=ie.end.row>N+1?oe.length:ie.end.column,Q+=X.length+1,X=X+`
`+oe}else C&&ae>0&&(X=`
`+X,Q+=1,j+=1);X.length>s&&(j<s&&Q<s?X=X.slice(0,s):(X=`
`,j==Q?j=Q=0:(j=0,Q=1)));var Me=X+`

`;Me!=x&&(L.value=x=Me,M=R=Me.length)}if(G&&(M=L.selectionStart,R=L.selectionEnd),R!=Q||M!=j||L.selectionEnd!=R)try{L.setSelectionRange(j,Q),M=j,R=Q}catch{}T=!1}};this.resetSelection=H,W&&b.onFocus();var z=function(j){return j.selectionStart===0&&j.selectionEnd>=x.length&&j.value===x&&x&&j.selectionEnd!==R},P=function(j){T||(_?_=!1:z(L)?(b.selectAll(),H()):C&&L.selectionStart!=M&&H())},U=null;this.setInputHandler=function(j){U=j},this.getInputHandler=function(){return U};var G=!1,K=function(j,Q){if(G&&(G=!1),k)return H(),j&&b.onPaste(j),k=!1,"";for(var X=L.selectionStart,J=L.selectionEnd,ie=M,ae=x.length-R,ge=j,le=j.length-X,se=j.length-J,oe=0;ie>0&&x[oe]==j[oe];)oe++,ie--;for(ge=ge.slice(oe),oe=1;ae>0&&x.length-oe>M-1&&x[x.length-oe]==j[j.length-oe];)oe++,ae--;le-=oe-1,se-=oe-1;var Me=ge.length-oe+1;if(Me<0&&(ie=-Me,Me=0),ge=ge.slice(0,Me),!Q&&!ge&&!le&&!ie&&!ae&&!se)return"";O=!0;var Ut=!1;return y.isAndroid&&ge==". "&&(ge="  ",Ut=!0),ge&&!ie&&!ae&&!le&&!se||v?b.onTextInput(ge):b.onTextInput(ge,{extendLeft:ie,extendRight:ae,restoreStart:le,restoreEnd:se}),O=!1,x=j,M=X,R=J,I=se,Ut?`
`:ge},V=function(j){if(T)return vt();if(j&&j.inputType){if(j.inputType=="historyUndo")return b.execCommand("undo");if(j.inputType=="historyRedo")return b.execCommand("redo")}var Q=L.value,X=K(Q,!0);(Q.length>s+100||w.test(X)||C&&M<1&&M==R)&&H()},Y=function(j,Q,X){var J=j.clipboardData||window.clipboardData;if(!(!J||i)){var ie=u||X?"Text":"text/plain";try{return Q?J.setData(ie,Q)!==!1:J.getData(ie)}catch(ae){if(!X)return Y(ae,Q,!0)}}},q=function(j,Q){var X=b.getCopyText();if(!X)return f.preventDefault(j);Y(j,X)?(m&&(H(X),_=X,setTimeout(function(){_=!1},10)),Q?b.onCut():b.onCopy(),f.preventDefault(j)):(_=!0,L.value=X,L.select(),setTimeout(function(){_=!1,H(),Q?b.onCut():b.onCopy()}))},ee=function(j){q(j,!0)},ne=function(j){q(j,!1)},re=function(j){var Q=Y(j);o.pasteCancelled()||(typeof Q=="string"?(Q&&b.onPaste(Q,j),y.isIE&&setTimeout(H),f.preventDefault(j)):(L.value="",k=!0))};f.addCommandKeyListener(L,function(j,Q,X){if(!T)return b.onCommandKey(j,Q,X)},b),f.addListener(L,"select",P,b),f.addListener(L,"input",V,b),f.addListener(L,"cut",ee,b),f.addListener(L,"copy",ne,b),f.addListener(L,"paste",re,b),(!("oncut"in L)||!("oncopy"in L)||!("onpaste"in L))&&f.addListener(E,"keydown",function(j){if(!(y.isMac&&!j.metaKey||!j.ctrlKey))switch(j.keyCode){case 67:ne(j);break;case 86:re(j);break;case 88:ee(j);break}},b);var me=function(j){if(!(T||!b.onCompositionStart||b.$readOnly)&&(T={},!v)){j.data&&(T.useTextareaForIME=!1),setTimeout(vt,0),b._signal("compositionStart"),b.on("mousedown",Gn);var Q=b.getSelectionRange();Q.end.row=Q.start.row,Q.end.column=Q.start.column,T.markerRange=Q,T.selectionStart=M,b.onCompositionStart(T),T.useTextareaForIME?(x=L.value="",M=0,R=0):(L.msGetInputContext&&(T.context=L.msGetInputContext()),L.getInputContext&&(T.context=L.getInputContext()))}},vt=function(){if(!(!T||!b.onCompositionUpdate||b.$readOnly)){if(v)return Gn();if(T.useTextareaForIME)b.onCompositionUpdate(L.value);else{var j=L.value;K(j),T.markerRange&&(T.context&&(T.markerRange.start.column=T.selectionStart=T.context.compositionStartOffset),T.markerRange.end.column=T.markerRange.start.column+R-T.selectionStart+I)}}},yt=function(j){!b.onCompositionEnd||b.$readOnly||(T=!1,b.onCompositionEnd(),b.off("mousedown",Gn),j&&V())};function Gn(){S=!0,L.blur(),L.focus(),S=!1}var zi=d.delayedCall(vt,50).schedule.bind(null,null);function dl(j){j.keyCode==27&&L.value.length<L.selectionStart&&(T||(x=L.value),M=R=-1,H()),zi()}f.addListener(L,"compositionstart",me,b),f.addListener(L,"compositionupdate",vt,b),f.addListener(L,"keyup",dl,b),f.addListener(L,"keydown",zi,b),f.addListener(L,"compositionend",yt,b),this.getElement=function(){return L},this.setCommandMode=function(j){v=j,L.readOnly=!1},this.setReadOnly=function(j){v||(L.readOnly=j)},this.setCopyWithEmptySelection=function(j){},this.onContextMenu=function(j){G=!0,H(),b._emit("nativecontextmenu",{target:b,domEvent:j}),this.moveToMouse(j,!0)},this.moveToMouse=function(j,Q){$||($=L.style.cssText),L.style.cssText=(Q?"z-index:100000;":"")+(y.isIE?"opacity:0.1;":"")+"text-indent: -"+(M+R)*b.renderer.characterWidth*.5+"px;";var X=b.container.getBoundingClientRect(),J=a.computedStyle(b.container),ie=X.top+(parseInt(J.borderTopWidth)||0),ae=X.left+(parseInt(X.borderLeftWidth)||0),ge=X.bottom-ie-L.clientHeight-2,le=function(se){a.translate(L,se.clientX-ae-2,Math.min(se.clientY-ie-2,ge))};le(j),j.type=="mousedown"&&(b.renderer.$isMousePressed=!0,clearTimeout(Kn),y.isWin&&f.capture(b.container,le,an))},this.onContextMenuClose=an;var Kn;function an(){clearTimeout(Kn),Kn=setTimeout(function(){$&&(L.style.cssText=$,$=""),b.renderer.$isMousePressed=!1,b.renderer.$keepTextAreaAtCursor&&b.renderer.$moveTextAreaToCursor()},0)}var Yn=function(j){b.textInput.onContextMenu(j),an()};f.addListener(L,"mouseup",Yn,b),f.addListener(L,"mousedown",function(j){j.preventDefault(),an()},b),f.addListener(b.renderer.scroller,"contextmenu",Yn,b),f.addListener(L,"contextmenu",Yn,b),m&&fl(E,b,L);function fl(j,Q,X){var J=null,ie=!1;X.addEventListener("keydown",function(ge){J&&clearTimeout(J),ie=!0},!0),X.addEventListener("keyup",function(ge){J=setTimeout(function(){ie=!1},100)},!0);var ae=function(ge){if(document.activeElement===X&&!(ie||T||Q.$mouseHandler.isMousePressed)&&!_){var le=X.selectionStart,se=X.selectionEnd,oe=null,Me=0;if(le==0?oe=l.up:le==1?oe=l.home:se>R&&x[se]==`
`?oe=l.end:le<M&&x[le-1]==" "?(oe=l.left,Me=h.option):le<M||le==M&&R!=M&&le==se?oe=l.left:se>R&&x.slice(0,se).split(`
`).length>2?oe=l.down:se>R&&x[se-1]==" "?(oe=l.right,Me=h.option):(se>R||se==R&&R!=M&&le==se)&&(oe=l.right),le!==se&&(Me|=h.shift),oe){var Ut=Q.onCommandKey({},Me,oe);if(!Ut&&Q.commands){oe=l.keyCodeToString(oe);var Ui=Q.commands.findKeyCommand(Me,oe);Ui&&Q.execCommand(Ui)}M=le,R=se,H("")}}};document.addEventListener("selectionchange",ae),Q.on("destroy",function(){document.removeEventListener("selectionchange",ae)})}this.destroy=function(){L.parentElement&&L.parentElement.removeChild(L)}},r.TextInput=A,r.$setUserAgentForTests=function(E,b){C=E,m=b}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,r,p){var f=e("../lib/useragent"),g=0,y=550,a=function(){function i(u){u.$clickSelection=null;var c=u.editor;c.setDefaultHandler("mousedown",this.onMouseDown.bind(u)),c.setDefaultHandler("dblclick",this.onDoubleClick.bind(u)),c.setDefaultHandler("tripleclick",this.onTripleClick.bind(u)),c.setDefaultHandler("quadclick",this.onQuadClick.bind(u)),c.setDefaultHandler("mousewheel",this.onMouseWheel.bind(u));var s=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];s.forEach(function(l){u[l]=this[l]},this),u.selectByLines=this.extendSelectionBy.bind(u,"getLineRange"),u.selectByWords=this.extendSelectionBy.bind(u,"getWordRange")}return i.prototype.onMouseDown=function(u){var c=u.inSelection(),s=u.getDocumentPosition();this.mousedownEvent=u;var l=this.editor,h=u.getButton();if(h!==0){var m=l.getSelectionRange(),w=m.isEmpty();(w||h==1)&&l.selection.moveToPosition(s),h==2&&(l.textInput.onContextMenu(u.domEvent),f.isMozilla||u.preventDefault());return}if(this.mousedownEvent.time=Date.now(),c&&!l.isFocused()&&(l.focus(),this.$focusTimeout&&!this.$clickSelection&&!l.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(u);return}return this.captureMouse(u),this.startSelect(s,u.domEvent._clicks>1),u.preventDefault()},i.prototype.startSelect=function(u,c){u=u||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var s=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?s.selection.selectToPosition(u):c||s.selection.moveToPosition(u),c||this.select(),s.setStyle("ace_selecting"),this.setState("select"))},i.prototype.select=function(){var u,c=this.editor,s=c.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var l=this.$clickSelection.comparePoint(s);if(l==-1)u=this.$clickSelection.end;else if(l==1)u=this.$clickSelection.start;else{var h=o(this.$clickSelection,s);s=h.cursor,u=h.anchor}c.selection.setSelectionAnchor(u.row,u.column)}c.selection.selectToPosition(s),c.renderer.scrollCursorIntoView()},i.prototype.extendSelectionBy=function(u){var c,s=this.editor,l=s.renderer.screenToTextCoordinates(this.x,this.y),h=s.selection[u](l.row,l.column);if(this.$clickSelection){var m=this.$clickSelection.comparePoint(h.start),w=this.$clickSelection.comparePoint(h.end);if(m==-1&&w<=0)c=this.$clickSelection.end,(h.end.row!=l.row||h.end.column!=l.column)&&(l=h.start);else if(w==1&&m>=0)c=this.$clickSelection.start,(h.start.row!=l.row||h.start.column!=l.column)&&(l=h.end);else if(m==-1&&w==1)l=h.end,c=h.start;else{var C=o(this.$clickSelection,l);l=C.cursor,c=C.anchor}s.selection.setSelectionAnchor(c.row,c.column)}s.selection.selectToPosition(l),s.renderer.scrollCursorIntoView()},i.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},i.prototype.focusWait=function(){var u=d(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),c=Date.now();(u>g||c-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},i.prototype.onDoubleClick=function(u){var c=u.getDocumentPosition(),s=this.editor,l=s.session,h=l.getBracketRange(c);h?(h.isEmpty()&&(h.start.column--,h.end.column++),this.setState("select")):(h=s.selection.getWordRange(c.row,c.column),this.setState("selectByWords")),this.$clickSelection=h,this.select()},i.prototype.onTripleClick=function(u){var c=u.getDocumentPosition(),s=this.editor;this.setState("selectByLines");var l=s.getSelectionRange();l.isMultiLine()&&l.contains(c.row,c.column)?(this.$clickSelection=s.selection.getLineRange(l.start.row),this.$clickSelection.end=s.selection.getLineRange(l.end.row).end):this.$clickSelection=s.selection.getLineRange(c.row),this.select()},i.prototype.onQuadClick=function(u){var c=this.editor;c.selectAll(),this.$clickSelection=c.getSelectionRange(),this.setState("selectAll")},i.prototype.onMouseWheel=function(u){if(!u.getAccelKey()){u.getShiftKey()&&u.wheelY&&!u.wheelX&&(u.wheelX=u.wheelY,u.wheelY=0);var c=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var s=this.$lastScroll,l=u.domEvent.timeStamp,h=l-s.t,m=h?u.wheelX/h:s.vx,w=h?u.wheelY/h:s.vy;h<y&&(m=(m+s.vx)/2,w=(w+s.vy)/2);var C=Math.abs(m/w),A=!1;if(C>=1&&c.renderer.isScrollableBy(u.wheelX*u.speed,0)&&(A=!0),C<=1&&c.renderer.isScrollableBy(0,u.wheelY*u.speed)&&(A=!0),A)s.allowed=l;else if(l-s.allowed<y){var E=Math.abs(m)<=1.5*Math.abs(s.vx)&&Math.abs(w)<=1.5*Math.abs(s.vy);E?(A=!0,s.allowed=l):s.allowed=0}if(s.t=l,s.vx=m,s.vy=w,A)return c.renderer.scrollBy(u.wheelX*u.speed,u.wheelY*u.speed),u.stop()}},i}();a.prototype.selectEnd=a.prototype.selectByLinesEnd,a.prototype.selectAllEnd=a.prototype.selectByLinesEnd,a.prototype.selectByWordsEnd=a.prototype.selectByLinesEnd,r.DefaultHandlers=a;function d(i,u,c,s){return Math.sqrt(Math.pow(c-i,2)+Math.pow(s-u,2))}function o(i,u){if(i.start.row==i.end.row)var c=2*u.column-i.start.column-i.end.column;else if(i.start.row==i.end.row-1&&!i.start.column&&!i.end.column)var c=u.column-4;else var c=2*u.row-i.start.row-i.end.row;return c<0?{cursor:i.start,anchor:i.end}:{cursor:i.end,anchor:i.start}}}),ace.define("ace/lib/scroll",["require","exports","module"],function(e,r,p){r.preventParentScroll=function(g){g.stopPropagation();var y=g.currentTarget,a=y.scrollHeight>y.clientHeight;a||g.preventDefault()}}),ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(e,r,p){var f=this&&this.__extends||function(){var l=function(h,m){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,C){w.__proto__=C}||function(w,C){for(var A in C)Object.prototype.hasOwnProperty.call(C,A)&&(w[A]=C[A])},l(h,m)};return function(h,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");l(h,m);function w(){this.constructor=h}h.prototype=m===null?Object.create(m):(w.prototype=m.prototype,new w)}}(),g=this&&this.__values||function(l){var h=typeof Symbol=="function"&&Symbol.iterator,m=h&&l[h],w=0;if(m)return m.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&w>=l.length&&(l=void 0),{value:l&&l[w++],done:!l}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},y=e("./lib/dom");e("./lib/event");var a=e("./range").Range,d=e("./lib/scroll").preventParentScroll,o="ace_tooltip",i=function(){function l(h){this.isOpen=!1,this.$element=null,this.$parentNode=h}return l.prototype.$init=function(){return this.$element=y.createElement("div"),this.$element.className=o,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},l.prototype.getElement=function(){return this.$element||this.$init()},l.prototype.setText=function(h){this.getElement().textContent=h},l.prototype.setHtml=function(h){this.getElement().innerHTML=h},l.prototype.setPosition=function(h,m){this.getElement().style.left=h+"px",this.getElement().style.top=m+"px"},l.prototype.setClassName=function(h){y.addCssClass(this.getElement(),h)},l.prototype.setTheme=function(h){this.$element.className=o+" "+(h.isDark?"ace_dark ":"")+(h.cssClass||"")},l.prototype.show=function(h,m,w){h!=null&&this.setText(h),m!=null&&w!=null&&this.setPosition(m,w),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},l.prototype.hide=function(h){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=o,this.isOpen=!1)},l.prototype.getHeight=function(){return this.getElement().offsetHeight},l.prototype.getWidth=function(){return this.getElement().offsetWidth},l.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},l}(),u=function(){function l(){this.popups=[]}return l.prototype.addPopup=function(h){this.popups.push(h),this.updatePopups()},l.prototype.removePopup=function(h){var m=this.popups.indexOf(h);m!==-1&&(this.popups.splice(m,1),this.updatePopups())},l.prototype.updatePopups=function(){var h,m,w,C;this.popups.sort(function($,v){return v.priority-$.priority});var A=[];try{for(var E=g(this.popups),b=E.next();!b.done;b=E.next()){var L=b.value,_=!0;try{for(var k=(w=void 0,g(A)),T=k.next();!T.done;T=k.next()){var O=T.value;if(this.doPopupsOverlap(O,L)){_=!1;break}}}catch($){w={error:$}}finally{try{T&&!T.done&&(C=k.return)&&C.call(k)}finally{if(w)throw w.error}}_?A.push(L):L.hide()}}catch($){h={error:$}}finally{try{b&&!b.done&&(m=E.return)&&m.call(E)}finally{if(h)throw h.error}}},l.prototype.doPopupsOverlap=function(h,m){var w=h.getElement().getBoundingClientRect(),C=m.getElement().getBoundingClientRect();return w.left<C.right&&w.right>C.left&&w.top<C.bottom&&w.bottom>C.top},l}(),c=new u;r.popupManager=c,r.Tooltip=i;var s=function(l){f(h,l);function h(m){m===void 0&&(m=document.body);var w=l.call(this,m)||this;w.timeout=void 0,w.lastT=0,w.idleTime=350,w.lastEvent=void 0,w.onMouseOut=w.onMouseOut.bind(w),w.onMouseMove=w.onMouseMove.bind(w),w.waitForHover=w.waitForHover.bind(w),w.hide=w.hide.bind(w);var C=w.getElement();return C.style.whiteSpace="pre-wrap",C.style.pointerEvents="auto",C.addEventListener("mouseout",w.onMouseOut),C.tabIndex=-1,C.addEventListener("blur",(function(){C.contains(document.activeElement)||this.hide()}).bind(w)),C.addEventListener("wheel",d),w}return h.prototype.addToEditor=function(m){m.on("mousemove",this.onMouseMove),m.on("mousedown",this.hide),m.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},h.prototype.removeFromEditor=function(m){m.off("mousemove",this.onMouseMove),m.off("mousedown",this.hide),m.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},h.prototype.onMouseMove=function(m,w){this.lastEvent=m,this.lastT=Date.now();var C=w.$mouseHandler.isMousePressed;if(this.isOpen){var A=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(A.row,A.column)||C||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||C||(this.lastEvent=m,this.timeout=setTimeout(this.waitForHover,this.idleTime))},h.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var m=Date.now()-this.lastT;if(this.idleTime-m>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-m);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},h.prototype.isOutsideOfText=function(m){var w=m.editor,C=m.getDocumentPosition(),A=w.session.getLine(C.row);if(C.column==A.length){var E=w.renderer.pixelToScreenCoordinates(m.clientX,m.clientY),b=w.session.documentToScreenPosition(C.row,C.column);if(b.column!=E.column||b.row!=E.row)return!0}return!1},h.prototype.setDataProvider=function(m){this.$gatherData=m},h.prototype.showForRange=function(m,w,C,A){var E=10;if(!(A&&A!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var b=m.renderer;this.isOpen||(c.addPopup(this),this.$registerCloseEvents(),this.setTheme(b.theme)),this.isOpen=!0,this.addMarker(w,m.session),this.range=a.fromPoints(w.start,w.end);var L=b.textToScreenCoordinates(w.start.row,w.start.column),_=b.scroller.getBoundingClientRect();L.pageX<_.left&&(L.pageX=_.left);var k=this.getElement();k.innerHTML="",k.appendChild(C),k.style.maxHeight="",k.style.display="block";var T=k.clientHeight,O=k.clientWidth,$=window.innerHeight-L.pageY-b.lineHeight,v=!0;L.pageY-T<0&&L.pageY<$&&(v=!1),k.style.maxHeight=(v?L.pageY:$)-E+"px",k.style.top=v?"":L.pageY+b.lineHeight+"px",k.style.bottom=v?window.innerHeight-L.pageY+"px":"",k.style.left=Math.min(L.pageX,window.innerWidth-O-E)+"px"}},h.prototype.addMarker=function(m,w){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=w,this.marker=w&&w.addMarker(m,"ace_highlight-marker","text")},h.prototype.hide=function(m){!m&&document.activeElement==this.getElement()||m&&m.target&&(m.type!="keydown"||m.ctrlKey||m.metaKey)&&this.$element.contains(m.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,c.removePopup(this)))},h.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},h.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},h.prototype.onMouseOut=function(m){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!m.relatedTarget||this.getElement().contains(m.relatedTarget)||m&&m.currentTarget.contains(m.relatedTarget)||m.relatedTarget.classList.contains("ace_content")||this.hide())},h}(i);r.HoverTooltip=s}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config","ace/lib/lang"],function(e,r,p){var f=this&&this.__extends||function(){var c=function(s,l){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,m){h.__proto__=m}||function(h,m){for(var w in m)Object.prototype.hasOwnProperty.call(m,w)&&(h[w]=m[w])},c(s,l)};return function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");c(s,l);function h(){this.constructor=s}s.prototype=l===null?Object.create(l):(h.prototype=l.prototype,new h)}}(),g=this&&this.__values||function(c){var s=typeof Symbol=="function"&&Symbol.iterator,l=s&&c[s],h=0;if(l)return l.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&h>=c.length&&(c=void 0),{value:c&&c[h++],done:!c}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},y=e("../lib/dom"),a=e("../lib/event"),d=e("../tooltip").Tooltip,o=e("../config").nls;e("../lib/lang");function i(c){var s=c.editor,l=s.renderer.$gutterLayer,h=new u(s);c.editor.setDefaultHandler("guttermousedown",function(b){if(!(!s.isFocused()||b.getButton()!=0)){var L=l.getRegion(b);if(L!="foldWidgets"){var _=b.getDocumentPosition().row,k=s.session.selection;if(b.getShiftKey())k.selectTo(_,0);else{if(b.domEvent.detail==2)return s.selectAll(),b.preventDefault();c.$clickSelection=s.selection.getLineRange(_)}return c.setState("selectByLines"),c.captureMouse(b),b.preventDefault()}}});var m,w;function C(){var b=w.getDocumentPosition().row,L=s.session.getLength();if(b==L){var _=s.renderer.pixelToScreenCoordinates(0,w.y).row,k=w.$pos;if(_>s.session.documentToScreenRow(k.row,k.column))return A()}if(h.showTooltip(b),!!h.isOpen)if(s.on("mousewheel",A),c.$tooltipFollowsMouse)E(w);else{var T=w.getGutterRow(),O=l.$lines.get(T);if(O){var $=O.element.querySelector(".ace_gutter_annotation"),v=$.getBoundingClientRect(),S=h.getElement().style;S.left=v.right+"px",S.top=v.bottom+"px"}else E(w)}}function A(){m&&(m=clearTimeout(m)),h.isOpen&&(h.hideTooltip(),s.off("mousewheel",A))}function E(b){h.setPosition(b.x,b.y)}c.editor.setDefaultHandler("guttermousemove",function(b){var L=b.domEvent.target||b.domEvent.srcElement;if(y.hasCssClass(L,"ace_fold-widget"))return A();h.isOpen&&c.$tooltipFollowsMouse&&E(b),w=b,!m&&(m=setTimeout(function(){m=null,w&&!c.isMousePressed?C():A()},50))}),a.addListener(s.renderer.$gutter,"mouseout",function(b){w=null,!(!h.isOpen||m)&&(m=setTimeout(function(){m=null,A()},50))},s),s.on("changeSession",A),s.on("input",A)}r.GutterHandler=i;var u=function(c){f(s,c);function s(l){var h=c.call(this,l.container)||this;return h.editor=l,h.visibleTooltipRow,h}return s.prototype.setPosition=function(l,h){var m=window.innerWidth||document.documentElement.clientWidth,w=window.innerHeight||document.documentElement.clientHeight,C=this.getWidth(),A=this.getHeight();l+=15,h+=15,l+C>m&&(l-=l+C-m),h+A>w&&(h-=20+A),d.prototype.setPosition.call(this,l,h)},Object.defineProperty(s,"annotationLabels",{get:function(){return{error:{singular:o("gutter-tooltip.aria-label.error.singular","error"),plural:o("gutter-tooltip.aria-label.error.plural","errors")},security:{singular:o("gutter-tooltip.aria-label.security.singular","security finding"),plural:o("gutter-tooltip.aria-label.security.plural","security findings")},warning:{singular:o("gutter-tooltip.aria-label.warning.singular","warning"),plural:o("gutter-tooltip.aria-label.warning.plural","warnings")},info:{singular:o("gutter-tooltip.aria-label.info.singular","information message"),plural:o("gutter-tooltip.aria-label.info.plural","information messages")},hint:{singular:o("gutter-tooltip.aria-label.hint.singular","suggestion"),plural:o("gutter-tooltip.aria-label.hint.plural","suggestions")}}},enumerable:!1,configurable:!0}),s.prototype.showTooltip=function(l){var h,m=this.editor.renderer.$gutterLayer,w=m.$annotations[l],C;w?C={displayText:Array.from(w.displayText),type:Array.from(w.type)}:C={displayText:[],type:[]};var A=m.session.getFoldLine(l);if(A&&m.$showFoldedAnnotations){for(var E={error:[],security:[],warning:[],info:[],hint:[]},b={error:1,security:2,warning:3,info:4,hint:5},L,_=l+1;_<=A.end.row;_++)if(m.$annotations[_])for(var k=0;k<m.$annotations[_].text.length;k++){var T=m.$annotations[_].type[k];E[T].push(m.$annotations[_].text[k]),(!L||b[T]<b[L])&&(L=T)}if(["error","security","warning"].includes(L)){var O="".concat(s.annotationsToSummaryString(E)," in folded code.");C.displayText.push(O),C.type.push(L+"_fold")}}if(C.displayText.length===0)return this.hideTooltip();for(var $={error:[],security:[],warning:[],info:[],hint:[]},v=m.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",_=0;_<C.displayText.length;_++){var S=y.createElement("span"),x=y.createElement("span");(h=x.classList).add.apply(h,["ace_".concat(C.type[_]),v]),x.setAttribute("aria-label","".concat(s.annotationLabels[C.type[_].replace("_fold","")].singular)),x.setAttribute("role","img"),x.appendChild(y.createTextNode(" ")),S.appendChild(x),S.appendChild(y.createTextNode(C.displayText[_])),S.appendChild(y.createElement("br")),$[C.type[_].replace("_fold","")].push(S)}var M=this.getElement();y.removeChildren(M),$.error.forEach(function(R){return M.appendChild(R)}),$.security.forEach(function(R){return M.appendChild(R)}),$.warning.forEach(function(R){return M.appendChild(R)}),$.info.forEach(function(R){return M.appendChild(R)}),$.hint.forEach(function(R){return M.appendChild(R)}),M.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.visibleTooltipRow=l,this.editor._signal("showGutterTooltip",this)},s.prototype.hideTooltip=function(){this.isOpen&&(this.$element.removeAttribute("aria-live"),this.hide(),this.visibleTooltipRow=void 0,this.editor._signal("hideGutterTooltip",this))},s.annotationsToSummaryString=function(l){var h,m,w=[],C=["error","security","warning","info","hint"];try{for(var A=g(C),E=A.next();!E.done;E=A.next()){var b=E.value;if(l[b].length){var L=l[b].length===1?s.annotationLabels[b].singular:s.annotationLabels[b].plural;w.push("".concat(l[b].length," ").concat(L))}}}catch(_){h={error:_}}finally{try{E&&!E.done&&(m=A.return)&&m.call(A)}finally{if(h)throw h.error}}return w.join(", ")},s}(d);r.GutterTooltip=u}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,r,p){var f=e("../lib/event"),g=e("../lib/useragent"),y=function(){function a(d,o){this.speed,this.wheelX,this.wheelY,this.domEvent=d,this.editor=o,this.x=this.clientX=d.clientX,this.y=this.clientY=d.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return a.prototype.stopPropagation=function(){f.stopPropagation(this.domEvent),this.propagationStopped=!0},a.prototype.preventDefault=function(){f.preventDefault(this.domEvent),this.defaultPrevented=!0},a.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},a.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},a.prototype.getGutterRow=function(){var d=this.getDocumentPosition().row,o=this.editor.session.documentToScreenRow(d,0),i=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return o-i},a.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var d=this.editor,o=d.getSelectionRange();if(o.isEmpty())this.$inSelection=!1;else{var i=this.getDocumentPosition();this.$inSelection=o.contains(i.row,i.column)}return this.$inSelection},a.prototype.getButton=function(){return f.getButton(this.domEvent)},a.prototype.getShiftKey=function(){return this.domEvent.shiftKey},a.prototype.getAccelKey=function(){return g.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},a}();r.MouseEvent=y}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,r,p){var f=e("../lib/dom"),g=e("../lib/event"),y=e("../lib/useragent"),a=200,d=200,o=5;function i(c){var s=c.editor,l=f.createElement("div");l.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",l.textContent="";var h=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];h.forEach(function(F){c[F]=this[F]},this),s.on("mousedown",this.onMouseDown.bind(c));var m=s.container,w,C,A,E,b,L,_=0,k,T,O,$,v;this.onDragStart=function(F){if(this.cancelDrag||!m.draggable){var H=this;return setTimeout(function(){H.startSelect(),H.captureMouse(F)},0),F.preventDefault()}b=s.getSelectionRange();var z=F.dataTransfer;z.effectAllowed=s.getReadOnly()?"copy":"copyMove",s.container.appendChild(l),z.setDragImage&&z.setDragImage(l,0,0),setTimeout(function(){s.container.removeChild(l)}),z.clearData(),z.setData("Text",s.session.getTextRange()),T=!0,this.setState("drag")},this.onDragEnd=function(F){if(m.draggable=!1,T=!1,this.setState(null),!s.getReadOnly()){var H=F.dataTransfer.dropEffect;!k&&H=="move"&&s.session.remove(s.getSelectionRange()),s.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(F){if(!(s.getReadOnly()||!B(F.dataTransfer)))return C=F.clientX,A=F.clientY,w||R(),_++,F.dataTransfer.dropEffect=k=W(F),g.preventDefault(F)},this.onDragOver=function(F){if(!(s.getReadOnly()||!B(F.dataTransfer)))return C=F.clientX,A=F.clientY,w||(R(),_++),D!==null&&(D=null),F.dataTransfer.dropEffect=k=W(F),g.preventDefault(F)},this.onDragLeave=function(F){if(_--,_<=0&&w)return I(),k=null,g.preventDefault(F)},this.onDrop=function(F){if(L){var H=F.dataTransfer;if(T)switch(k){case"move":b.contains(L.row,L.column)?b={start:L,end:L}:b=s.moveText(b,L);break;case"copy":b=s.moveText(b,L,!0);break}else{var z=H.getData("Text");b={start:L,end:s.session.insert(L,z)},s.focus(),k=null}return I(),g.preventDefault(F)}},g.addListener(m,"dragstart",this.onDragStart.bind(c),s),g.addListener(m,"dragend",this.onDragEnd.bind(c),s),g.addListener(m,"dragenter",this.onDragEnter.bind(c),s),g.addListener(m,"dragover",this.onDragOver.bind(c),s),g.addListener(m,"dragleave",this.onDragLeave.bind(c),s),g.addListener(m,"drop",this.onDrop.bind(c),s);function S(F,H){var z=Date.now(),P=!H||F.row!=H.row,U=!H||F.column!=H.column;if(!$||P||U)s.moveCursorToPosition(F),$=z,v={x:C,y:A};else{var G=u(v.x,v.y,C,A);G>o?$=null:z-$>=d&&(s.renderer.scrollCursorIntoView(),$=null)}}function x(F,H){var z=Date.now(),P=s.renderer.layerConfig.lineHeight,U=s.renderer.layerConfig.characterWidth,G=s.renderer.scroller.getBoundingClientRect(),K={x:{left:C-G.left,right:G.right-C},y:{top:A-G.top,bottom:G.bottom-A}},V=Math.min(K.x.left,K.x.right),Y=Math.min(K.y.top,K.y.bottom),q={row:F.row,column:F.column};V/U<=2&&(q.column+=K.x.left<K.x.right?-3:2),Y/P<=1&&(q.row+=K.y.top<K.y.bottom?-1:1);var ee=F.row!=q.row,ne=F.column!=q.column,re=!H||F.row!=H.row;ee||ne&&!re?O?z-O>=a&&s.renderer.scrollCursorIntoView(q):O=z:O=null}function M(){var F=L;L=s.renderer.screenToTextCoordinates(C,A),S(L,F),x(L,F)}function R(){b=s.selection.toOrientedRange(),w=s.session.addMarker(b,"ace_selection",s.getSelectionStyle()),s.clearSelection(),s.isFocused()&&s.renderer.$cursorLayer.setBlinking(!1),clearInterval(E),M(),E=setInterval(M,20),_=0,g.addListener(document,"mousemove",N)}function I(){clearInterval(E),s.session.removeMarker(w),w=null,s.selection.fromOrientedRange(b),s.isFocused()&&!T&&s.$resetCursorStyle(),b=null,L=null,_=0,O=null,$=null,g.removeListener(document,"mousemove",N)}var D=null;function N(){D==null&&(D=setTimeout(function(){D!=null&&w&&I()},20))}function B(F){var H=F.types;return!H||Array.prototype.some.call(H,function(z){return z=="text/plain"||z=="Text"})}function W(F){var H=["copy","copymove","all","uninitialized"],z=["move","copymove","linkmove","all","uninitialized"],P=y.isMac?F.altKey:F.ctrlKey,U="uninitialized";try{U=F.dataTransfer.effectAllowed.toLowerCase()}catch{}var G="none";return P&&H.indexOf(U)>=0?G="copy":z.indexOf(U)>=0?G="move":H.indexOf(U)>=0&&(G="copy"),G}}(function(){this.dragWait=function(){var c=Date.now()-this.mousedownEvent.time;c>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var c=this.editor.container;c.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(c){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var c=this.editor,s=c.container;s.draggable=!0,c.renderer.$cursorLayer.setBlinking(!1),c.setStyle("ace_dragging");var l=y.isWin?"default":"move";c.renderer.setCursorStyle(l),this.setState("dragReady")},this.onMouseDrag=function(c){var s=this.editor.container;if(y.isIE&&this.state=="dragReady"){var l=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);l>3&&s.dragDrop()}if(this.state==="dragWait"){var l=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);l>0&&(s.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(c){if(this.$dragEnabled){this.mousedownEvent=c;var s=this.editor,l=c.inSelection(),h=c.getButton(),m=c.domEvent.detail||1;if(m===1&&h===0&&l){if(c.editor.inMultiSelectMode&&(c.getAccelKey()||c.getShiftKey()))return;this.mousedownEvent.time=Date.now();var w=c.domEvent.target||c.domEvent.srcElement;if("unselectable"in w&&(w.unselectable="on"),s.getDragDelay()){if(y.isWebKit){this.cancelDrag=!0;var C=s.container;C.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(c,this.onMouseDrag.bind(this)),c.defaultPrevented=!0}}}}).call(i.prototype);function u(c,s,l,h){return Math.sqrt(Math.pow(l-c,2)+Math.pow(h-s,2))}r.DragdropHandler=i}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,r,p){var f=e("./mouse_event").MouseEvent,g=e("../lib/event"),y=e("../lib/dom");r.addTouchListeners=function(a,d){var o="scroll",i,u,c,s,l,h,m=0,w,C=0,A=0,E=0,b,L;function _(){var S=window.navigator&&window.navigator.clipboard,x=!1,M=function(){var D=d.getCopyText(),N=d.session.getUndoManager().hasUndo();L.replaceChild(y.buildDom(x?["span",!D&&R("selectall")&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],D&&R("copy")&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],D&&R("cut")&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],S&&R("paste")&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],N&&R("undo")&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],R("find")&&["span",{class:"ace_mobile-button",action:"find"},"Find"],R("openCommandPalette")&&["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),L.firstChild)},R=function(D){return d.commands.canExecute(D,d)},I=function(D){var N=D.target.getAttribute("action");if(N=="more"||!x)return x=!x,M();N=="paste"?S.readText().then(function(B){d.execCommand(N,B)}):N&&((N=="cut"||N=="copy")&&(S?S.writeText(d.getCopyText()):document.execCommand("copy")),d.execCommand(N)),L.firstChild.style.display="none",x=!1,N!="openCommandPalette"&&d.focus()};L=y.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(D){o="menu",D.stopPropagation(),D.preventDefault(),d.textInput.focus()},ontouchend:function(D){D.stopPropagation(),D.preventDefault(),I(D)},onclick:I},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],d.container)}function k(){if(!d.getOption("enableMobileMenu")){L&&T();return}L||_();var S=d.selection.cursor,x=d.renderer.textToScreenCoordinates(S.row,S.column),M=d.renderer.textToScreenCoordinates(0,0).pageX,R=d.renderer.scrollLeft,I=d.container.getBoundingClientRect();L.style.top=x.pageY-I.top-3+"px",x.pageX-I.left<I.width-70?(L.style.left="",L.style.right="10px"):(L.style.right="",L.style.left=M+R-I.left+"px"),L.style.display="",L.firstChild.style.display="none",d.on("input",T)}function T(S){L&&(L.style.display="none"),d.off("input",T)}function O(){l=null,clearTimeout(l);var S=d.selection.getRange(),x=S.contains(w.row,w.column);(S.isEmpty()||!x)&&(d.selection.moveToPosition(w),d.selection.selectWord()),o="wait",k()}function $(){l=null,clearTimeout(l),d.selection.moveToPosition(w);var S=C>=2?d.selection.getLineRange(w.row):d.session.getBracketRange(w);S&&!S.isEmpty()?d.selection.setRange(S):d.selection.selectWord(),o="wait"}g.addListener(a,"contextmenu",function(S){if(b){var x=d.textInput.getElement();x.focus()}},d),g.addListener(a,"touchstart",function(S){var x=S.touches;if(l||x.length>1){clearTimeout(l),l=null,c=-1,o="zoom";return}b=d.$mouseHandler.isMousePressed=!0;var M=d.renderer.layerConfig.lineHeight,R=d.renderer.layerConfig.lineHeight,I=S.timeStamp;s=I;var D=x[0],N=D.clientX,B=D.clientY;Math.abs(i-N)+Math.abs(u-B)>M&&(c=-1),i=S.clientX=N,u=S.clientY=B,A=E=0;var W=new f(S,d);if(w=W.getDocumentPosition(),I-c<500&&x.length==1&&!m)C++,S.preventDefault(),S.button=0,$();else{C=0;var F=d.selection.cursor,H=d.selection.isEmpty()?F:d.selection.anchor,z=d.renderer.$cursorLayer.getPixelPosition(F,!0),P=d.renderer.$cursorLayer.getPixelPosition(H,!0),U=d.renderer.scroller.getBoundingClientRect(),G=d.renderer.layerConfig.offset,K=d.renderer.scrollLeft,V=function(ee,ne){return ee=ee/R,ne=ne/M-.75,ee*ee+ne*ne};if(S.clientX<U.left){o="zoom";return}var Y=V(S.clientX-U.left-z.left+K,S.clientY-U.top-z.top+G),q=V(S.clientX-U.left-P.left+K,S.clientY-U.top-P.top+G);Y<3.5&&q<3.5&&(o=Y>q?"cursor":"anchor"),q<3.5?o="anchor":Y<3.5?o="cursor":o="scroll",l=setTimeout(O,450)}c=I},d),g.addListener(a,"touchend",function(S){b=d.$mouseHandler.isMousePressed=!1,h&&clearInterval(h),o=="zoom"?(o="",m=0):l?(d.selection.moveToPosition(w),m=0,k()):o=="scroll"?(v(),T()):k(),clearTimeout(l),l=null},d),g.addListener(a,"touchmove",function(S){l&&(clearTimeout(l),l=null);var x=S.touches;if(!(x.length>1||o=="zoom")){var M=x[0],R=i-M.clientX,I=u-M.clientY;if(o=="wait")if(R*R+I*I>4)o="cursor";else return S.preventDefault();i=M.clientX,u=M.clientY,S.clientX=M.clientX,S.clientY=M.clientY;var D=S.timeStamp,N=D-s;if(s=D,o=="scroll"){var B=new f(S,d);B.speed=1,B.wheelX=R,B.wheelY=I,10*Math.abs(R)<Math.abs(I)&&(R=0),10*Math.abs(I)<Math.abs(R)&&(I=0),N!=0&&(A=R/N,E=I/N),d._emit("mousewheel",B),B.propagationStopped||(A=E=0)}else{var W=new f(S,d),F=W.getDocumentPosition();o=="cursor"?d.selection.moveCursorToPosition(F):o=="anchor"&&d.selection.setSelectionAnchor(F.row,F.column),d.renderer.scrollCursorIntoView(F),S.preventDefault()}}},d);function v(){m+=60,h=setInterval(function(){m--<=0&&(clearInterval(h),h=null),Math.abs(A)<.01&&(A=0),Math.abs(E)<.01&&(E=0),m<20&&(A=.9*A),m<20&&(E=.9*E);var S=d.session.getScrollTop();d.renderer.scrollBy(10*A,10*E),S==d.session.getScrollTop()&&(m=0)},10)}}}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,r,p){var f=e("../lib/event"),g=e("../lib/useragent"),y=e("./default_handlers").DefaultHandlers,a=e("./default_gutter_handler").GutterHandler,d=e("./mouse_event").MouseEvent,o=e("./dragdrop_handler").DragdropHandler,i=e("./touch_handler").addTouchListeners,u=e("../config"),c=function(){function s(l){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var h=this;this.editor=l,new y(this),new a(this),new o(this);var m=function(A){var E=!document.hasFocus||!document.hasFocus()||!l.isFocused()&&document.activeElement==(l.textInput&&l.textInput.getElement());E&&window.focus(),l.focus(),setTimeout(function(){l.isFocused()||l.focus()})},w=l.renderer.getMouseEventTarget();f.addListener(w,"click",this.onMouseEvent.bind(this,"click"),l),f.addListener(w,"mousemove",this.onMouseMove.bind(this,"mousemove"),l),f.addMultiMouseDownListener([w,l.renderer.scrollBarV&&l.renderer.scrollBarV.inner,l.renderer.scrollBarH&&l.renderer.scrollBarH.inner,l.textInput&&l.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",l),f.addMouseWheelListener(l.container,this.onMouseWheel.bind(this,"mousewheel"),l),i(l.container,l);var C=l.renderer.$gutter;f.addListener(C,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),l),f.addListener(C,"click",this.onMouseEvent.bind(this,"gutterclick"),l),f.addListener(C,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),l),f.addListener(C,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),l),f.addListener(w,"mousedown",m,l),f.addListener(C,"mousedown",m,l),g.isIE&&l.renderer.scrollBarV&&(f.addListener(l.renderer.scrollBarV.element,"mousedown",m,l),f.addListener(l.renderer.scrollBarH.element,"mousedown",m,l)),l.on("mousemove",function(A){if(!(h.state||h.$dragDelay||!h.$dragEnabled)){var E=l.renderer.screenToTextCoordinates(A.x,A.y),b=l.session.selection.getRange(),L=l.renderer;!b.isEmpty()&&b.insideStart(E.row,E.column)?L.setCursorStyle("default"):L.setCursorStyle("")}},l)}return s.prototype.onMouseEvent=function(l,h){this.editor.session&&this.editor._emit(l,new d(h,this.editor))},s.prototype.onMouseMove=function(l,h){var m=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!m||!m.length||this.editor._emit(l,new d(h,this.editor))},s.prototype.onMouseWheel=function(l,h){var m=new d(h,this.editor);m.speed=this.$scrollSpeed*2,m.wheelX=h.wheelX,m.wheelY=h.wheelY,this.editor._emit(l,m)},s.prototype.setState=function(l){this.state=l},s.prototype.captureMouse=function(l,h){this.x=l.x,this.y=l.y,this.isMousePressed=!0;var m=this.editor,w=this.editor.renderer;w.$isMousePressed=!0;var C=this,A=function(k){if(k){if(g.isWebKit&&!k.which&&C.releaseMouse)return C.releaseMouse();C.x=k.clientX,C.y=k.clientY,h&&h(k),C.mouseEvent=new d(k,C.editor),C.$mouseMoved=!0}},E=function(k){m.off("beforeEndOperation",L),clearInterval(_),m.session&&b(),C[C.state+"End"]&&C[C.state+"End"](k),C.state="",C.isMousePressed=w.$isMousePressed=!1,w.$keepTextAreaAtCursor&&w.$moveTextAreaToCursor(),C.$onCaptureMouseMove=C.releaseMouse=null,k&&C.onMouseEvent("mouseup",k),m.endOperation()},b=function(){C[C.state]&&C[C.state](),C.$mouseMoved=!1};if(g.isOldIE&&l.domEvent.type=="dblclick")return setTimeout(function(){E(l)});var L=function(k){C.releaseMouse&&m.curOp.command.name&&m.curOp.selectionChanged&&(C[C.state+"End"]&&C[C.state+"End"](),C.state="",C.releaseMouse())};m.on("beforeEndOperation",L),m.startOperation({command:{name:"mouse"}}),C.$onCaptureMouseMove=A,C.releaseMouse=f.capture(this.editor.container,A,E);var _=setInterval(b,20)},s.prototype.cancelContextMenu=function(){var l=(function(h){h&&h.domEvent&&h.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",l),h&&h.domEvent&&f.stopEvent(h.domEvent))}).bind(this);setTimeout(l,10),this.editor.on("nativecontextmenu",l)},s.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},s}();c.prototype.releaseMouse=null,u.defineOptions(c.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:g.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),r.MouseHandler=c}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,r,p){var f=e("../lib/dom"),g=function(){function y(a){a.on("click",function(d){var o=d.getDocumentPosition(),i=a.session,u=i.getFoldAt(o.row,o.column,1);u&&(d.getAccelKey()?i.removeFold(u):i.expandFold(u),d.stop());var c=d.domEvent&&d.domEvent.target;c&&f.hasCssClass(c,"ace_inline_button")&&f.hasCssClass(c,"ace_toggle_wrap")&&(i.setOption("wrap",!i.getUseWrapMode()),a.renderer.scrollCursorIntoView())}),a.on("gutterclick",function(d){var o=a.renderer.$gutterLayer.getRegion(d);if(o=="foldWidgets"){var i=d.getDocumentPosition().row,u=a.session;u.foldWidgets&&u.foldWidgets[i]&&a.session.onFoldWidgetClick(i,d),a.isFocused()||a.focus(),d.stop()}}),a.on("gutterdblclick",function(d){var o=a.renderer.$gutterLayer.getRegion(d);if(o=="foldWidgets"){var i=d.getDocumentPosition().row,u=a.session,c=u.getParentFoldRangeData(i,!0),s=c.range||c.firstRange;if(s){i=s.start.row;var l=u.getFoldAt(i,u.getLine(i).length,1);l?u.removeFold(l):(u.addFold("...",s),a.renderer.scrollCursorIntoView({row:s.start.row,column:0}))}d.stop()}})}return y}();r.FoldHandler=g}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,r,p){var f=e("../lib/keys"),g=e("../lib/event"),y=function(){function a(d){this.$editor=d,this.$data={editor:d},this.$handlers=[],this.setDefaultHandler(d.commands)}return a.prototype.setDefaultHandler=function(d){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=d,this.addKeyboardHandler(d,0)},a.prototype.setKeyboardHandler=function(d){var o=this.$handlers;if(o[o.length-1]!=d){for(;o[o.length-1]&&o[o.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(o[o.length-1]);this.addKeyboardHandler(d,1)}},a.prototype.addKeyboardHandler=function(d,o){if(d){typeof d=="function"&&!d.handleKeyboard&&(d.handleKeyboard=d);var i=this.$handlers.indexOf(d);i!=-1&&this.$handlers.splice(i,1),o==null?this.$handlers.push(d):this.$handlers.splice(o,0,d),i==-1&&d.attach&&d.attach(this.$editor)}},a.prototype.removeKeyboardHandler=function(d){var o=this.$handlers.indexOf(d);return o==-1?!1:(this.$handlers.splice(o,1),d.detach&&d.detach(this.$editor),!0)},a.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},a.prototype.getStatusText=function(){var d=this.$data,o=d.editor;return this.$handlers.map(function(i){return i.getStatusText&&i.getStatusText(o,d)||""}).filter(Boolean).join(" ")},a.prototype.$callKeyboardHandlers=function(d,o,i,u){for(var c,s=!1,l=this.$editor.commands,h=this.$handlers.length;h--&&(c=this.$handlers[h].handleKeyboard(this.$data,d,o,i,u),!(!(!c||!c.command)&&(c.command=="null"?s=!0:s=l.exec(c.command,this.$editor,c.args,u),s&&u&&d!=-1&&c.passEvent!=!0&&c.command.passEvent!=!0&&g.stopEvent(u),s))););return!s&&d==-1&&(c={command:"insertstring"},s=l.exec("insertstring",this.$editor,o)),s&&this.$editor._signal&&this.$editor._signal("keyboardActivity",c),s},a.prototype.onCommandKey=function(d,o,i){var u=f.keyCodeToString(i);return this.$callKeyboardHandlers(o,u,i,d)},a.prototype.onTextInput=function(d){return this.$callKeyboardHandlers(-1,d)},a}();r.KeyBinding=y}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,r,p){var f=0,g=0,y=!1,a=!1,d=!1,o=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],i=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],u=0,c=1,s=0,l=1,h=2,m=3,w=4,C=5,A=6,E=7,b=8,L=9,_=10,k=11,T=12,O=13,$=14,v=15,S=16,x=17,M=18,R=[M,M,M,M,M,M,M,M,M,A,C,A,b,C,M,M,M,M,M,M,M,M,M,M,M,M,M,M,C,C,C,A,b,w,w,k,k,k,w,w,w,w,w,_,L,_,L,L,h,h,h,h,h,h,h,h,h,h,L,w,w,w,w,w,w,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,w,w,w,w,w,w,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,w,w,w,w,M,M,M,M,M,M,C,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,L,w,k,k,k,k,w,w,w,w,s,w,w,M,w,w,k,k,h,h,w,s,w,w,w,h,s,w,w,w,w,w],I=[b,b,b,b,b,b,b,b,b,b,b,M,M,M,s,l,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,b,C,O,$,v,S,x,L,k,k,k,k,k,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,L,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,b];function D(F,H,z,P){var U=f?i:o,G=null,K=null,V=null,Y=0,q=null,ee=null,ne=-1,re=null,me=null,vt=[];if(!P)for(re=0,P=[];re<z;re++)P[re]=W(F[re]);for(g=f,y=!1,a=!1,d=!1,me=0;me<z;me++){if(G=Y,vt[me]=K=B(F,P,vt,me),Y=U[G][K],q=Y&240,Y&=15,H[me]=V=U[Y][5],q>0)if(q==16){for(re=ne;re<me;re++)H[re]=1;ne=-1}else ne=-1;if(ee=U[Y][6],ee)ne==-1&&(ne=me);else if(ne>-1){for(re=ne;re<me;re++)H[re]=V;ne=-1}P[me]==C&&(H[me]=0),g|=V}if(d){for(re=0;re<z;re++)if(P[re]==A){H[re]=f;for(var yt=re-1;yt>=0&&P[yt]==b;yt--)H[yt]=f}}}function N(F,H,z){if(!(g<F)){if(F==1&&f==c&&!a){z.reverse();return}for(var P=z.length,U=0,G,K,V,Y;U<P;){if(H[U]>=F){for(G=U+1;G<P&&H[G]>=F;)G++;for(K=U,V=G-1;K<V;K++,V--)Y=z[K],z[K]=z[V],z[V]=Y;U=G}U++}}}function B(F,H,z,P){var U=H[P],G,K,V,Y;switch(U){case s:case l:y=!1;case w:case m:return U;case h:return y?m:h;case E:return y=!0,l;case b:return w;case L:return P<1||P+1>=H.length||(G=z[P-1])!=h&&G!=m||(K=H[P+1])!=h&&K!=m?w:(y&&(K=m),K==G?K:w);case _:return G=P>0?z[P-1]:C,G==h&&P+1<H.length&&H[P+1]==h?h:w;case k:if(P>0&&z[P-1]==h)return h;if(y)return w;for(Y=P+1,V=H.length;Y<V&&H[Y]==k;)Y++;return Y<V&&H[Y]==h?h:w;case T:for(V=H.length,Y=P+1;Y<V&&H[Y]==T;)Y++;if(Y<V){var q=F[P],ee=q>=1425&&q<=2303||q==64286;if(G=H[Y],ee&&(G==l||G==E))return l}return P<1||(G=H[P-1])==C?w:z[P-1];case C:return y=!1,a=!0,f;case A:return d=!0,w;case O:case $:case S:case x:case v:y=!1;case M:return w}}function W(F){var H=F.charCodeAt(0),z=H>>8;return z==0?H>191?s:R[H]:z==5?/[\u0591-\u05f4]/.test(F)?l:s:z==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(F)?T:/[\u0660-\u0669\u066b-\u066c]/.test(F)?m:H==1642?k:/[\u06f0-\u06f9]/.test(F)?h:E:z==32&&H<=8287?I[H&255]:z==254&&H>=65136?E:w}r.L=s,r.R=l,r.EN=h,r.ON_R=3,r.AN=4,r.R_H=5,r.B=6,r.RLE=7,r.DOT="",r.doBidiReorder=function(F,H,z){if(F.length<2)return{};var P=F.split(""),U=new Array(P.length),G=new Array(P.length),K=[];f=z?c:u,D(P,K,P.length,H);for(var V=0;V<U.length;U[V]=V,V++);N(2,K,U),N(1,K,U);for(var V=0;V<U.length-1;V++)H[V]===m?K[V]=r.AN:K[V]===l&&(H[V]>E&&H[V]<O||H[V]===w||H[V]===M)?K[V]=r.ON_R:V>0&&P[V-1]===""&&/\u0622|\u0623|\u0625|\u0627/.test(P[V])&&(K[V-1]=K[V]=r.R_H,V++);P[P.length-1]===r.DOT&&(K[P.length-1]=r.B),P[0]===""&&(K[0]=r.RLE);for(var V=0;V<U.length;V++)G[V]=K[U[V]];return{logicalFromVisual:U,bidiLevels:G}},r.hasBidiCharacters=function(F,H){for(var z=!1,P=0;P<F.length;P++)H[P]=W(F.charAt(P)),!z&&(H[P]==l||H[P]==E||H[P]==m)&&(z=!0);return z},r.getVisualFromLogicalIdx=function(F,H){for(var z=0;z<H.logicalFromVisual.length;z++)if(H.logicalFromVisual[z]==F)return z;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,r,p){var f=e("./lib/bidiutil"),g=e("./lib/lang"),y=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,a=function(){function d(o){this.session=o,this.bidiMap={},this.currentRow=null,this.bidiUtil=f,this.charWidths=[],this.EOL="",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="",this.RLE="",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=y.test(o.getValue())}return d.prototype.isBidiRow=function(o,i,u){return this.seenBidi?(o!==this.currentRow&&(this.currentRow=o,this.updateRowLine(i,u),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},d.prototype.onChange=function(o){this.seenBidi?this.currentRow=null:o.action=="insert"&&y.test(o.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},d.prototype.getDocumentRow=function(){var o=0,i=this.session.$screenRowCache;if(i.length){var u=this.session.$getRowCacheIndex(i,this.currentRow);u>=0&&(o=this.session.$docRowCache[u])}return o},d.prototype.getSplitIndex=function(){var o=0,i=this.session.$screenRowCache;if(i.length)for(var u,c=this.session.$getRowCacheIndex(i,this.currentRow);this.currentRow-o>0&&(u=this.session.$getRowCacheIndex(i,this.currentRow-o-1),u===c);)c=u,o++;else o=this.currentRow;return o},d.prototype.updateRowLine=function(o,i){o===void 0&&(o=this.getDocumentRow());var u=o===this.session.getLength()-1,c=u?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(o),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var s=this.session.$wrapData[o];s&&(i===void 0&&(i=this.getSplitIndex()),i>0&&s.length?(this.wrapIndent=s.indent,this.wrapOffset=this.wrapIndent*this.charWidths[f.L],this.line=i<s.length?this.line.substring(s[i-1],s[i]):this.line.substring(s[s.length-1])):this.line=this.line.substring(0,s[i]),i==s.length&&(this.line+=this.showInvisibles?c:f.DOT))}else this.line+=this.showInvisibles?c:f.DOT;var l=this.session,h=0,m;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(w,C){return w==="	"||l.isFullWidth(w.charCodeAt(0))?(m=w==="	"?l.getScreenTabSize(C+h):2,h+=m-1,g.stringRepeat(f.DOT,m)):w}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==f.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},d.prototype.updateBidiMap=function(){var o=[];f.hasBidiCharacters(this.line,o)||this.isRtlDir?this.bidiMap=f.doBidiReorder(this.line,o,this.isRtlDir):this.bidiMap={}},d.prototype.markAsDirty=function(){this.currentRow=null},d.prototype.updateCharacterWidths=function(o){if(this.characterWidth!==o.$characterSize.width){this.fontMetrics=o;var i=this.characterWidth=o.$characterSize.width,u=o.$measureCharWidth("");this.charWidths[f.L]=this.charWidths[f.EN]=this.charWidths[f.ON_R]=i,this.charWidths[f.R]=this.charWidths[f.AN]=u,this.charWidths[f.R_H]=u*.45,this.charWidths[f.B]=this.charWidths[f.RLE]=0,this.currentRow=null}},d.prototype.setShowInvisibles=function(o){this.showInvisibles=o,this.currentRow=null},d.prototype.setEolChar=function(o){this.EOL=o},d.prototype.setContentWidth=function(o){this.contentWidth=o},d.prototype.isRtlLine=function(o){return this.$isRtl?!0:o!=null?this.session.getLine(o).charAt(0)==this.RLE:this.isRtlDir},d.prototype.setRtlDirection=function(o,i){for(var u=o.getCursorPosition(),c=o.selection.getSelectionAnchor().row;c<=u.row;c++)!i&&o.session.getLine(c).charAt(0)===o.session.$bidiHandler.RLE?o.session.doc.removeInLine(c,0,1):i&&o.session.getLine(c).charAt(0)!==o.session.$bidiHandler.RLE&&o.session.doc.insert({column:0,row:c},o.session.$bidiHandler.RLE)},d.prototype.getPosLeft=function(o){o-=this.wrapIndent;var i=this.line.charAt(0)===this.RLE?1:0,u=o>i?this.session.getOverwrite()?o:o-1:i,c=f.getVisualFromLogicalIdx(u,this.bidiMap),s=this.bidiMap.bidiLevels,l=0;!this.session.getOverwrite()&&o<=i&&s[c]%2!==0&&c++;for(var h=0;h<c;h++)l+=this.charWidths[s[h]];return!this.session.getOverwrite()&&o>i&&s[c]%2===0&&(l+=this.charWidths[s[c]]),this.wrapIndent&&(l+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(l+=this.rtlLineOffset),l},d.prototype.getSelections=function(o,i){var u=this.bidiMap,c=u.bidiLevels,s,l=[],h=0,m=Math.min(o,i)-this.wrapIndent,w=Math.max(o,i)-this.wrapIndent,C=!1,A=!1,E=0;this.wrapIndent&&(h+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var b,L=0;L<c.length;L++)b=u.logicalFromVisual[L],s=c[L],C=b>=m&&b<w,C&&!A?E=h:!C&&A&&l.push({left:E,width:h-E}),h+=this.charWidths[s],A=C;if(C&&L===c.length&&l.push({left:E,width:h-E}),this.isRtlDir)for(var _=0;_<l.length;_++)l[_].left+=this.rtlLineOffset;return l},d.prototype.offsetToCol=function(u){this.isRtlDir&&(u-=this.rtlLineOffset);var i=0,u=Math.max(u,0),c=0,s=0,l=this.bidiMap.bidiLevels,h=this.charWidths[l[s]];for(this.wrapIndent&&(u-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);u>c+h/2;){if(c+=h,s===l.length-1){h=0;break}h=this.charWidths[l[++s]]}return s>0&&l[s-1]%2!==0&&l[s]%2===0?(u<c&&s--,i=this.bidiMap.logicalFromVisual[s]):s>0&&l[s-1]%2===0&&l[s]%2!==0?i=1+(u>c?this.bidiMap.logicalFromVisual[s]:this.bidiMap.logicalFromVisual[s-1]):this.isRtlDir&&s===l.length-1&&h===0&&l[s-1]%2===0||!this.isRtlDir&&s===0&&l[s]%2!==0?i=1+this.bidiMap.logicalFromVisual[s]:(s>0&&l[s-1]%2!==0&&h!==0&&s--,i=this.bidiMap.logicalFromVisual[s]),i===0&&this.isRtlDir&&i++,i+this.wrapIndent},d}();r.BidiHandler=a}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,r,p){var f=e("./lib/oop"),g=e("./lib/lang"),y=e("./lib/event_emitter").EventEmitter,a=e("./range").Range,d=function(){function o(i){this.session=i,this.doc=i.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var u=this;this.cursor.on("change",function(c){u.$cursorChanged=!0,u.$silent||u._emit("changeCursor"),!u.$isEmpty&&!u.$silent&&u._emit("changeSelection"),!u.$keepDesiredColumnOnChange&&c.old.column!=c.value.column&&(u.$desiredColumn=null)}),this.anchor.on("change",function(){u.$anchorChanged=!0,!u.$isEmpty&&!u.$silent&&u._emit("changeSelection")})}return o.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},o.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},o.prototype.getCursor=function(){return this.lead.getPosition()},o.prototype.setAnchor=function(i,u){this.$isEmpty=!1,this.anchor.setPosition(i,u)},o.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},o.prototype.getSelectionLead=function(){return this.lead.getPosition()},o.prototype.isBackwards=function(){var i=this.anchor,u=this.lead;return i.row>u.row||i.row==u.row&&i.column>u.column},o.prototype.getRange=function(){var i=this.anchor,u=this.lead;return this.$isEmpty?a.fromPoints(u,u):this.isBackwards()?a.fromPoints(u,i):a.fromPoints(i,u)},o.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},o.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},o.prototype.setRange=function(i,u){var c=u?i.end:i.start,s=u?i.start:i.end;this.$setSelection(c.row,c.column,s.row,s.column)},o.prototype.$setSelection=function(i,u,c,s){if(!this.$silent){var l=this.$isEmpty,h=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(i,u),this.cursor.setPosition(c,s),this.$isEmpty=!a.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||l!=this.$isEmpty||h)&&this._emit("changeSelection")}},o.prototype.$moveSelection=function(i){var u=this.lead;this.$isEmpty&&this.setSelectionAnchor(u.row,u.column),i.call(this)},o.prototype.selectTo=function(i,u){this.$moveSelection(function(){this.moveCursorTo(i,u)})},o.prototype.selectToPosition=function(i){this.$moveSelection(function(){this.moveCursorToPosition(i)})},o.prototype.moveTo=function(i,u){this.clearSelection(),this.moveCursorTo(i,u)},o.prototype.moveToPosition=function(i){this.clearSelection(),this.moveCursorToPosition(i)},o.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},o.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},o.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},o.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},o.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},o.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},o.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},o.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},o.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},o.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},o.prototype.getWordRange=function(i,u){if(typeof u>"u"){var c=i||this.lead;i=c.row,u=c.column}return this.session.getWordRange(i,u)},o.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},o.prototype.selectAWord=function(){var i=this.getCursor(),u=this.session.getAWordRange(i.row,i.column);this.setSelectionRange(u)},o.prototype.getLineRange=function(i,u){var c=typeof i=="number"?i:this.lead.row,s,l=this.session.getFoldLine(c);return l?(c=l.start.row,s=l.end.row):s=c,u===!0?new a(c,0,s,this.session.getLine(s).length):new a(c,0,s+1,0)},o.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},o.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},o.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},o.prototype.wouldMoveIntoSoftTab=function(i,u,c){var s=i.column,l=i.column+u;return c<0&&(s=i.column-u,l=i.column),this.session.isTabStop(i)&&this.doc.getLine(i.row).slice(s,l).split(" ").length-1==u},o.prototype.moveCursorLeft=function(){var i=this.lead.getPosition(),u;if(u=this.session.getFoldAt(i.row,i.column,-1))this.moveCursorTo(u.start.row,u.start.column);else if(i.column===0)i.row>0&&this.moveCursorTo(i.row-1,this.doc.getLine(i.row-1).length);else{var c=this.session.getTabSize();this.wouldMoveIntoSoftTab(i,c,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-c):this.moveCursorBy(0,-1)}},o.prototype.moveCursorRight=function(){var i=this.lead.getPosition(),u;if(u=this.session.getFoldAt(i.row,i.column,1))this.moveCursorTo(u.end.row,u.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var c=this.session.getTabSize(),i=this.lead;this.wouldMoveIntoSoftTab(i,c,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,c):this.moveCursorBy(0,1)}},o.prototype.moveCursorLineStart=function(){var i=this.lead.row,u=this.lead.column,c=this.session.documentToScreenRow(i,u),s=this.session.screenToDocumentPosition(c,0),l=this.session.getDisplayLine(i,null,s.row,s.column),h=l.match(/^\s*/);h[0].length!=u&&!this.session.$useEmacsStyleLineStart&&(s.column+=h[0].length),this.moveCursorToPosition(s)},o.prototype.moveCursorLineEnd=function(){var i=this.lead,u=this.session.getDocumentLastRowColumnPosition(i.row,i.column);if(this.lead.column==u.column){var c=this.session.getLine(u.row);if(u.column==c.length){var s=c.search(/\s+$/);s>0&&(u.column=s)}}this.moveCursorTo(u.row,u.column)},o.prototype.moveCursorFileEnd=function(){var i=this.doc.getLength()-1,u=this.doc.getLine(i).length;this.moveCursorTo(i,u)},o.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},o.prototype.moveCursorLongWordRight=function(){var i=this.lead.row,u=this.lead.column,c=this.doc.getLine(i),s=c.substring(u);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var l=this.session.getFoldAt(i,u,1);if(l){this.moveCursorTo(l.end.row,l.end.column);return}if(this.session.nonTokenRe.exec(s)&&(u+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,s=c.substring(u)),u>=c.length){this.moveCursorTo(i,c.length),this.moveCursorRight(),i<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(s)&&(u+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,u)},o.prototype.moveCursorLongWordLeft=function(){var i=this.lead.row,u=this.lead.column,c;if(c=this.session.getFoldAt(i,u,-1)){this.moveCursorTo(c.start.row,c.start.column);return}var s=this.session.getFoldStringAt(i,u,-1);s==null&&(s=this.doc.getLine(i).substring(0,u));var l=g.stringReverse(s);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(l)&&(u-=this.session.nonTokenRe.lastIndex,l=l.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),u<=0){this.moveCursorTo(i,0),this.moveCursorLeft(),i>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(l)&&(u-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(i,u)},o.prototype.$shortWordEndIndex=function(i){var u=0,c,s=/\s/,l=this.session.tokenRe;if(l.lastIndex=0,this.session.tokenRe.exec(i))u=this.session.tokenRe.lastIndex;else{for(;(c=i[u])&&s.test(c);)u++;if(u<1){for(l.lastIndex=0;(c=i[u])&&!l.test(c);)if(l.lastIndex=0,u++,s.test(c))if(u>2){u--;break}else{for(;(c=i[u])&&s.test(c);)u++;if(u>2)break}}}return l.lastIndex=0,u},o.prototype.moveCursorShortWordRight=function(){var i=this.lead.row,u=this.lead.column,c=this.doc.getLine(i),s=c.substring(u),l=this.session.getFoldAt(i,u,1);if(l)return this.moveCursorTo(l.end.row,l.end.column);if(u==c.length){var h=this.doc.getLength();do i++,s=this.doc.getLine(i);while(i<h&&/^\s*$/.test(s));/^\s+/.test(s)||(s=""),u=0}var m=this.$shortWordEndIndex(s);this.moveCursorTo(i,u+m)},o.prototype.moveCursorShortWordLeft=function(){var i=this.lead.row,u=this.lead.column,c;if(c=this.session.getFoldAt(i,u,-1))return this.moveCursorTo(c.start.row,c.start.column);var s=this.session.getLine(i).substring(0,u);if(u===0){do i--,s=this.doc.getLine(i);while(i>0&&/^\s*$/.test(s));u=s.length,/\s+$/.test(s)||(s="")}var l=g.stringReverse(s),h=this.$shortWordEndIndex(l);return this.moveCursorTo(i,u-h)},o.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},o.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},o.prototype.moveCursorBy=function(i,u){var c=this.session.documentToScreenPosition(this.lead.row,this.lead.column),s;if(u===0&&(i!==0&&(this.session.$bidiHandler.isBidiRow(c.row,this.lead.row)?(s=this.session.$bidiHandler.getPosLeft(c.column),c.column=Math.round(s/this.session.$bidiHandler.charWidths[0])):s=c.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?c.column=this.$desiredColumn:this.$desiredColumn=c.column),i!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var l=this.session.lineWidgets[this.lead.row];i<0?i-=l.rowsAbove||0:i>0&&(i+=l.rowCount-(l.rowsAbove||0))}var h=this.session.screenToDocumentPosition(c.row+i,c.column,s);i!==0&&u===0&&h.row===this.lead.row&&(h.column,this.lead.column),this.moveCursorTo(h.row,h.column+u,u===0)},o.prototype.moveCursorToPosition=function(i){this.moveCursorTo(i.row,i.column)},o.prototype.moveCursorTo=function(i,u,c){var s=this.session.getFoldAt(i,u,1);s&&(i=s.start.row,u=s.start.column),this.$keepDesiredColumnOnChange=!0;var l=this.session.getLine(i);/[\uDC00-\uDFFF]/.test(l.charAt(u))&&l.charAt(u-1)&&(this.lead.row==i&&this.lead.column==u+1?u=u-1:u=u+1),this.lead.setPosition(i,u),this.$keepDesiredColumnOnChange=!1,c||(this.$desiredColumn=null)},o.prototype.moveCursorToScreen=function(i,u,c){var s=this.session.screenToDocumentPosition(i,u);this.moveCursorTo(s.row,s.column,c)},o.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},o.prototype.fromOrientedRange=function(i){this.setSelectionRange(i,i.cursor==i.start),this.$desiredColumn=i.desiredColumn||this.$desiredColumn},o.prototype.toOrientedRange=function(i){var u=this.getRange();return i?(i.start.column=u.start.column,i.start.row=u.start.row,i.end.column=u.end.column,i.end.row=u.end.row):i=u,i.cursor=this.isBackwards()?i.start:i.end,i.desiredColumn=this.$desiredColumn,i},o.prototype.getRangeOfMovements=function(i){var u=this.getCursor();try{i(this);var c=this.getCursor();return a.fromPoints(u,c)}catch{return a.fromPoints(u,u)}finally{this.moveCursorToPosition(u)}},o.prototype.toJSON=function(){if(this.rangeCount)var i=this.ranges.map(function(u){var c=u.clone();return c.isBackwards=u.cursor==u.start,c});else{var i=this.getRange();i.isBackwards=this.isBackwards()}return i},o.prototype.fromJSON=function(i){if(i.start==null)if(this.rangeList&&i.length>1){this.toSingleRange(i[0]);for(var u=i.length;u--;){var c=a.fromPoints(i[u].start,i[u].end);i[u].isBackwards&&(c.cursor=c.start),this.addRange(c,!0)}return}else i=i[0];this.rangeList&&this.toSingleRange(i),this.setSelectionRange(i,i.isBackwards)},o.prototype.isEqual=function(i){if((i.length||this.rangeCount)&&i.length!=this.rangeCount)return!1;if(!i.length||!this.ranges)return this.getRange().isEqual(i);for(var u=this.ranges.length;u--;)if(!this.ranges[u].isEqual(i[u]))return!1;return!0},o}();d.prototype.setSelectionAnchor=d.prototype.setAnchor,d.prototype.getSelectionAnchor=d.prototype.getAnchor,d.prototype.setSelectionRange=d.prototype.setRange,f.implement(d.prototype,y),r.Selection=d}),ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(e,r,p){var f=e("./lib/report_error").reportError,g=2e3,y=function(){function a(d){this.splitRegex,this.states=d,this.regExps={},this.matchMappings={};for(var o in this.states){for(var i=this.states[o],u=[],c=0,s=this.matchMappings[o]={defaultToken:"text"},l="g",h=[],m=0;m<i.length;m++){var w=i[m];if(w.defaultToken&&(s.defaultToken=w.defaultToken),w.caseInsensitive&&l.indexOf("i")===-1&&(l+="i"),w.unicode&&l.indexOf("u")===-1&&(l+="u"),w.regex!=null){w.regex instanceof RegExp&&(w.regex=w.regex.toString().slice(1,-1));var C=w.regex,A=new RegExp("(?:("+C+")|(.))").exec("a").length-2;Array.isArray(w.token)?w.token.length==1||A==1?w.token=w.token[0]:A-1!=w.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:w,groupCount:A-1}),w.token=w.token[0]):(w.tokenArray=w.token,w.token=null,w.onMatch=this.$arrayTokens):typeof w.token=="function"&&!w.onMatch&&(A>1?w.onMatch=this.$applyToken:w.onMatch=w.token),A>1&&(/\\\d/.test(w.regex)?C=w.regex.replace(/\\([0-9]+)/g,function(E,b){return"\\"+(parseInt(b,10)+c+1)}):(A=1,C=this.removeCapturingGroups(w.regex)),!w.splitRegex&&typeof w.token!="string"&&h.push(w)),s[c]=m,c+=A,u.push(C),w.onMatch||(w.onMatch=null)}}u.length||(s[0]=0,u.push("$")),h.forEach(function(E){E.splitRegex=this.createSplitterRegexp(E.regex,l)},this),this.regExps[o]=new RegExp("("+u.join(")|(")+")|($)",l)}}return a.prototype.$setMaxTokenCount=function(d){g=d|0},a.prototype.$applyToken=function(d){var o=this.splitRegex.exec(d).slice(1),i=this.token.apply(this,o);if(typeof i=="string")return[{type:i,value:d}];for(var u=[],c=0,s=i.length;c<s;c++)o[c]&&(u[u.length]={type:i[c],value:o[c]});return u},a.prototype.$arrayTokens=function(d){if(!d)return[];var o=this.splitRegex.exec(d);if(!o)return"text";for(var i=[],u=this.tokenArray,c=0,s=u.length;c<s;c++)o[c+1]&&(i[i.length]={type:u[c],value:o[c+1]});return i},a.prototype.removeCapturingGroups=function(d){var o=d.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(i,u){return u?"(?:":i});return o},a.prototype.createSplitterRegexp=function(d,o){if(d.indexOf("(?=")!=-1){var i=0,u=!1,c={};d.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(s,l,h,m,w,C){return u?u=w!="]":w?u=!0:m?(i==c.stack&&(c.end=C+1,c.stack=-1),i--):h&&(i++,h.length!=1&&(c.stack=i,c.start=C)),s}),c.end!=null&&/^\)*$/.test(d.substr(c.end))&&(d=d.substring(0,c.start)+d.substr(c.end))}return d.charAt(0)!="^"&&(d="^"+d),d.charAt(d.length-1)!="$"&&(d+="$"),new RegExp(d,(o||"").replace("g",""))},a.prototype.getLineTokens=function(d,o){if(o&&typeof o!="string"){var i=o.slice(0);o=i[0],o==="#tmp"&&(i.shift(),o=i.shift())}else var i=[];var u=o||"start",c=this.states[u];c||(u="start",c=this.states[u]);var s=this.matchMappings[u],l=this.regExps[u];l.lastIndex=0;for(var h,m=[],w=0,C=0,A={type:null,value:""};h=l.exec(d);){var E=s.defaultToken,b=null,L=h[0],_=l.lastIndex;if(_-L.length>w){var k=d.substring(w,_-L.length);A.type==E?A.value+=k:(A.type&&m.push(A),A={type:E,value:k})}for(var T=0;T<h.length-2;T++)if(h[T+1]!==void 0){b=c[s[T]],b.onMatch?E=b.onMatch(L,u,i,d):E=b.token,b.next&&(typeof b.next=="string"?u=b.next:u=b.next(u,i),c=this.states[u],c||(this.reportError("state doesn't exist",u),u="start",c=this.states[u]),s=this.matchMappings[u],w=_,l=this.regExps[u],l.lastIndex=_),b.consumeLineEnd&&(w=_);break}if(L){if(typeof E=="string")(!b||b.merge!==!1)&&A.type===E?A.value+=L:(A.type&&m.push(A),A={type:E,value:L});else if(E){A.type&&m.push(A),A={type:null,value:""};for(var T=0;T<E.length;T++)m.push(E[T])}}if(w==d.length)break;if(w=_,C++>g){for(C>2*d.length&&this.reportError("infinite loop with in ace tokenizer",{startState:o,line:d});w<d.length;)A.type&&m.push(A),A={value:d.substring(w,w+=500),type:"overflow"};u="start",i=[];break}}return A.type&&m.push(A),i.length>1&&i[0]!==u&&i.unshift("#tmp",u),{tokens:m,state:i.length?i:u}},a}();y.prototype.reportError=f,r.Tokenizer=y}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(e,r,p){var f=e("../lib/deep_copy").deepCopy,g;g=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},(function(){this.addRules=function(d,o){if(!o){for(var i in d)this.$rules[i]=d[i];return}for(var i in d){for(var u=d[i],c=0;c<u.length;c++){var s=u[c];(s.next||s.onMatch)&&(typeof s.next=="string"&&s.next.indexOf(o)!==0&&(s.next=o+s.next),s.nextState&&s.nextState.indexOf(o)!==0&&(s.nextState=o+s.nextState))}this.$rules[o+i]=u}},this.getRules=function(){return this.$rules},this.embedRules=function(d,o,i,u,c){var s=typeof d=="function"?new d().getRules():d;if(u)for(var l=0;l<u.length;l++)u[l]=o+u[l];else{u=[];for(var h in s)u.push(o+h)}if(this.addRules(s,o),i)for(var m=Array.prototype[c?"push":"unshift"],l=0;l<u.length;l++)m.apply(this.$rules[u[l]],f(i));this.$embeds||(this.$embeds=[]),this.$embeds.push(o)},this.getEmbeds=function(){return this.$embeds};var y=function(d,o){return(d!="start"||o.length)&&o.unshift(this.nextState,d),this.nextState},a=function(d,o){return o.shift(),o.shift()||"start"};this.normalizeRules=function(){var d=0,o=this.$rules;function i(u){var c=o[u];c.processed=!0;for(var s=0;s<c.length;s++){var l=c[s],h=null;Array.isArray(l)&&(h=l,l={}),!l.regex&&l.start&&(l.regex=l.start,l.next||(l.next=[]),l.next.push({defaultToken:l.token},{token:l.token+".end",regex:l.end||l.start,next:"pop"}),l.token=l.token+".start",l.push=!0);var m=l.next||l.push;if(m&&Array.isArray(m)){var w=l.stateName;w||(w=l.token,typeof w!="string"&&(w=w[0]||""),o[w]&&(w+=d++)),o[w]=m,l.next=w,i(w)}else m=="pop"&&(l.next=a);if(l.push&&(l.nextState=l.next||l.push,l.next=y,delete l.push),l.rules)for(var C in l.rules)o[C]?o[C].push&&o[C].push.apply(o[C],l.rules[C]):o[C]=l.rules[C];var A=typeof l=="string"?l:l.include;if(A&&(A==="$self"&&(A="start"),Array.isArray(A)?h=A.map(function(b){return o[b]}):h=o[A]),h){var E=[s,1].concat(h);l.noEscape&&(E=E.filter(function(b){return!b.next})),c.splice.apply(c,E),s--}l.keywordMap&&(l.token=this.createKeywordMapper(l.keywordMap,l.defaultToken||"text",l.caseInsensitive),delete l.defaultToken)}}Object.keys(o).forEach(i,this)},this.createKeywordMapper=function(d,o,i,u){var c=Object.create(null);return this.$keywordList=[],Object.keys(d).forEach(function(s){for(var l=d[s],h=l.split(u||"|"),m=h.length;m--;){var w=h[m];this.$keywordList.push(w),i&&(w=w.toLowerCase()),c[w]=s}},this),d=null,i?function(s){return c[s.toLowerCase()]||o}:function(s){return c[s]||o}},this.getKeywords=function(){return this.$keywords}}).call(g.prototype),r.TextHighlightRules=g}),ace.define("ace/mode/behaviour",["require","exports","module"],function(e,r,p){var f;f=function(){this.$behaviours={}},(function(){this.add=function(g,y,a){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[g]:this.$behaviours[g]={}}this.$behaviours[g][y]=a},this.addBehaviours=function(g){for(var y in g)for(var a in g[y])this.add(y,a,g[y][a])},this.remove=function(g){this.$behaviours&&this.$behaviours[g]&&delete this.$behaviours[g]},this.inherit=function(g,y){if(typeof g=="function")var a=new g().getBehaviours(y);else var a=g.getBehaviours(y);this.addBehaviours(a)},this.getBehaviours=function(g){if(g){for(var y={},a=0;a<g.length;a++)this.$behaviours[g[a]]&&(y[g[a]]=this.$behaviours[g[a]]);return y}else return this.$behaviours}}).call(f.prototype),r.Behaviour=f}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,r,p){var f=e("./range").Range,g=function(){function y(a,d,o){this.$session=a,this.$row=d,this.$rowTokens=a.getTokens(d);var i=a.getTokenAt(d,o);this.$tokenIndex=i?i.index:-1}return y.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},y.prototype.stepForward=function(){this.$tokenIndex+=1;for(var a;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,a||(a=this.$session.getLength()),this.$row>=a)return this.$row=a-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},y.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},y.prototype.getCurrentTokenRow=function(){return this.$row},y.prototype.getCurrentTokenColumn=function(){var a=this.$rowTokens,d=this.$tokenIndex,o=a[d].start;if(o!==void 0)return o;for(o=0;d>0;)d-=1,o+=a[d].value.length;return o},y.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},y.prototype.getCurrentTokenRange=function(){var a=this.$rowTokens[this.$tokenIndex],d=this.getCurrentTokenColumn();return new f(this.$row,d,this.$row,d+a.value.length)},y}();r.TokenIterator=g}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,r,p){var f=e("../../lib/oop"),g=e("../behaviour").Behaviour,y=e("../../token_iterator").TokenIterator,a=e("../../lib/lang"),d=["text","paren.rparen","rparen","paren","punctuation.operator"],o=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],i,u={},c={'"':'"',"'":"'"},s=function(m){var w=-1;if(m.multiSelect&&(w=m.selection.index,u.rangeCount!=m.multiSelect.rangeCount&&(u={rangeCount:m.multiSelect.rangeCount})),u[w])return i=u[w];i=u[w]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},l=function(m,w,C,A){var E=m.end.row-m.start.row;return{text:C+w+A,selection:[0,m.start.column+1,E,m.end.column+(E?0:1)]}},h;h=function(m){m=m||{},this.add("braces","insertion",function(w,C,A,E,b){var L=A.getCursorPosition(),_=E.doc.getLine(L.row);if(b=="{"){s(A);var k=A.getSelectionRange(),T=E.doc.getTextRange(k),O=E.getTokenAt(L.row,L.column);if(T!==""&&T!=="{"&&A.getWrapBehavioursEnabled())return l(k,T,"{","}");if(O&&/(?:string)\.quasi|\.xml/.test(O.type)){var $=[/tag\-(?:open|name)/,/attribute\-name/];return $.some(function(D){return D.test(O.type)})||/(string)\.quasi/.test(O.type)&&O.value[L.column-O.start-1]!=="$"?void 0:(h.recordAutoInsert(A,E,"}"),{text:"{}",selection:[1,1]})}else if(h.isSaneInsertion(A,E))return/[\]\}\)]/.test(_[L.column])||A.inMultiSelectMode||m.braces?(h.recordAutoInsert(A,E,"}"),{text:"{}",selection:[1,1]}):(h.recordMaybeInsert(A,E,"{"),{text:"{",selection:[1,1]})}else if(b=="}"){s(A);var v=_.substring(L.column,L.column+1);if(v=="}"){var S=E.$findOpeningBracket("}",{column:L.column+1,row:L.row});if(S!==null&&h.isAutoInsertedClosing(L,_,b))return h.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(b==`
`||b==`\r
`){s(A);var x="";h.isMaybeInsertedClosing(L,_)&&(x=a.stringRepeat("}",i.maybeInsertedBrackets),h.clearMaybeInsertedClosing());var v=_.substring(L.column,L.column+1);if(v==="}"){var M=E.findMatchingBracket({row:L.row,column:L.column+1},"}");if(!M)return null;var R=this.$getIndent(E.getLine(M.row))}else if(x)var R=this.$getIndent(_);else{h.clearMaybeInsertedClosing();return}var I=R+E.getTabString();return{text:`
`+I+`
`+R+x,selection:[1,I.length,1,I.length]}}else h.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(w,C,A,E,b){var L=E.doc.getTextRange(b);if(!b.isMultiLine()&&L=="{"){s(A);var _=E.doc.getLine(b.start.row),k=_.substring(b.end.column,b.end.column+1);if(k=="}")return b.end.column++,b;i.maybeInsertedBrackets--}}),this.add("parens","insertion",function(w,C,A,E,b){if(b=="("){s(A);var L=A.getSelectionRange(),_=E.doc.getTextRange(L);if(_!==""&&A.getWrapBehavioursEnabled())return l(L,_,"(",")");if(h.isSaneInsertion(A,E))return h.recordAutoInsert(A,E,")"),{text:"()",selection:[1,1]}}else if(b==")"){s(A);var k=A.getCursorPosition(),T=E.doc.getLine(k.row),O=T.substring(k.column,k.column+1);if(O==")"){var $=E.$findOpeningBracket(")",{column:k.column+1,row:k.row});if($!==null&&h.isAutoInsertedClosing(k,T,b))return h.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(w,C,A,E,b){var L=E.doc.getTextRange(b);if(!b.isMultiLine()&&L=="("){s(A);var _=E.doc.getLine(b.start.row),k=_.substring(b.start.column+1,b.start.column+2);if(k==")")return b.end.column++,b}}),this.add("brackets","insertion",function(w,C,A,E,b){if(b=="["){s(A);var L=A.getSelectionRange(),_=E.doc.getTextRange(L);if(_!==""&&A.getWrapBehavioursEnabled())return l(L,_,"[","]");if(h.isSaneInsertion(A,E))return h.recordAutoInsert(A,E,"]"),{text:"[]",selection:[1,1]}}else if(b=="]"){s(A);var k=A.getCursorPosition(),T=E.doc.getLine(k.row),O=T.substring(k.column,k.column+1);if(O=="]"){var $=E.$findOpeningBracket("]",{column:k.column+1,row:k.row});if($!==null&&h.isAutoInsertedClosing(k,T,b))return h.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(w,C,A,E,b){var L=E.doc.getTextRange(b);if(!b.isMultiLine()&&L=="["){s(A);var _=E.doc.getLine(b.start.row),k=_.substring(b.start.column+1,b.start.column+2);if(k=="]")return b.end.column++,b}}),this.add("string_dquotes","insertion",function(w,C,A,E,b){var L=E.$mode.$quotes||c;if(b.length==1&&L[b]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(b)!=-1)return;s(A);var _=b,k=A.getSelectionRange(),T=E.doc.getTextRange(k);if(T!==""&&(T.length!=1||!L[T])&&A.getWrapBehavioursEnabled())return l(k,T,_,_);if(!T){var O=A.getCursorPosition(),$=E.doc.getLine(O.row),v=$.substring(O.column-1,O.column),S=$.substring(O.column,O.column+1),x=E.getTokenAt(O.row,O.column),M=E.getTokenAt(O.row,O.column+1);if(v=="\\"&&x&&/escape/.test(x.type))return null;var R=x&&/string|escape/.test(x.type),I=!M||/string|escape/.test(M.type),D;if(S==_)D=R!==I,D&&/string\.end/.test(M.type)&&(D=!1);else{if(R&&!I||R&&I)return null;var N=E.$mode.tokenRe;N.lastIndex=0;var B=N.test(v);N.lastIndex=0;var W=N.test(S),F=E.$mode.$pairQuotesAfter,H=F&&F[_]&&F[_].test(v);if(!H&&B||W||S&&!/[\s;,.})\]\\]/.test(S))return null;var z=$[O.column-2];if(v==_&&(z==_||N.test(z)))return null;D=!0}return{text:D?_+_:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(w,C,A,E,b){var L=E.$mode.$quotes||c,_=E.doc.getTextRange(b);if(!b.isMultiLine()&&L.hasOwnProperty(_)){s(A);var k=E.doc.getLine(b.start.row),T=k.substring(b.start.column+1,b.start.column+2);if(T==_)return b.end.column++,b}}),m.closeDocComment!==!1&&this.add("doc comment end","insertion",function(w,C,A,E,b){if(w==="doc-start"&&(b===`
`||b===`\r
`)&&A.selection.isEmpty()){var L=A.getCursorPosition();if(L.column===0)return;for(var _=E.doc.getLine(L.row),k=E.doc.getLine(L.row+1),T=E.getTokens(L.row),O=0,$=0;$<T.length;$++){O+=T[$].value.length;var v=T[$];if(O>=L.column){if(O===L.column){if(!/\.doc/.test(v.type))return;if(/\*\//.test(v.value)){var S=T[$+1];if(!S||!/\.doc/.test(S.type))return}}var x=L.column-(O-v.value.length),M=v.value.indexOf("*/"),R=v.value.indexOf("/**",M>-1?M+2:0);if(R!==-1&&x>R&&x<R+3||M!==-1&&R!==-1&&x>=M&&x<=R||!/\.doc/.test(v.type))return;break}}var I=this.$getIndent(_);if(/\s*\*/.test(k))return/^\s*\*/.test(_)?{text:b+I+"* ",selection:[1,2+I.length,1,2+I.length]}:{text:b+I+" * ",selection:[1,3+I.length,1,3+I.length]};if(/\/\*\*/.test(_.substring(0,L.column)))return{text:b+I+" * "+b+" "+I+"*/",selection:[1,4+I.length,1,4+I.length]}}})},h.isSaneInsertion=function(m,w){var C=m.getCursorPosition(),A=new y(w,C.row,C.column);if(!this.$matchTokenType(A.getCurrentToken()||"text",d)){if(/[)}\]]/.test(m.session.getLine(C.row)[C.column]))return!0;var E=new y(w,C.row,C.column+1);if(!this.$matchTokenType(E.getCurrentToken()||"text",d))return!1}return A.stepForward(),A.getCurrentTokenRow()!==C.row||this.$matchTokenType(A.getCurrentToken()||"text",o)},h.$matchTokenType=function(m,w){return w.indexOf(m.type||m)>-1},h.recordAutoInsert=function(m,w,C){var A=m.getCursorPosition(),E=w.doc.getLine(A.row);this.isAutoInsertedClosing(A,E,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=A.row,i.autoInsertedLineEnd=C+E.substr(A.column),i.autoInsertedBrackets++},h.recordMaybeInsert=function(m,w,C){var A=m.getCursorPosition(),E=w.doc.getLine(A.row);this.isMaybeInsertedClosing(A,E)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=A.row,i.maybeInsertedLineStart=E.substr(0,A.column)+C,i.maybeInsertedLineEnd=E.substr(A.column),i.maybeInsertedBrackets++},h.isAutoInsertedClosing=function(m,w,C){return i.autoInsertedBrackets>0&&m.row===i.autoInsertedRow&&C===i.autoInsertedLineEnd[0]&&w.substr(m.column)===i.autoInsertedLineEnd},h.isMaybeInsertedClosing=function(m,w){return i.maybeInsertedBrackets>0&&m.row===i.maybeInsertedRow&&w.substr(m.column)===i.maybeInsertedLineEnd&&w.substr(0,m.column)==i.maybeInsertedLineStart},h.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},h.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},f.inherits(h,g),r.CstyleBehaviour=h}),ace.define("ace/unicode",["require","exports","module"],function(e,r,p){for(var f=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],g=0,y=[],a=0;a<f.length;a+=2)y.push(g+=f[a]),f[a+1]&&y.push(45,g+=f[a+1]);r.wordChars=String.fromCharCode.apply(null,y)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,r,p){var f=e("../config"),g=e("../tokenizer").Tokenizer,y=e("./text_highlight_rules").TextHighlightRules,a=e("./behaviour/cstyle").CstyleBehaviour,d=e("../unicode"),o=e("../lib/lang"),i=e("../token_iterator").TokenIterator,u=e("../range").Range,c;c=function(){this.HighlightRules=y},(function(){this.$defaultBehaviour=new a,this.tokenRe=new RegExp("^["+d.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+d.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new g(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(s,l,h,m){var w=l.doc,C=!0,A=!0,E=1/0,b=l.getTabSize(),L=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var T=this.lineCommentStart.map(o.escapeRegExp).join("|"),_=this.lineCommentStart[0];else var T=o.escapeRegExp(this.lineCommentStart),_=this.lineCommentStart;T=new RegExp("^(\\s*)(?:"+T+") ?"),L=l.getUseSoftTabs();var v=function(W,F){var H=W.match(T);if(H){var z=H[1].length,P=H[0].length;!M(W,z,P)&&H[0][P-1]==" "&&P--,w.removeInLine(F,z,P)}},x=_+" ",$=function(W,F){(!C||/\S/.test(W))&&(M(W,E,E)?w.insertInLine({row:F,column:E},x):w.insertInLine({row:F,column:E},_))},S=function(W,F){return T.test(W)},M=function(W,F,H){for(var z=0;F--&&W.charAt(F)==" ";)z++;if(z%b!=0)return!1;for(var z=0;W.charAt(H++)==" ";)z++;return b>2?z%b!=b-1:z%b==0}}else{if(!this.blockComment)return!1;var _=this.blockComment.start,k=this.blockComment.end,T=new RegExp("^(\\s*)(?:"+o.escapeRegExp(_)+")"),O=new RegExp("(?:"+o.escapeRegExp(k)+")\\s*$"),$=function(D,N){S(D,N)||(!C||/\S/.test(D))&&(w.insertInLine({row:N,column:D.length},k),w.insertInLine({row:N,column:E},_))},v=function(D,N){var B;(B=D.match(O))&&w.removeInLine(N,D.length-B[0].length,D.length),(B=D.match(T))&&w.removeInLine(N,B[1].length,B[0].length)},S=function(D,N){if(T.test(D))return!0;for(var B=l.getTokens(N),W=0;W<B.length;W++)if(B[W].type==="comment")return!0}}function R(D){for(var N=h;N<=m;N++)D(w.getLine(N),N)}var I=1/0;R(function(D,N){var B=D.search(/\S/);B!==-1?(B<E&&(E=B),A&&!S(D,N)&&(A=!1)):I>D.length&&(I=D.length)}),E==1/0&&(E=I,C=!1,A=!1),L&&E%b!=0&&(E=Math.floor(E/b)*b),R(A?v:$)},this.toggleBlockComment=function(s,l,h,m){var w=this.blockComment;if(w){!w.start&&w[0]&&(w=w[0]);var C=new i(l,m.row,m.column),A=C.getCurrentToken();l.selection;var E=l.selection.toOrientedRange(),b,L;if(A&&/comment/.test(A.type)){for(var _,k;A&&/comment/.test(A.type);){var T=A.value.indexOf(w.start);if(T!=-1){var O=C.getCurrentTokenRow(),$=C.getCurrentTokenColumn()+T;_=new u(O,$,O,$+w.start.length);break}A=C.stepBackward()}for(var C=new i(l,m.row,m.column),A=C.getCurrentToken();A&&/comment/.test(A.type);){var T=A.value.indexOf(w.end);if(T!=-1){var O=C.getCurrentTokenRow(),$=C.getCurrentTokenColumn()+T;k=new u(O,$,O,$+w.end.length);break}A=C.stepForward()}k&&l.remove(k),_&&(l.remove(_),b=_.start.row,L=-w.start.length)}else L=w.start.length,b=h.start.row,l.insert(h.end,w.end),l.insert(h.start,w.start);E.start.row==b&&(E.start.column+=L),E.end.row==b&&(E.end.column+=L),l.selection.fromOrientedRange(E)}},this.getNextLineIndent=function(s,l,h){return this.$getIndent(l)},this.checkOutdent=function(s,l,h){return!1},this.autoOutdent=function(s,l,h){},this.$getIndent=function(s){return s.match(/^\s*/)[0]},this.createWorker=function(s){return null},this.createModeDelegates=function(s){this.$embeds=[],this.$modes={};for(var l in s)if(s[l]){var h=s[l],m=h.prototype.$id,w=f.$modes[m];w||(f.$modes[m]=w=new h),f.$modes[l]||(f.$modes[l]=w),this.$embeds.push(l),this.$modes[l]=w}for(var C=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],A=function(b){(function(L){var _=C[b],k=L[_];L[C[b]]=function(){return this.$delegator(_,arguments,k)}})(E)},E=this,l=0;l<C.length;l++)A(l)},this.$delegator=function(s,l,h){var m=l[0]||"start";if(typeof m!="string"){if(Array.isArray(m[2])){var w=m[2][m[2].length-1],C=this.$modes[w];if(C)return C[s].apply(C,[m[1]].concat([].slice.call(l,1)))}m=m[0]||"start"}for(var A=0;A<this.$embeds.length;A++)if(this.$modes[this.$embeds[A]]){var E=m.split(this.$embeds[A]);if(!E[0]&&E[1]){l[0]=E[1];var C=this.$modes[this.$embeds[A]];return C[s].apply(C,l)}}var b=h.apply(this,l);return h?b:void 0},this.transformAction=function(s,l,h,m,w){if(this.$behaviour){var C=this.$behaviour.getBehaviours();for(var A in C)if(C[A][l]){var E=C[A][l].apply(this,arguments);if(E)return E}}},this.getKeywords=function(s){if(!this.completionKeywords){var l=this.$tokenizer.rules,h=[];for(var m in l)for(var w=l[m],C=0,A=w.length;C<A;C++)if(typeof w[C].token=="string")/keyword|support|storage/.test(w[C].token)&&h.push(w[C].regex);else if(typeof w[C].token=="object"){for(var E=0,b=w[C].token.length;E<b;E++)if(/keyword|support|storage/.test(w[C].token[E])){var m=w[C].regex.match(/\(.+?\)/g)[E];h.push(m.substr(1,m.length-2))}}this.completionKeywords=h}return s?h.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(s,l,h,m){var w=this.$keywordList||this.$createKeywordList();return w.map(function(C){return{name:C,value:C,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(c.prototype),r.Mode=c}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,r,p){var f=e("./lib/dom"),g=function(){function y(a){this.session=a,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return y.prototype.getRowLength=function(a){var d;return this.lineWidgets?d=this.lineWidgets[a]&&this.lineWidgets[a].rowCount||0:d=0,!this.$useWrapMode||!this.$wrapData[a]?1+d:this.$wrapData[a].length+1+d},y.prototype.$getWidgetScreenLength=function(){var a=0;return this.lineWidgets.forEach(function(d){d&&d.rowCount&&!d.hidden&&(a+=d.rowCount)}),a},y.prototype.$onChangeEditor=function(a){this.attach(a.editor)},y.prototype.attach=function(a){a&&a.widgetManager&&a.widgetManager!=this&&a.widgetManager.detach(),this.editor!=a&&(this.detach(),this.editor=a,a&&(a.widgetManager=this,a.renderer.on("beforeRender",this.measureWidgets),a.renderer.on("afterRender",this.renderWidgets)))},y.prototype.detach=function(a){var d=this.editor;if(d){this.editor=null,d.widgetManager=null,d.renderer.off("beforeRender",this.measureWidgets),d.renderer.off("afterRender",this.renderWidgets);var o=this.session.lineWidgets;o&&o.forEach(function(i){i&&i.el&&i.el.parentNode&&(i._inDocument=!1,i.el.parentNode.removeChild(i.el))})}},y.prototype.updateOnFold=function(a,d){var o=d.lineWidgets;if(!(!o||!a.action)){for(var i=a.data,u=i.start.row,c=i.end.row,s=a.action=="add",l=u+1;l<c;l++)o[l]&&(o[l].hidden=s);o[c]&&(s?o[u]?o[c].hidden=s:o[u]=o[c]:(o[u]==o[c]&&(o[u]=void 0),o[c].hidden=s))}},y.prototype.updateOnChange=function(a){var d=this.session.lineWidgets;if(d){var o=a.start.row,i=a.end.row-o;if(i!==0)if(a.action=="remove"){var u=d.splice(o+1,i);!d[o]&&u[u.length-1]&&(d[o]=u.pop()),u.forEach(function(s){s&&this.removeLineWidget(s)},this),this.$updateRows()}else{var c=new Array(i);d[o]&&d[o].column!=null&&a.start.column>d[o].column&&o++,c.unshift(o,0),d.splice.apply(d,c),this.$updateRows()}}},y.prototype.$updateRows=function(){var a=this.session.lineWidgets;if(a){var d=!0;a.forEach(function(o,i){if(o)for(d=!1,o.row=i;o.$oldWidget;)o.$oldWidget.row=i,o=o.$oldWidget}),d&&(this.session.lineWidgets=null)}},y.prototype.$registerLineWidget=function(a){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var d=this.session.lineWidgets[a.row];return d&&(a.$oldWidget=d,d.el&&d.el.parentNode&&(d.el.parentNode.removeChild(d.el),d._inDocument=!1)),this.session.lineWidgets[a.row]=a,a},y.prototype.addLineWidget=function(a){if(this.$registerLineWidget(a),a.session=this.session,!this.editor)return a;var d=this.editor.renderer;a.html&&!a.el&&(a.el=f.createElement("div"),a.el.innerHTML=a.html),a.text&&!a.el&&(a.el=f.createElement("div"),a.el.textContent=a.text),a.el&&(f.addCssClass(a.el,"ace_lineWidgetContainer"),a.className&&f.addCssClass(a.el,a.className),a.el.style.position="absolute",a.el.style.zIndex="5",d.container.appendChild(a.el),a._inDocument=!0,a.coverGutter||(a.el.style.zIndex="3"),a.pixelHeight==null&&(a.pixelHeight=a.el.offsetHeight)),a.rowCount==null&&(a.rowCount=a.pixelHeight/d.layerConfig.lineHeight);var o=this.session.getFoldAt(a.row,0);if(a.$fold=o,o){var i=this.session.lineWidgets;a.row==o.end.row&&!i[o.start.row]?i[o.start.row]=a:a.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows(),this.renderWidgets(null,d),this.onWidgetChanged(a),a},y.prototype.removeLineWidget=function(a){if(a._inDocument=!1,a.session=null,a.el&&a.el.parentNode&&a.el.parentNode.removeChild(a.el),a.editor&&a.editor.destroy)try{a.editor.destroy()}catch{}if(this.session.lineWidgets){var d=this.session.lineWidgets[a.row];if(d==a)this.session.lineWidgets[a.row]=a.$oldWidget,a.$oldWidget&&this.onWidgetChanged(a.$oldWidget);else for(;d;){if(d.$oldWidget==a){d.$oldWidget=a.$oldWidget;break}d=d.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows()},y.prototype.getWidgetsAtRow=function(a){for(var d=this.session.lineWidgets,o=d&&d[a],i=[];o;)i.push(o),o=o.$oldWidget;return i},y.prototype.onWidgetChanged=function(a){this.session._changedWidgets.push(a),this.editor&&this.editor.renderer.updateFull()},y.prototype.measureWidgets=function(a,d){var o=this.session._changedWidgets,i=d.layerConfig;if(!(!o||!o.length)){for(var u=1/0,c=0;c<o.length;c++){var s=o[c];if(!(!s||!s.el)&&s.session==this.session){if(!s._inDocument){if(this.session.lineWidgets[s.row]!=s)continue;s._inDocument=!0,d.container.appendChild(s.el)}s.h=s.el.offsetHeight,s.fixedWidth||(s.w=s.el.offsetWidth,s.screenWidth=Math.ceil(s.w/i.characterWidth));var l=s.h/i.lineHeight;s.coverLine&&(l-=this.session.getRowLineCount(s.row),l<0&&(l=0)),s.rowCount!=l&&(s.rowCount=l,s.row<u&&(u=s.row))}}u!=1/0&&(this.session._emit("changeFold",{data:{start:{row:u}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},y.prototype.renderWidgets=function(a,d){var o=d.layerConfig,i=this.session.lineWidgets;if(i){for(var u=Math.min(this.firstRow,o.firstRow),c=Math.max(this.lastRow,o.lastRow,i.length);u>0&&!i[u];)u--;this.firstRow=o.firstRow,this.lastRow=o.lastRow,d.$cursorLayer.config=o;for(var s=u;s<=c;s++){var l=i[s];if(!(!l||!l.el)){if(l.hidden){l.el.style.top=-100-(l.pixelHeight||0)+"px";continue}l._inDocument||(l._inDocument=!0,d.container.appendChild(l.el));var h=d.$cursorLayer.getPixelPosition({row:s,column:0},!0).top;l.coverLine||(h+=o.lineHeight*this.session.getRowLineCount(l.row)),l.el.style.top=h-o.offset+"px";var m=l.coverGutter?0:d.gutterWidth;l.fixedWidth||(m-=d.scrollLeft),l.el.style.left=m+"px",l.fullWidth&&l.screenWidth&&(l.el.style.minWidth=o.width+2*o.padding+"px"),l.fixedWidth?l.el.style.right=d.scrollBar.getWidth()+"px":l.el.style.right=""}}}},y}();r.LineWidgets=g}),ace.define("ace/apply_delta",["require","exports","module"],function(e,r,p){r.applyDelta=function(f,g,y){var a=g.start.row,d=g.start.column,o=f[a]||"";switch(g.action){case"insert":var i=g.lines;if(i.length===1)f[a]=o.substring(0,d)+g.lines[0]+o.substring(d);else{var u=[a,1].concat(g.lines);f.splice.apply(f,u),f[a]=o.substring(0,d)+f[a],f[a+g.lines.length-1]+=o.substring(d)}break;case"remove":var c=g.end.column,s=g.end.row;a===s?f[a]=o.substring(0,d)+o.substring(c):f.splice(a,s-a+1,o.substring(0,d)+f[s].substring(c));break}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,r,p){var f=e("./lib/oop"),g=e("./lib/event_emitter").EventEmitter,y=function(){function o(i,u,c){this.$onChange=this.onChange.bind(this),this.attach(i),typeof u!="number"?this.setPosition(u.row,u.column):this.setPosition(u,c)}return o.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},o.prototype.getDocument=function(){return this.document},o.prototype.onChange=function(i){if(!(i.start.row==i.end.row&&i.start.row!=this.row)&&!(i.start.row>this.row)){var u=d(i,{row:this.row,column:this.column},this.$insertRight);this.setPosition(u.row,u.column,!0)}},o.prototype.setPosition=function(i,u,c){var s;if(c?s={row:i,column:u}:s=this.$clipPositionToDocument(i,u),!(this.row==s.row&&this.column==s.column)){var l={row:this.row,column:this.column};this.row=s.row,this.column=s.column,this._signal("change",{old:l,value:s})}},o.prototype.detach=function(){this.document.off("change",this.$onChange)},o.prototype.attach=function(i){this.document=i||this.document,this.document.on("change",this.$onChange)},o.prototype.$clipPositionToDocument=function(i,u){var c={};return i>=this.document.getLength()?(c.row=Math.max(0,this.document.getLength()-1),c.column=this.document.getLine(c.row).length):i<0?(c.row=0,c.column=0):(c.row=i,c.column=Math.min(this.document.getLine(c.row).length,Math.max(0,u))),u<0&&(c.column=0),c},o}();y.prototype.$insertRight=!1,f.implement(y.prototype,g);function a(o,i,u){var c=u?o.column<=i.column:o.column<i.column;return o.row<i.row||o.row==i.row&&c}function d(o,i,u){var c=o.action=="insert",s=(c?1:-1)*(o.end.row-o.start.row),l=(c?1:-1)*(o.end.column-o.start.column),h=o.start,m=c?h:o.end;return a(i,h,u)?{row:i.row,column:i.column}:a(m,i,!u)?{row:i.row+s,column:i.column+(i.row==m.row?l:0)}:{row:h.row,column:h.column}}r.Anchor=y}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,r,p){var f=e("./lib/oop"),g=e("./apply_delta").applyDelta,y=e("./lib/event_emitter").EventEmitter,a=e("./range").Range,d=e("./anchor").Anchor,o=function(){function i(u){this.$lines=[""],u.length===0?this.$lines=[""]:Array.isArray(u)?this.insertMergedLines({row:0,column:0},u):this.insert({row:0,column:0},u)}return i.prototype.setValue=function(u){var c=this.getLength()-1;this.remove(new a(0,0,c,this.getLine(c).length)),this.insert({row:0,column:0},u||"")},i.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},i.prototype.createAnchor=function(u,c){return new d(this,u,c)},i.prototype.$detectNewLine=function(u){var c=u.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=c?c[1]:`
`,this._signal("changeNewLineMode")},i.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},i.prototype.setNewLineMode=function(u){this.$newLineMode!==u&&(this.$newLineMode=u,this._signal("changeNewLineMode"))},i.prototype.getNewLineMode=function(){return this.$newLineMode},i.prototype.isNewLine=function(u){return u==`\r
`||u=="\r"||u==`
`},i.prototype.getLine=function(u){return this.$lines[u]||""},i.prototype.getLines=function(u,c){return this.$lines.slice(u,c+1)},i.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},i.prototype.getLength=function(){return this.$lines.length},i.prototype.getTextRange=function(u){return this.getLinesForRange(u).join(this.getNewLineCharacter())},i.prototype.getLinesForRange=function(u){var c;if(u.start.row===u.end.row)c=[this.getLine(u.start.row).substring(u.start.column,u.end.column)];else{c=this.getLines(u.start.row,u.end.row),c[0]=(c[0]||"").substring(u.start.column);var s=c.length-1;u.end.row-u.start.row==s&&(c[s]=c[s].substring(0,u.end.column))}return c},i.prototype.insertLines=function(u,c){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(u,c)},i.prototype.removeLines=function(u,c){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(u,c)},i.prototype.insertNewLine=function(u){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(u,["",""])},i.prototype.insert=function(u,c){return this.getLength()<=1&&this.$detectNewLine(c),this.insertMergedLines(u,this.$split(c))},i.prototype.insertInLine=function(u,c){var s=this.clippedPos(u.row,u.column),l=this.pos(u.row,u.column+c.length);return this.applyDelta({start:s,end:l,action:"insert",lines:[c]},!0),this.clonePos(l)},i.prototype.clippedPos=function(u,c){var s=this.getLength();u===void 0?u=s:u<0?u=0:u>=s&&(u=s-1,c=void 0);var l=this.getLine(u);return c==null&&(c=l.length),c=Math.min(Math.max(c,0),l.length),{row:u,column:c}},i.prototype.clonePos=function(u){return{row:u.row,column:u.column}},i.prototype.pos=function(u,c){return{row:u,column:c}},i.prototype.$clipPosition=function(u){var c=this.getLength();return u.row>=c?(u.row=Math.max(0,c-1),u.column=this.getLine(c-1).length):(u.row=Math.max(0,u.row),u.column=Math.min(Math.max(u.column,0),this.getLine(u.row).length)),u},i.prototype.insertFullLines=function(u,c){u=Math.min(Math.max(u,0),this.getLength());var s=0;u<this.getLength()?(c=c.concat([""]),s=0):(c=[""].concat(c),u--,s=this.$lines[u].length),this.insertMergedLines({row:u,column:s},c)},i.prototype.insertMergedLines=function(u,c){var s=this.clippedPos(u.row,u.column),l={row:s.row+c.length-1,column:(c.length==1?s.column:0)+c[c.length-1].length};return this.applyDelta({start:s,end:l,action:"insert",lines:c}),this.clonePos(l)},i.prototype.remove=function(u){var c=this.clippedPos(u.start.row,u.start.column),s=this.clippedPos(u.end.row,u.end.column);return this.applyDelta({start:c,end:s,action:"remove",lines:this.getLinesForRange({start:c,end:s})}),this.clonePos(c)},i.prototype.removeInLine=function(u,c,s){var l=this.clippedPos(u,c),h=this.clippedPos(u,s);return this.applyDelta({start:l,end:h,action:"remove",lines:this.getLinesForRange({start:l,end:h})},!0),this.clonePos(l)},i.prototype.removeFullLines=function(u,c){u=Math.min(Math.max(0,u),this.getLength()-1),c=Math.min(Math.max(0,c),this.getLength()-1);var s=c==this.getLength()-1&&u>0,l=c<this.getLength()-1,h=s?u-1:u,m=s?this.getLine(h).length:0,w=l?c+1:c,C=l?0:this.getLine(w).length,A=new a(h,m,w,C),E=this.$lines.slice(u,c+1);return this.applyDelta({start:A.start,end:A.end,action:"remove",lines:this.getLinesForRange(A)}),E},i.prototype.removeNewLine=function(u){u<this.getLength()-1&&u>=0&&this.applyDelta({start:this.pos(u,this.getLine(u).length),end:this.pos(u+1,0),action:"remove",lines:["",""]})},i.prototype.replace=function(u,c){if(u instanceof a||(u=a.fromPoints(u.start,u.end)),c.length===0&&u.isEmpty())return u.start;if(c==this.getTextRange(u))return u.end;this.remove(u);var s;return c?s=this.insert(u.start,c):s=u.start,s},i.prototype.applyDeltas=function(u){for(var c=0;c<u.length;c++)this.applyDelta(u[c])},i.prototype.revertDeltas=function(u){for(var c=u.length-1;c>=0;c--)this.revertDelta(u[c])},i.prototype.applyDelta=function(u,c){var s=u.action=="insert";(s?u.lines.length<=1&&!u.lines[0]:!a.comparePoints(u.start,u.end))||(s&&u.lines.length>2e4?this.$splitAndapplyLargeDelta(u,2e4):(g(this.$lines,u,c),this._signal("change",u)))},i.prototype.$safeApplyDelta=function(u){var c=this.$lines.length;(u.action=="remove"&&u.start.row<c&&u.end.row<c||u.action=="insert"&&u.start.row<=c)&&this.applyDelta(u)},i.prototype.$splitAndapplyLargeDelta=function(u,c){for(var s=u.lines,l=s.length-c+1,h=u.start.row,m=u.start.column,w=0,C=0;w<l;w=C){C+=c-1;var A=s.slice(w,C);A.push(""),this.applyDelta({start:this.pos(h+w,m),end:this.pos(h+C,m=0),action:u.action,lines:A},!0)}u.lines=s.slice(w),u.start.row=h+w,u.start.column=m,this.applyDelta(u,!0)},i.prototype.revertDelta=function(u){this.$safeApplyDelta({start:this.clonePos(u.start),end:this.clonePos(u.end),action:u.action=="insert"?"remove":"insert",lines:u.lines.slice()})},i.prototype.indexToPosition=function(u,c){for(var s=this.$lines||this.getAllLines(),l=this.getNewLineCharacter().length,h=c||0,m=s.length;h<m;h++)if(u-=s[h].length+l,u<0)return{row:h,column:u+s[h].length+l};return{row:m-1,column:u+s[m-1].length+l}},i.prototype.positionToIndex=function(u,c){for(var s=this.$lines||this.getAllLines(),l=this.getNewLineCharacter().length,h=0,m=Math.min(u.row,s.length),w=c||0;w<m;++w)h+=s[w].length+l;return h+u.column},i.prototype.$split=function(u){return u.split(/\r\n|\r|\n/)},i}();o.prototype.$autoNewLine="",o.prototype.$newLineMode="auto",f.implement(o.prototype,y),r.Document=o}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,r,p){var f=e("./lib/oop"),g=e("./lib/event_emitter").EventEmitter,y=function(){function a(d,o){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=d;var i=this;this.$worker=function(){if(i.running){for(var u=new Date,c=i.currentLine,s=-1,l=i.doc,h=c;i.lines[c];)c++;var m=l.getLength(),w=0;for(i.running=!1;c<m;){i.$tokenizeRow(c),s=c;do c++;while(i.lines[c]);if(w++,w%5===0&&new Date-u>20){i.running=setTimeout(i.$worker,20);break}}i.currentLine=c,s==-1&&(s=c),h<=s&&i.fireUpdateEvent(h,s)}}}return a.prototype.setTokenizer=function(d){this.tokenizer=d,this.lines=[],this.states=[],this.start(0)},a.prototype.setDocument=function(d){this.doc=d,this.lines=[],this.states=[],this.stop()},a.prototype.fireUpdateEvent=function(d,o){var i={first:d,last:o};this._signal("update",{data:i})},a.prototype.start=function(d){this.currentLine=Math.min(d||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},a.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},a.prototype.$updateOnChange=function(d){var o=d.start.row,i=d.end.row-o;if(i===0)this.lines[o]=null;else if(d.action=="remove")this.lines.splice(o,i+1,null),this.states.splice(o,i+1,null);else{var u=Array(i+1);u.unshift(o,1),this.lines.splice.apply(this.lines,u),this.states.splice.apply(this.states,u)}this.currentLine=Math.min(o,this.currentLine,this.doc.getLength()),this.stop()},a.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},a.prototype.getTokens=function(d){return this.lines[d]||this.$tokenizeRow(d)},a.prototype.getState=function(d){return this.currentLine==d&&this.$tokenizeRow(d),this.states[d]||"start"},a.prototype.$tokenizeRow=function(d){var o=this.doc.getLine(d),i=this.states[d-1],u=this.tokenizer.getLineTokens(o,i,d);return this.states[d]+""!=u.state+""?(this.states[d]=u.state,this.lines[d+1]=null,this.currentLine>d+1&&(this.currentLine=d+1)):this.currentLine==d&&(this.currentLine=d+1),this.lines[d]=u.tokens},a.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},a}();f.implement(y.prototype,g),r.BackgroundTokenizer=y}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(e,r,p){var f=e("./lib/lang"),g=e("./range").Range,y=function(){function a(d,o,i){i===void 0&&(i="text"),this.setRegexp(d),this.clazz=o,this.type=i}return a.prototype.setRegexp=function(d){this.regExp+""!=d+""&&(this.regExp=d,this.cache=[])},a.prototype.update=function(d,o,i,u){if(this.regExp)for(var c=u.firstRow,s=u.lastRow,l={},h=c;h<=s;h++){var m=this.cache[h];m==null&&(m=f.getMatchOffsets(i.getLine(h),this.regExp),m.length>this.MAX_RANGES&&(m=m.slice(0,this.MAX_RANGES)),m=m.map(function(E){return new g(h,E.offset,h,E.offset+E.length)}),this.cache[h]=m.length?m:"");for(var w=m.length;w--;){var C=m[w].toScreenRange(i),A=C.toString();l[A]||(l[A]=!0,o.drawSingleLineMarker(d,C,this.clazz,u))}}},a}();y.prototype.MAX_RANGES=500,r.SearchHighlight=y}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,r,p){var f=function(){function E(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return E.prototype.addSession=function(b){this.$session=b},E.prototype.add=function(b,L,_){if(!this.$fromUndo&&b!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),L===!1||!this.lastDeltas){this.lastDeltas=[];var k=this.$undoStack.length;k>this.$undoDepth-1&&this.$undoStack.splice(0,k-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),b.id=this.$rev=++this.$maxRev}(b.action=="remove"||b.action=="insert")&&(this.$lastDelta=b),this.lastDeltas.push(b)}},E.prototype.addSelection=function(b,L){this.selections.push({value:b,rev:L||this.$rev})},E.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},E.prototype.markIgnored=function(b,L){L==null&&(L=this.$rev+1);for(var _=this.$undoStack,k=_.length;k--;){var T=_[k][0];if(T.id<=b)break;T.id<L&&(T.ignore=!0)}this.lastDeltas=null},E.prototype.getSelection=function(b,L){for(var _=this.selections,k=_.length;k--;){var T=_[k];if(T.rev<b)return L&&(T=_[k+1]),T}},E.prototype.getRevision=function(){return this.$rev},E.prototype.getDeltas=function(b,L){L==null&&(L=this.$rev+1);for(var _=this.$undoStack,k=null,T=0,O=_.length;O--;){var $=_[O][0];if($.id<L&&!k&&(k=O+1),$.id<=b){T=O+1;break}}return _.slice(T,k)},E.prototype.getChangedRanges=function(b,L){L==null&&(L=this.$rev+1)},E.prototype.getChangedLines=function(b,L){L==null&&(L=this.$rev+1)},E.prototype.undo=function(b,L){this.lastDeltas=null;var _=this.$undoStack;if(g(_,_.length)){b||(b=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var k=_.pop(),T=null;return k&&(T=b.undoChanges(k,L),this.$redoStack.push(k),this.$syncRev()),this.$fromUndo=!1,T}},E.prototype.redo=function(b,L){if(this.lastDeltas=null,b||(b=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var _=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);A(this.$redoStack,_),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(O){O[0].id=++this.$maxRev},this)}var k=this.$redoStack.pop(),T=null;return k&&(T=b.redoChanges(k,L),this.$undoStack.push(k),this.$syncRev()),this.$fromUndo=!1,T},E.prototype.$syncRev=function(){var b=this.$undoStack,L=b[b.length-1],_=L&&L[0].id||0;this.$redoStackBaseRev=_,this.$rev=_},E.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},E.prototype.canUndo=function(){return this.$undoStack.length>0},E.prototype.canRedo=function(){return this.$redoStack.length>0},E.prototype.bookmark=function(b){b==null&&(b=this.$rev),this.mark=b},E.prototype.isAtBookmark=function(){return this.$rev===this.mark},E.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},E.prototype.fromJSON=function(b){this.reset(),this.$undoStack=b.$undoStack,this.$redoStack=b.$redoStack},E.prototype.$prettyPrint=function(b){return b?i(b):i(this.$undoStack)+`
---
`+i(this.$redoStack)},E}();f.prototype.hasUndo=f.prototype.canUndo,f.prototype.hasRedo=f.prototype.canRedo,f.prototype.isClean=f.prototype.isAtBookmark,f.prototype.markClean=f.prototype.bookmark;function g(E,b){for(var L=b;L--;){var _=E[L];if(_&&!_[0].ignore){for(;L<b-1;){var k=s(E[L],E[L+1]);E[L]=k[0],E[L+1]=k[1],L++}return!0}}}var y=e("./range").Range,a=y.comparePoints;y.comparePoints;function d(E){return{row:E.row,column:E.column}}function o(E){return{start:d(E.start),end:d(E.end),action:E.action,lines:E.lines.slice()}}function i(E){if(E=E||this,Array.isArray(E))return E.map(i).join(`
`);var b="";return E.action?(b=E.action=="insert"?"+":"-",b+="["+E.lines+"]"):E.value&&(Array.isArray(E.value)?b=E.value.map(u).join(`
`):b=u(E.value)),E.start&&(b+=u(E)),(E.id||E.rev)&&(b+="	("+(E.id||E.rev)+")"),b}function u(E){return E.start.row+":"+E.start.column+"=>"+E.end.row+":"+E.end.column}function c(E,b){var L=E.action=="insert",_=b.action=="insert";if(L&&_)if(a(b.start,E.end)>=0)h(b,E,-1);else if(a(b.start,E.start)<=0)h(E,b,1);else return null;else if(L&&!_)if(a(b.start,E.end)>=0)h(b,E,-1);else if(a(b.end,E.start)<=0)h(E,b,-1);else return null;else if(!L&&_)if(a(b.start,E.start)>=0)h(b,E,1);else if(a(b.start,E.start)<=0)h(E,b,1);else return null;else if(!L&&!_)if(a(b.start,E.start)>=0)h(b,E,1);else if(a(b.end,E.start)<=0)h(E,b,-1);else return null;return[b,E]}function s(E,b){for(var L=E.length;L--;)for(var _=0;_<b.length;_++)if(!c(E[L],b[_])){for(;L<E.length;){for(;_--;)c(b[_],E[L]);_=b.length,L++}return[E,b]}return E.selectionBefore=b.selectionBefore=E.selectionAfter=b.selectionAfter=null,[b,E]}function l(E,b){var L=E.action=="insert",_=b.action=="insert";if(L&&_)a(E.start,b.start)<0?h(b,E,1):h(E,b,1);else if(L&&!_)a(E.start,b.end)>=0?h(E,b,-1):(a(E.start,b.start)<=0||h(E,y.fromPoints(b.start,E.start),-1),h(b,E,1));else if(!L&&_)a(b.start,E.end)>=0?h(b,E,-1):(a(b.start,E.start)<=0||h(b,y.fromPoints(E.start,b.start),-1),h(E,b,1));else if(!L&&!_)if(a(b.start,E.end)>=0)h(b,E,-1);else if(a(b.end,E.start)<=0)h(E,b,-1);else{var k,T;return a(E.start,b.start)<0&&(k=E,E=w(E,b.start)),a(E.end,b.end)>0&&(T=w(E,b.end)),m(b.end,E.start,E.end,-1),T&&!k&&(E.lines=T.lines,E.start=T.start,E.end=T.end,T=E),[b,k,T].filter(Boolean)}return[b,E]}function h(E,b,L){m(E.start,b.start,b.end,L),m(E.end,b.start,b.end,L)}function m(E,b,L,_){E.row==(_==1?b:L).row&&(E.column+=_*(L.column-b.column)),E.row+=_*(L.row-b.row)}function w(E,b){var L=E.lines,_=E.end;E.end=d(b);var k=E.end.row-E.start.row,T=L.splice(k,L.length),O=k?b.column:b.column-E.start.column;L.push(T[0].substring(0,O)),T[0]=T[0].substr(O);var $={start:d(b),end:_,lines:T,action:E.action};return $}function C(E,b){b=o(b);for(var L=E.length;L--;){for(var _=E[L],k=0;k<_.length;k++){var T=_[k],O=l(T,b);b=O[0],O.length!=2&&(O[2]?(_.splice(k+1,1,O[1],O[2]),k++):O[1]||(_.splice(k,1),k--))}_.length||E.splice(L,1)}return E}function A(E,b){for(var L=0;L<b.length;L++)for(var _=b[L],k=0;k<_.length;k++)C(E,_[k])}r.UndoManager=f}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,r,p){var f=e("../range").Range,g=function(){function y(a,d){this.foldData=a,Array.isArray(d)?this.folds=d:d=this.folds=[d];var o=d[d.length-1];this.range=new f(d[0].start.row,d[0].start.column,o.end.row,o.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(i){i.setFoldLine(this)},this)}return y.prototype.shiftRow=function(a){this.start.row+=a,this.end.row+=a,this.folds.forEach(function(d){d.start.row+=a,d.end.row+=a})},y.prototype.addFold=function(a){if(a.sameRow){if(a.start.row<this.startRow||a.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(a),this.folds.sort(function(d,o){return-d.range.compareEnd(o.start.row,o.start.column)}),this.range.compareEnd(a.start.row,a.start.column)>0?(this.end.row=a.end.row,this.end.column=a.end.column):this.range.compareStart(a.end.row,a.end.column)<0&&(this.start.row=a.start.row,this.start.column=a.start.column)}else if(a.start.row==this.end.row)this.folds.push(a),this.end.row=a.end.row,this.end.column=a.end.column;else if(a.end.row==this.start.row)this.folds.unshift(a),this.start.row=a.start.row,this.start.column=a.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");a.foldLine=this},y.prototype.containsRow=function(a){return a>=this.start.row&&a<=this.end.row},y.prototype.walk=function(a,d,o){var i=0,u=this.folds,c,s,l,h=!0;d==null&&(d=this.end.row,o=this.end.column);for(var m=0;m<u.length;m++){if(c=u[m],s=c.range.compareStart(d,o),s==-1){a(null,d,o,i,h);return}if(l=a(null,c.start.row,c.start.column,i,h),l=!l&&a(c.placeholder,c.start.row,c.start.column,i),l||s===0)return;h=!c.sameRow,i=c.end.column}a(null,d,o,i,h)},y.prototype.getNextFoldTo=function(a,d){for(var o,i,u=0;u<this.folds.length;u++){if(o=this.folds[u],i=o.range.compareEnd(a,d),i==-1)return{fold:o,kind:"after"};if(i===0)return{fold:o,kind:"inside"}}return null},y.prototype.addRemoveChars=function(a,d,o){var i=this.getNextFoldTo(a,d),u,c;if(i){if(u=i.fold,i.kind=="inside"&&u.start.column!=d&&u.start.row!=a)window.console&&window.console.log(a,d,u);else if(u.start.row==a){c=this.folds;var s=c.indexOf(u);for(s===0&&(this.start.column+=o),s;s<c.length;s++){if(u=c[s],u.start.column+=o,!u.sameRow)return;u.end.column+=o}this.end.column+=o}}},y.prototype.split=function(a,d){var o=this.getNextFoldTo(a,d);if(!o||o.kind=="inside")return null;var i=o.fold,u=this.folds,c=this.foldData,s=u.indexOf(i),l=u[s-1];this.end.row=l.end.row,this.end.column=l.end.column,u=u.splice(s,u.length-s);var h=new y(c,u);return c.splice(c.indexOf(this)+1,0,h),h},y.prototype.merge=function(a){for(var d=a.folds,o=0;o<d.length;o++)this.addFold(d[o]);var i=this.foldData;i.splice(i.indexOf(a),1)},y.prototype.toString=function(){var a=[this.range.toString()+": ["];return this.folds.forEach(function(d){a.push("  "+d.toString())}),a.push("]"),a.join(`
`)},y.prototype.idxToPosition=function(a){for(var d=0,o=0;o<this.folds.length;o++){var i=this.folds[o];if(a-=i.start.column-d,a<0)return{row:i.start.row,column:i.start.column+a};if(a-=i.placeholder.length,a<0)return i.start;d=i.end.column}return{row:this.end.row,column:this.end.column+a}},y}();r.FoldLine=g}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,r,p){var f=e("./range").Range,g=f.comparePoints,y=function(){function a(){this.ranges=[],this.$bias=1}return a.prototype.pointIndex=function(d,o,i){for(var u=this.ranges,c=i||0;c<u.length;c++){var s=u[c],l=g(d,s.end);if(!(l>0)){var h=g(d,s.start);return l===0?o&&h!==0?-c-2:c:h>0||h===0&&!o?c:-c-1}}return-c-1},a.prototype.add=function(d){var o=!d.isEmpty(),i=this.pointIndex(d.start,o);i<0&&(i=-i-1);var u=this.pointIndex(d.end,o,i);return u<0?u=-u-1:u++,this.ranges.splice(i,u-i,d)},a.prototype.addList=function(d){for(var o=[],i=d.length;i--;)o.push.apply(o,this.add(d[i]));return o},a.prototype.substractPoint=function(d){var o=this.pointIndex(d);if(o>=0)return this.ranges.splice(o,1)},a.prototype.merge=function(){var d=[],o=this.ranges;o=o.sort(function(l,h){return g(l.start,h.start)});for(var i=o[0],u,c=1;c<o.length;c++){u=i,i=o[c];var s=g(u.end,i.start);s<0||s==0&&!u.isEmpty()&&!i.isEmpty()||(g(u.end,i.end)<0&&(u.end.row=i.end.row,u.end.column=i.end.column),o.splice(c,1),d.push(i),i=u,c--)}return this.ranges=o,d},a.prototype.contains=function(d,o){return this.pointIndex({row:d,column:o})>=0},a.prototype.containsPoint=function(d){return this.pointIndex(d)>=0},a.prototype.rangeAtPoint=function(d){var o=this.pointIndex(d);if(o>=0)return this.ranges[o]},a.prototype.clipRows=function(d,o){var i=this.ranges;if(i[0].start.row>o||i[i.length-1].start.row<d)return[];var u=this.pointIndex({row:d,column:0});u<0&&(u=-u-1);var c=this.pointIndex({row:o,column:0},u);c<0&&(c=-c-1);for(var s=[],l=u;l<c;l++)s.push(i[l]);return s},a.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},a.prototype.attach=function(d){this.session&&this.detach(),this.session=d,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},a.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},a.prototype.$onChange=function(d){for(var o=d.start,i=d.end,u=o.row,c=i.row,s=this.ranges,l=0,h=s.length;l<h;l++){var m=s[l];if(m.end.row>=u)break}if(d.action=="insert")for(var w=c-u,C=-o.column+i.column;l<h;l++){var m=s[l];if(m.start.row>u)break;if(m.start.row==u&&m.start.column>=o.column&&(m.start.column==o.column&&this.$bias<=0||(m.start.column+=C,m.start.row+=w)),m.end.row==u&&m.end.column>=o.column){if(m.end.column==o.column&&this.$bias<0)continue;m.end.column==o.column&&C>0&&l<h-1&&m.end.column>m.start.column&&m.end.column==s[l+1].start.column&&(m.end.column-=C),m.end.column+=C,m.end.row+=w}}else for(var w=u-c,C=o.column-i.column;l<h;l++){var m=s[l];if(m.start.row>c)break;m.end.row<c&&(u<m.end.row||u==m.end.row&&o.column<m.end.column)?(m.end.row=u,m.end.column=o.column):m.end.row==c?m.end.column<=i.column?(w||m.end.column>o.column)&&(m.end.column=o.column,m.end.row=o.row):(m.end.column+=C,m.end.row+=w):m.end.row>c&&(m.end.row+=w),m.start.row<c&&(u<m.start.row||u==m.start.row&&o.column<m.start.column)?(m.start.row=u,m.start.column=o.column):m.start.row==c?m.start.column<=i.column?(w||m.start.column>o.column)&&(m.start.column=o.column,m.start.row=o.row):(m.start.column+=C,m.start.row+=w):m.start.row>c&&(m.start.row+=w)}if(w!=0&&l<h)for(;l<h;l++){var m=s[l];m.start.row+=w,m.end.row+=w}},a}();y.prototype.comparePoints=g,r.RangeList=y}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(e,r,p){var f=this&&this.__extends||function(){var u=function(c,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(l[m]=h[m])},u(c,s)};return function(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");u(c,s);function l(){this.constructor=c}c.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),g=e("../range_list").RangeList,y=function(u){f(c,u);function c(s,l){var h=u.call(this)||this;return h.foldLine=null,h.placeholder=l,h.range=s,h.start=s.start,h.end=s.end,h.sameRow=s.start.row==s.end.row,h.subFolds=h.ranges=[],h}return c.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},c.prototype.setFoldLine=function(s){this.foldLine=s,this.subFolds.forEach(function(l){l.setFoldLine(s)})},c.prototype.clone=function(){var s=this.range.clone(),l=new c(s,this.placeholder);return this.subFolds.forEach(function(h){l.subFolds.push(h.clone())}),l.collapseChildren=this.collapseChildren,l},c.prototype.addSubFold=function(s){if(!this.range.isEqual(s)){d(s,this.start);for(var C=s.start.row,A=s.start.column,l=0,h=-1;l<this.subFolds.length&&(h=this.subFolds[l].range.compare(C,A),h==1);l++);var m=this.subFolds[l],w=0;if(h==0){if(m.range.containsRange(s))return m.addSubFold(s);w=1}for(var C=s.range.end.row,A=s.range.end.column,E=l,h=-1;E<this.subFolds.length&&(h=this.subFolds[E].range.compare(C,A),h==1);E++);h==0&&E++;for(var b=this.subFolds.splice(l,E-l,s),L=h==0?b.length-1:b.length,_=w;_<L;_++)s.addSubFold(b[_]);return s.setFoldLine(this.foldLine),s}},c.prototype.restoreRange=function(s){return i(s,this.start)},c}(g);function a(u,c){u.row-=c.row,u.row==0&&(u.column-=c.column)}function d(u,c){a(u.start,c),a(u.end,c)}function o(u,c){u.row==0&&(u.column+=c.column),u.row+=c.row}function i(u,c){o(u.start,c),o(u.end,c)}r.Fold=y}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(e,r,p){var f=e("../range").Range,g=e("./fold_line").FoldLine,y=e("./fold").Fold,a=e("../token_iterator").TokenIterator,d=e("../mouse/mouse_event").MouseEvent;function o(){this.getFoldAt=function(i,u,c){var s=this.getFoldLine(i);if(!s)return null;for(var l=s.folds,h=0;h<l.length;h++){var m=l[h].range;if(m.contains(i,u)){if(c==1&&m.isEnd(i,u)&&!m.isEmpty())continue;if(c==-1&&m.isStart(i,u)&&!m.isEmpty())continue;return l[h]}}},this.getFoldsInRange=function(i){var u=i.start,c=i.end,s=this.$foldData,l=[];u.column+=1,c.column-=1;for(var h=0;h<s.length;h++){var m=s[h].range.compareRange(i);if(m!=2){if(m==-2)break;for(var w=s[h].folds,C=0;C<w.length;C++){var A=w[C];if(m=A.range.compareRange(i),m==-2)break;if(m==2)continue;if(m==42)break;l.push(A)}}}return u.column-=1,c.column+=1,l},this.getFoldsInRangeList=function(i){if(Array.isArray(i)){var u=[];i.forEach(function(c){u=u.concat(this.getFoldsInRange(c))},this)}else var u=this.getFoldsInRange(i);return u},this.getAllFolds=function(){for(var i=[],u=this.$foldData,c=0;c<u.length;c++)for(var s=0;s<u[c].folds.length;s++)i.push(u[c].folds[s]);return i},this.getFoldStringAt=function(i,u,c,s){if(s=s||this.getFoldLine(i),!s)return null;for(var l={end:{column:0}},h,m,w=0;w<s.folds.length;w++){m=s.folds[w];var C=m.range.compareEnd(i,u);if(C==-1){h=this.getLine(m.start.row).substring(l.end.column,m.start.column);break}else if(C===0)return null;l=m}return h||(h=this.getLine(m.start.row).substring(l.end.column)),c==-1?h.substring(0,u-l.end.column):c==1?h.substring(u-l.end.column):h},this.getFoldLine=function(i,u){var c=this.$foldData,s=0;for(u&&(s=c.indexOf(u)),s==-1&&(s=0),s;s<c.length;s++){var l=c[s];if(l.start.row<=i&&l.end.row>=i)return l;if(l.end.row>i)return null}return null},this.getNextFoldLine=function(i,u){var c=this.$foldData,s=0;for(u&&(s=c.indexOf(u)),s==-1&&(s=0),s;s<c.length;s++){var l=c[s];if(l.end.row>=i)return l}return null},this.getFoldedRowCount=function(i,u){for(var c=this.$foldData,s=u-i+1,l=0;l<c.length;l++){var h=c[l],m=h.end.row,w=h.start.row;if(m>=u){w<u&&(w>=i?s-=u-w:s=0);break}else m>=i&&(w>=i?s-=m-w:s-=m-i+1)}return s},this.$addFoldLine=function(i){return this.$foldData.push(i),this.$foldData.sort(function(u,c){return u.start.row-c.start.row}),i},this.addFold=function(i,u){var c=this.$foldData,s=!1,l;i instanceof y?l=i:(l=new y(u,i),l.collapseChildren=u.collapseChildren),this.$clipRangeToDocument(l.range);var h=l.start.row,m=l.start.column,w=l.end.row,C=l.end.column,A=this.getFoldAt(h,m,1),E=this.getFoldAt(w,C,-1);if(A&&E==A)return A.addSubFold(l);A&&!A.range.isStart(h,m)&&this.removeFold(A),E&&!E.range.isEnd(w,C)&&this.removeFold(E);var b=this.getFoldsInRange(l.range);b.length>0&&(this.removeFolds(b),l.collapseChildren||b.forEach(function(T){l.addSubFold(T)}));for(var L=0;L<c.length;L++){var _=c[L];if(w==_.start.row){_.addFold(l),s=!0;break}else if(h==_.end.row){if(_.addFold(l),s=!0,!l.sameRow){var k=c[L+1];if(k&&k.start.row==w){_.merge(k);break}}break}else if(w<=_.start.row)break}return s||(_=this.$addFoldLine(new g(this.$foldData,l))),this.$useWrapMode?this.$updateWrapData(_.start.row,_.start.row):this.$updateRowLengthCache(_.start.row,_.start.row),this.$modified=!0,this._signal("changeFold",{data:l,action:"add"}),l},this.addFolds=function(i){i.forEach(function(u){this.addFold(u)},this)},this.removeFold=function(i){var u=i.foldLine,c=u.start.row,s=u.end.row,l=this.$foldData,h=u.folds;if(h.length==1)l.splice(l.indexOf(u),1);else if(u.range.isEnd(i.end.row,i.end.column))h.pop(),u.end.row=h[h.length-1].end.row,u.end.column=h[h.length-1].end.column;else if(u.range.isStart(i.start.row,i.start.column))h.shift(),u.start.row=h[0].start.row,u.start.column=h[0].start.column;else if(i.sameRow)h.splice(h.indexOf(i),1);else{var m=u.split(i.start.row,i.start.column);h=m.folds,h.shift(),m.start.row=h[0].start.row,m.start.column=h[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(c,s):this.$updateRowLengthCache(c,s)),this.$modified=!0,this._signal("changeFold",{data:i,action:"remove"})},this.removeFolds=function(i){for(var u=[],c=0;c<i.length;c++)u.push(i[c]);u.forEach(function(s){this.removeFold(s)},this),this.$modified=!0},this.expandFold=function(i){this.removeFold(i),i.subFolds.forEach(function(u){i.restoreRange(u),this.addFold(u)},this),i.collapseChildren>0&&this.foldAll(i.start.row+1,i.end.row,i.collapseChildren-1),i.subFolds=[]},this.expandFolds=function(i){i.forEach(function(u){this.expandFold(u)},this)},this.unfold=function(i,u){var c,s;if(i==null)c=new f(0,0,this.getLength(),0),u==null&&(u=!0);else if(typeof i=="number")c=new f(i,0,i,this.getLine(i).length);else if("row"in i)c=f.fromPoints(i,i);else{if(Array.isArray(i))return s=[],i.forEach(function(h){s=s.concat(this.unfold(h))},this),s;c=i}s=this.getFoldsInRangeList(c);for(var l=s;s.length==1&&f.comparePoints(s[0].start,c.start)<0&&f.comparePoints(s[0].end,c.end)>0;)this.expandFolds(s),s=this.getFoldsInRangeList(c);if(u!=!1?this.removeFolds(s):this.expandFolds(s),l.length)return l},this.isRowFolded=function(i,u){return!!this.getFoldLine(i,u)},this.getRowFoldEnd=function(i,u){var c=this.getFoldLine(i,u);return c?c.end.row:i},this.getRowFoldStart=function(i,u){var c=this.getFoldLine(i,u);return c?c.start.row:i},this.getFoldDisplayLine=function(i,u,c,s,l){s==null&&(s=i.start.row),l==null&&(l=0),u==null&&(u=i.end.row),c==null&&(c=this.getLine(u).length);var h=this.doc,m="";return i.walk(function(w,C,A,E){if(!(C<s)){if(C==s){if(A<l)return;E=Math.max(l,E)}w!=null?m+=w:m+=h.getLine(C).substring(E,A)}},u,c),m},this.getDisplayLine=function(i,u,c,s){var l=this.getFoldLine(i);if(l)return this.getFoldDisplayLine(l,i,u,c,s);var h;return h=this.doc.getLine(i),h.substring(s||0,u||h.length)},this.$cloneFoldData=function(){var i=[];return i=this.$foldData.map(function(u){var c=u.folds.map(function(s){return s.clone()});return new g(i,c)}),i},this.toggleFold=function(i){var u=this.selection,c=u.getRange(),s,l;if(c.isEmpty()){var h=c.start;if(s=this.getFoldAt(h.row,h.column),s){this.expandFold(s);return}else(l=this.findMatchingBracket(h))?c.comparePoint(l)==1?c.end=l:(c.start=l,c.start.column++,c.end.column--):(l=this.findMatchingBracket({row:h.row,column:h.column+1}))?(c.comparePoint(l)==1?c.end=l:c.start=l,c.start.column++):c=this.getCommentFoldRange(h.row,h.column)||c}else{var m=this.getFoldsInRange(c);if(i&&m.length){this.expandFolds(m);return}else m.length==1&&(s=m[0])}if(s||(s=this.getFoldAt(c.start.row,c.start.column)),s&&s.range.toString()==c.toString()){this.expandFold(s);return}var w="...";if(!c.isMultiLine()){if(w=this.getTextRange(c),w.length<4)return;w=w.trim().substring(0,2)+".."}this.addFold(w,c)},this.getCommentFoldRange=function(i,u,c){var s=new a(this,i,u),l=s.getCurrentToken(),h=l&&l.type;if(l&&/^comment|string/.test(h)){h=h.match(/comment|string/)[0],h=="comment"&&(h+="|doc-start|\\.doc");var m=new RegExp(h),w=new f;if(c!=1){do l=s.stepBackward();while(l&&m.test(l.type));l=s.stepForward()}w.start.row=s.getCurrentTokenRow(),w.start.column=s.getCurrentTokenColumn()+l.value.length,s=new a(this,i,u);var C=this.getState(s.$row);if(c!=-1){var A=-1;do if(l=s.stepForward(),A==-1){var E=this.getState(s.$row);C.toString()!==E.toString()&&(A=s.$row)}else if(s.$row>A)break;while(l&&m.test(l.type));l=s.stepBackward()}else l=s.getCurrentToken();return w.end.row=s.getCurrentTokenRow(),w.end.column=s.getCurrentTokenColumn(),w}},this.foldAll=function(i,u,c,s){c==null&&(c=1e5);var l=this.foldWidgets;if(l){u=u||this.getLength(),i=i||0;for(var h=i;h<u;h++)if(l[h]==null&&(l[h]=this.getFoldWidget(h)),l[h]=="start"&&!(s&&!s(h))){var m=this.getFoldWidgetRange(h);m&&m.isMultiLine()&&m.end.row<=u&&m.start.row>=i&&(h=m.end.row,m.collapseChildren=c,this.addFold("...",m))}}},this.foldToLevel=function(i){for(this.foldAll();i-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var i=this;this.foldAll(null,null,null,function(u){for(var c=i.getTokens(u),s=0;s<c.length;s++){var l=c[s];if(!(l.type=="text"&&/^\s+$/.test(l.value)))return!!/comment/.test(l.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(i){if(!this.$foldStyles[i])throw new Error("invalid fold style: "+i+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=i){this.$foldStyle=i,i=="manual"&&this.unfold();var u=this.$foldMode;this.$setFolding(null),this.$setFolding(u)}},this.$setFolding=function(i){if(this.$foldMode!=i){if(this.$foldMode=i,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!i||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=i.getFoldWidget.bind(i,this,this.$foldStyle),this.getFoldWidgetRange=i.getFoldWidgetRange.bind(i,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(i,u){var c=this.foldWidgets;if(!c||u&&c[i])return{};for(var s=i-1,l;s>=0;){var h=c[s];if(h==null&&(h=c[s]=this.getFoldWidget(s)),h=="start"){var m=this.getFoldWidgetRange(s);if(l||(l=m),m&&m.end.row>=i)break}s--}return{range:s!==-1&&m,firstRange:l}},this.onFoldWidgetClick=function(i,u){u instanceof d&&(u=u.domEvent);var c={children:u.shiftKey,all:u.ctrlKey||u.metaKey,siblings:u.altKey},s=this.$toggleFoldWidget(i,c);if(!s){var l=u.target||u.srcElement;l&&/ace_fold-widget/.test(l.className)&&(l.className+=" ace_invalid")}},this.$toggleFoldWidget=function(i,u){if(this.getFoldWidget){var c=this.getFoldWidget(i),s=this.getLine(i),l=c==="end"?-1:1,h=this.getFoldAt(i,l===-1?0:s.length,l);if(h)return u.children||u.all?this.removeFold(h):this.expandFold(h),h;var m=this.getFoldWidgetRange(i,!0);if(m&&!m.isMultiLine()&&(h=this.getFoldAt(m.start.row,m.start.column,1),h&&m.isEqual(h.range)))return this.removeFold(h),h;if(u.siblings){var w=this.getParentFoldRangeData(i);if(w.range)var C=w.range.start.row+1,A=w.range.end.row;this.foldAll(C,A,u.all?1e4:0)}else u.children?(A=m?m.end.row:this.getLength(),this.foldAll(i+1,A,u.all?1e4:0)):m&&(u.all&&(m.collapseChildren=1e4),this.addFold("...",m));return m}},this.toggleFoldWidget=function(i){var u=this.selection.getCursor().row;u=this.getRowFoldStart(u);var c=this.$toggleFoldWidget(u,{});if(!c){var s=this.getParentFoldRangeData(u,!0);if(c=s.range||s.firstRange,c){u=c.start.row;var l=this.getFoldAt(u,this.getLine(u).length,1);l?this.removeFold(l):this.addFold("...",c)}}},this.updateFoldWidgets=function(i){var u=i.start.row,c=i.end.row-u;if(c===0)this.foldWidgets[u]=null;else if(i.action=="remove")this.foldWidgets.splice(u,c+1,null);else{var s=Array(c+1);s.unshift(u,1),this.foldWidgets.splice.apply(this.foldWidgets,s)}},this.tokenizerUpdateFoldWidgets=function(i){var u=i.data;u.first!=u.last&&this.foldWidgets.length>u.first&&this.foldWidgets.splice(u.first,this.foldWidgets.length)}}r.Folding=o}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,r,p){var f=e("../token_iterator").TokenIterator,g=e("../range").Range;function y(){this.findMatchingBracket=function(a,d){if(a.column==0)return null;var o=d||this.getLine(a.row).charAt(a.column-1);if(o=="")return null;var i=o.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],a):this.$findOpeningBracket(i[2],a):null},this.getBracketRange=function(a){var d=this.getLine(a.row),o=!0,i,u=d.charAt(a.column-1),c=u&&u.match(/([\(\[\{])|([\)\]\}])/);if(c||(u=d.charAt(a.column),a={row:a.row,column:a.column+1},c=u&&u.match(/([\(\[\{])|([\)\]\}])/),o=!1),!c)return null;if(c[1]){var s=this.$findClosingBracket(c[1],a);if(!s)return null;i=g.fromPoints(a,s),o||(i.end.column++,i.start.column--),i.cursor=i.end}else{var s=this.$findOpeningBracket(c[2],a);if(!s)return null;i=g.fromPoints(s,a),o||(i.start.column++,i.end.column--),i.cursor=i.start}return i},this.getMatchingBracketRanges=function(a,d){var o=this.getLine(a.row),i=/([\(\[\{])|([\)\]\}])/,u=!d&&o.charAt(a.column-1),c=u&&u.match(i);if(c||(u=(d===void 0||d)&&o.charAt(a.column),a={row:a.row,column:a.column+1},c=u&&u.match(i)),!c)return null;var s=new g(a.row,a.column-1,a.row,a.column),l=c[1]?this.$findClosingBracket(c[1],a):this.$findOpeningBracket(c[2],a);if(!l)return[s];var h=new g(l.row,l.column,l.row,l.column+1);return[s,h]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(a,d,o){var i=this.$brackets[a],u=1,c=new f(this,d.row,d.column),s=c.getCurrentToken();if(s||(s=c.stepForward()),!!s){o||(o=new RegExp("(\\.?"+s.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var l=d.column-c.getCurrentTokenColumn()-2,h=s.value;;){for(;l>=0;){var m=h.charAt(l);if(m==i){if(u-=1,u==0)return{row:c.getCurrentTokenRow(),column:l+c.getCurrentTokenColumn()}}else m==a&&(u+=1);l-=1}do s=c.stepBackward();while(s&&!o.test(s.type));if(s==null)break;h=s.value,l=h.length-1}return null}},this.$findClosingBracket=function(a,d,o){var i=this.$brackets[a],u=1,c=new f(this,d.row,d.column),s=c.getCurrentToken();if(s||(s=c.stepForward()),!!s){o||(o=new RegExp("(\\.?"+s.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var l=d.column-c.getCurrentTokenColumn();;){for(var h=s.value,m=h.length;l<m;){var w=h.charAt(l);if(w==i){if(u-=1,u==0)return{row:c.getCurrentTokenRow(),column:l+c.getCurrentTokenColumn()}}else w==a&&(u+=1);l+=1}do s=c.stepForward();while(s&&!o.test(s.type));if(s==null)break;l=0}return null}},this.getMatchingTags=function(a){var d=new f(this,a.row,a.column),o=this.$findTagName(d);if(o){var i=d.stepBackward();return i.value==="<"?this.$findClosingTag(d,o):this.$findOpeningTag(d,o)}},this.$findTagName=function(a){var d=a.getCurrentToken(),o=!1,i=!1;if(d&&d.type.indexOf("tag-name")===-1)do i?d=a.stepBackward():d=a.stepForward(),d&&(d.value==="/>"?i=!0:d.type.indexOf("tag-name")!==-1&&(o=!0));while(d&&!o);return d},this.$findClosingTag=function(a,d){var o,i=d.value,u=d.value,c=0,s=new g(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);d=a.stepForward();var l=new g(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+d.value.length),h=!1;do{if(o=d,o.type.indexOf("tag-close")!==-1&&!h){var m=new g(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);h=!0}if(d=a.stepForward(),d){if(d.value===">"&&!h){var m=new g(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);h=!0}if(d.type.indexOf("tag-name")!==-1){if(i=d.value,u===i){if(o.value==="<")c++;else if(o.value==="</"&&(c--,c<0)){a.stepBackward();var w=new g(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+2);d=a.stepForward();var C=new g(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+d.value.length);if(d.type.indexOf("tag-close")===-1&&(d=a.stepForward()),d&&d.value===">")var A=new g(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);else return}}}else if(u===i&&d.value==="/>"&&(c--,c<0))var w=new g(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+2),C=w,A=C,m=new g(l.end.row,l.end.column,l.end.row,l.end.column+1)}}while(d&&c>=0);if(s&&m&&w&&A&&l&&C)return{openTag:new g(s.start.row,s.start.column,m.end.row,m.end.column),closeTag:new g(w.start.row,w.start.column,A.end.row,A.end.column),openTagName:l,closeTagName:C}},this.$findOpeningTag=function(a,d){var o=a.getCurrentToken(),i=d.value,u=0,c=a.getCurrentTokenRow(),s=a.getCurrentTokenColumn(),l=s+2,h=new g(c,s,c,l);a.stepForward();var m=new g(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+d.value.length);if(d.type.indexOf("tag-close")===-1&&(d=a.stepForward()),!(!d||d.value!==">")){var w=new g(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);a.stepBackward(),a.stepBackward();do if(d=o,c=a.getCurrentTokenRow(),s=a.getCurrentTokenColumn(),l=s+d.value.length,o=a.stepBackward(),d){if(d.type.indexOf("tag-name")!==-1){if(i===d.value)if(o.value==="<"){if(u++,u>0){var C=new g(c,s,c,l),A=new g(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);do d=a.stepForward();while(d&&d.value!==">");var E=new g(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1)}}else o.value==="</"&&u--}else if(d.value==="/>"){for(var b=0,L=o;L;){if(L.type.indexOf("tag-name")!==-1&&L.value===i){u--;break}else if(L.value==="<")break;L=a.stepBackward(),b++}for(var _=0;_<b;_++)a.stepForward()}}while(o&&u<=0);if(A&&E&&h&&w&&C&&m)return{openTag:new g(A.start.row,A.start.column,E.end.row,E.end.column),closeTag:new g(h.start.row,h.start.column,w.end.row,w.end.column),openTagName:C,closeTagName:m}}}}r.BracketMatch=y}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/line_widgets","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,r,p){var f=e("./lib/oop"),g=e("./lib/lang"),y=e("./bidihandler").BidiHandler,a=e("./config"),d=e("./lib/event_emitter").EventEmitter,o=e("./selection").Selection,i=e("./mode/text").Mode,u=e("./range").Range,c=e("./line_widgets").LineWidgets,s=e("./document").Document,l=e("./background_tokenizer").BackgroundTokenizer,h=e("./search_highlight").SearchHighlight,m=e("./undomanager").UndoManager,w=function(){function $(v,S){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$editor=null,this.prevOp={},this.$foldData=[],this.id="session"+ ++$.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new l(new i().getTokenizer(),this);var x=this;this.bgTokenizer.on("update",function(M){x._signal("tokenizerUpdate",M)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof v!="object"||!v.getLine)&&(v=new s(v)),this.setDocument(v),this.selection=new o(this),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.selection.on("changeCursor",this.$onSelectionChange),this.$bidiHandler=new y(this),a.resetOptions(this),this.setMode(S),a._signal("session",this),this.destroyed=!1,this.$initOperationListeners()}return $.prototype.$initOperationListeners=function(){var v=this;this.curOp=null,this.on("change",function(){v.curOp||(v.startOperation(),v.curOp.selectionBefore=v.$lastSel),v.curOp.docChanged=!0},!0),this.on("changeSelection",function(){v.curOp||(v.startOperation(),v.curOp.selectionBefore=v.$lastSel),v.curOp.selectionChanged=!0},!0),this.$operationResetTimer=g.delayedCall(this.endOperation.bind(this,!0))},$.prototype.startOperation=function(v){if(this.curOp){if(!v||this.curOp.command)return;this.prevOp=this.curOp}v||(v={}),this.$operationResetTimer.schedule(),this.curOp={command:v.command||{},args:v.args},this.curOp.selectionBefore=this.selection.toJSON(),this._signal("startOperation",v)},$.prototype.endOperation=function(v){if(this.curOp){if(v&&v.returnValue===!1){this.curOp=null,this._signal("endOperation",v);return}if(v==!0&&this.curOp.command&&this.curOp.command.name=="mouse")return;var S=this.selection.toJSON();this.curOp.selectionAfter=S,this.$lastSel=this.selection.toJSON(),this.getUndoManager().addSelection(S),this._signal("beforeEndOperation"),this.prevOp=this.curOp,this.curOp=null,this._signal("endOperation",v)}},$.prototype.setDocument=function(v){this.doc&&this.doc.off("change",this.$onChange),this.doc=v,v.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},$.prototype.getDocument=function(){return this.doc},Object.defineProperty($.prototype,"widgetManager",{get:function(){var v=new c(this);return this.widgetManager=v,this.$editor&&v.attach(this.$editor),v},set:function(v){Object.defineProperty(this,"widgetManager",{writable:!0,enumerable:!0,configurable:!0,value:v})},enumerable:!1,configurable:!0}),$.prototype.$resetRowCache=function(v){if(!v){this.$docRowCache=[],this.$screenRowCache=[];return}var S=this.$docRowCache.length,x=this.$getRowCacheIndex(this.$docRowCache,v)+1;S>x&&(this.$docRowCache.splice(x,S),this.$screenRowCache.splice(x,S))},$.prototype.$getRowCacheIndex=function(v,S){for(var x=0,M=v.length-1;x<=M;){var R=x+M>>1,I=v[R];if(S>I)x=R+1;else if(S<I)M=R-1;else return R}return x-1},$.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},$.prototype.onChangeFold=function(v){var S=v.data;this.$resetRowCache(S.start.row)},$.prototype.onChange=function(v){this.$modified=!0,this.$bidiHandler.onChange(v),this.$resetRowCache(v.start.row);var S=this.$updateInternalDataOnChange(v);!this.$fromUndo&&this.$undoManager&&(S&&S.length&&(this.$undoManager.add({action:"removeFolds",folds:S},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(v,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(v),this._signal("change",v)},$.prototype.onSelectionChange=function(){this._signal("changeSelection")},$.prototype.setValue=function(v){this.doc.setValue(v),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},$.fromJSON=function(v){typeof v=="string"&&(v=JSON.parse(v));var S=new m;S.$undoStack=v.history.undo,S.$redoStack=v.history.redo,S.mark=v.history.mark,S.$rev=v.history.rev;var x=new $(v.value);return v.folds.forEach(function(M){x.addFold("...",u.fromPoints(M.start,M.end))}),x.setAnnotations(v.annotations),x.setBreakpoints(v.breakpoints),x.setMode(v.mode),x.setScrollLeft(v.scrollLeft),x.setScrollTop(v.scrollTop),x.setUndoManager(S),x.selection.fromJSON(v.selection),x},$.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(v){return v.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},$.prototype.toString=function(){return this.doc.getValue()},$.prototype.getSelection=function(){return this.selection},$.prototype.getState=function(v){return this.bgTokenizer.getState(v)},$.prototype.getTokens=function(v){return this.bgTokenizer.getTokens(v)},$.prototype.getTokenAt=function(v,S){var x=this.bgTokenizer.getTokens(v),M,R=0;if(S==null){var I=x.length-1;R=this.getLine(v).length}else for(var I=0;I<x.length&&(R+=x[I].value.length,!(R>=S));I++);return M=x[I],M?(M.index=I,M.start=R-M.value.length,M):null},$.prototype.setUndoManager=function(v){if(this.$undoManager=v,this.$informUndoManager&&this.$informUndoManager.cancel(),v){var S=this;v.addSession(this),this.$syncInformUndoManager=function(){S.$informUndoManager.cancel(),S.mergeUndoDeltas=!1},this.$informUndoManager=g.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},$.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},$.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},$.prototype.getTabString=function(){return this.getUseSoftTabs()?g.stringRepeat(" ",this.getTabSize()):"	"},$.prototype.setUseSoftTabs=function(v){this.setOption("useSoftTabs",v)},$.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},$.prototype.setTabSize=function(v){this.setOption("tabSize",v)},$.prototype.getTabSize=function(){return this.$tabSize},$.prototype.isTabStop=function(v){return this.$useSoftTabs&&v.column%this.$tabSize===0},$.prototype.setNavigateWithinSoftTabs=function(v){this.setOption("navigateWithinSoftTabs",v)},$.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},$.prototype.setOverwrite=function(v){this.setOption("overwrite",v)},$.prototype.getOverwrite=function(){return this.$overwrite},$.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},$.prototype.addGutterDecoration=function(v,S){this.$decorations[v]||(this.$decorations[v]=""),this.$decorations[v]+=" "+S,this._signal("changeBreakpoint",{})},$.prototype.removeGutterDecoration=function(v,S){this.$decorations[v]=(this.$decorations[v]||"").replace(" "+S,""),this._signal("changeBreakpoint",{})},$.prototype.getBreakpoints=function(){return this.$breakpoints},$.prototype.setBreakpoints=function(v){this.$breakpoints=[];for(var S=0;S<v.length;S++)this.$breakpoints[v[S]]="ace_breakpoint";this._signal("changeBreakpoint",{})},$.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},$.prototype.setBreakpoint=function(v,S){S===void 0&&(S="ace_breakpoint"),S?this.$breakpoints[v]=S:delete this.$breakpoints[v],this._signal("changeBreakpoint",{})},$.prototype.clearBreakpoint=function(v){delete this.$breakpoints[v],this._signal("changeBreakpoint",{})},$.prototype.addMarker=function(v,S,x,M){var R=this.$markerId++,I={range:v,type:x||"line",renderer:typeof x=="function"?x:null,clazz:S,inFront:!!M,id:R};return M?(this.$frontMarkers[R]=I,this._signal("changeFrontMarker")):(this.$backMarkers[R]=I,this._signal("changeBackMarker")),R},$.prototype.addDynamicMarker=function(v,S){if(v.update){var x=this.$markerId++;return v.id=x,v.inFront=!!S,S?(this.$frontMarkers[x]=v,this._signal("changeFrontMarker")):(this.$backMarkers[x]=v,this._signal("changeBackMarker")),v}},$.prototype.removeMarker=function(v){var S=this.$frontMarkers[v]||this.$backMarkers[v];if(S){var x=S.inFront?this.$frontMarkers:this.$backMarkers;delete x[v],this._signal(S.inFront?"changeFrontMarker":"changeBackMarker")}},$.prototype.getMarkers=function(v){return v?this.$frontMarkers:this.$backMarkers},$.prototype.highlight=function(v){if(!this.$searchHighlight){var S=new h(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(S)}this.$searchHighlight.setRegexp(v)},$.prototype.highlightLines=function(v,S,x,M){typeof S!="number"&&(x=S,S=v),x||(x="ace_step");var R=new u(v,0,S,1/0);return R.id=this.addMarker(R,x,"fullLine",M),R},$.prototype.setAnnotations=function(v){this.$annotations=v,this._signal("changeAnnotation",{})},$.prototype.getAnnotations=function(){return this.$annotations||[]},$.prototype.clearAnnotations=function(){this.setAnnotations([])},$.prototype.$detectNewLine=function(v){var S=v.match(/^.*?(\r?\n)/m);S?this.$autoNewLine=S[1]:this.$autoNewLine=`
`},$.prototype.getWordRange=function(v,S){var x=this.getLine(v),M=!1;if(S>0&&(M=!!x.charAt(S-1).match(this.tokenRe)),M||(M=!!x.charAt(S).match(this.tokenRe)),M)var R=this.tokenRe;else if(/^\s+$/.test(x.slice(S-1,S+1)))var R=/\s/;else var R=this.nonTokenRe;var I=S;if(I>0){do I--;while(I>=0&&x.charAt(I).match(R));I++}for(var D=S;D<x.length&&x.charAt(D).match(R);)D++;return new u(v,I,v,D)},$.prototype.getAWordRange=function(v,S){for(var x=this.getWordRange(v,S),M=this.getLine(x.end.row);M.charAt(x.end.column).match(/[ \t]/);)x.end.column+=1;return x},$.prototype.setNewLineMode=function(v){this.doc.setNewLineMode(v)},$.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},$.prototype.setUseWorker=function(v){this.setOption("useWorker",v)},$.prototype.getUseWorker=function(){return this.$useWorker},$.prototype.onReloadTokenizer=function(v){var S=v.data;this.bgTokenizer.start(S.first),this._signal("tokenizerUpdate",v)},$.prototype.setMode=function(v,S){if(v&&typeof v=="object"){if(v.getTokenizer)return this.$onChangeMode(v);var x=v,M=x.path}else M=v||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new i),this.$modes[M]&&!x){this.$onChangeMode(this.$modes[M]),S&&S();return}this.$modeId=M,a.loadModule(["mode",M],(function(R){if(this.$modeId!==M)return S&&S();this.$modes[M]&&!x?this.$onChangeMode(this.$modes[M]):R&&R.Mode&&(R=new R.Mode(x),x||(this.$modes[M]=R,R.$id=M),this.$onChangeMode(R)),S&&S()}).bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},$.prototype.$onChangeMode=function(v,S){if(S||(this.$modeId=v.$id),this.$mode!==v){var x=this.$mode;this.$mode=v,this.$stopWorker(),this.$useWorker&&this.$startWorker();var M=v.getTokenizer();if(M.on!==void 0){var R=this.onReloadTokenizer.bind(this);M.on("update",R)}this.bgTokenizer.setTokenizer(M),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=v.tokenRe,this.nonTokenRe=v.nonTokenRe,S||(v.attachToSession&&v.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(v.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:x,mode:v}))}},$.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},$.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(v){a.warn("Could not load worker",v),this.$worker=null}},$.prototype.getMode=function(){return this.$mode},$.prototype.setScrollTop=function(v){this.$scrollTop===v||isNaN(v)||(this.$scrollTop=v,this._signal("changeScrollTop",v))},$.prototype.getScrollTop=function(){return this.$scrollTop},$.prototype.setScrollLeft=function(v){this.$scrollLeft===v||isNaN(v)||(this.$scrollLeft=v,this._signal("changeScrollLeft",v))},$.prototype.getScrollLeft=function(){return this.$scrollLeft},$.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},$.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var v=0;return this.lineWidgets.forEach(function(S){S&&S.screenWidth>v&&(v=S.screenWidth)}),this.lineWidgetWidth=v},$.prototype.$computeWidth=function(v){if(this.$modified||v){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var S=this.doc.getAllLines(),x=this.$rowLengthCache,M=0,R=0,I=this.$foldData[R],D=I?I.start.row:1/0,N=S.length,B=0;B<N;B++){if(B>D){if(B=I.end.row+1,B>=N)break;I=this.$foldData[R++],D=I?I.start.row:1/0}x[B]==null&&(x[B]=this.$getStringScreenWidth(S[B])[0]),x[B]>M&&(M=x[B])}this.screenWidth=M}},$.prototype.getLine=function(v){return this.doc.getLine(v)},$.prototype.getLines=function(v,S){return this.doc.getLines(v,S)},$.prototype.getLength=function(){return this.doc.getLength()},$.prototype.getTextRange=function(v){return this.doc.getTextRange(v||this.selection.getRange())},$.prototype.insert=function(v,S){return this.doc.insert(v,S)},$.prototype.remove=function(v){return this.doc.remove(v)},$.prototype.removeFullLines=function(v,S){return this.doc.removeFullLines(v,S)},$.prototype.undoChanges=function(v,S){if(v.length){this.$fromUndo=!0;for(var x=v.length-1;x!=-1;x--){var M=v[x];M.action=="insert"||M.action=="remove"?this.doc.revertDelta(M):M.folds&&this.addFolds(M.folds)}!S&&this.$undoSelect&&(v.selectionBefore?this.selection.fromJSON(v.selectionBefore):this.selection.setRange(this.$getUndoSelection(v,!0))),this.$fromUndo=!1}},$.prototype.redoChanges=function(v,S){if(v.length){this.$fromUndo=!0;for(var x=0;x<v.length;x++){var M=v[x];(M.action=="insert"||M.action=="remove")&&this.doc.$safeApplyDelta(M)}!S&&this.$undoSelect&&(v.selectionAfter?this.selection.fromJSON(v.selectionAfter):this.selection.setRange(this.$getUndoSelection(v,!1))),this.$fromUndo=!1}},$.prototype.setUndoSelect=function(v){this.$undoSelect=v},$.prototype.$getUndoSelection=function(v,S){function x(N){return S?N.action!=="insert":N.action==="insert"}for(var M,R,I=0;I<v.length;I++){var D=v[I];if(D.start){if(!M){x(D)?M=u.fromPoints(D.start,D.end):M=u.fromPoints(D.start,D.start);continue}x(D)?(R=D.start,M.compare(R.row,R.column)==-1&&M.setStart(R),R=D.end,M.compare(R.row,R.column)==1&&M.setEnd(R)):(R=D.start,M.compare(R.row,R.column)==-1&&(M=u.fromPoints(D.start,D.start)))}}return M},$.prototype.replace=function(v,S){return this.doc.replace(v,S)},$.prototype.moveText=function(v,S,x){var M=this.getTextRange(v),R=this.getFoldsInRange(v),I=u.fromPoints(S,S);if(!x){this.remove(v);var D=v.start.row-v.end.row,N=D?-v.end.column:v.start.column-v.end.column;N&&(I.start.row==v.end.row&&I.start.column>v.end.column&&(I.start.column+=N),I.end.row==v.end.row&&I.end.column>v.end.column&&(I.end.column+=N)),D&&I.start.row>=v.end.row&&(I.start.row+=D,I.end.row+=D)}if(I.end=this.insert(I.start,M),R.length){var B=v.start,W=I.start,D=W.row-B.row,N=W.column-B.column;this.addFolds(R.map(function(z){return z=z.clone(),z.start.row==B.row&&(z.start.column+=N),z.end.row==B.row&&(z.end.column+=N),z.start.row+=D,z.end.row+=D,z}))}return I},$.prototype.indentRows=function(v,S,x){x=x.replace(/\t/g,this.getTabString());for(var M=v;M<=S;M++)this.doc.insertInLine({row:M,column:0},x)},$.prototype.outdentRows=function(v){for(var S=v.collapseRows(),x=new u(0,0,0,0),M=this.getTabSize(),R=S.start.row;R<=S.end.row;++R){var I=this.getLine(R);x.start.row=R,x.end.row=R;for(var D=0;D<M&&I.charAt(D)==" ";++D);D<M&&I.charAt(D)=="	"?(x.start.column=D,x.end.column=D+1):(x.start.column=0,x.end.column=D),this.remove(x)}},$.prototype.$moveLines=function(v,S,x){if(v=this.getRowFoldStart(v),S=this.getRowFoldEnd(S),x<0){var M=this.getRowFoldStart(v+x);if(M<0)return 0;var R=M-v}else if(x>0){var M=this.getRowFoldEnd(S+x);if(M>this.doc.getLength()-1)return 0;var R=M-S}else{v=this.$clipRowToDocument(v),S=this.$clipRowToDocument(S);var R=S-v+1}var I=new u(v,0,S,Number.MAX_VALUE),D=this.getFoldsInRange(I).map(function(B){return B=B.clone(),B.start.row+=R,B.end.row+=R,B}),N=x==0?this.doc.getLines(v,S):this.doc.removeFullLines(v,S);return this.doc.insertFullLines(v+R,N),D.length&&this.addFolds(D),R},$.prototype.moveLinesUp=function(v,S){return this.$moveLines(v,S,-1)},$.prototype.moveLinesDown=function(v,S){return this.$moveLines(v,S,1)},$.prototype.duplicateLines=function(v,S){return this.$moveLines(v,S,0)},$.prototype.$clipRowToDocument=function(v){return Math.max(0,Math.min(v,this.doc.getLength()-1))},$.prototype.$clipColumnToRow=function(v,S){return S<0?0:Math.min(this.doc.getLine(v).length,S)},$.prototype.$clipPositionToDocument=function(v,S){if(S=Math.max(0,S),v<0)v=0,S=0;else{var x=this.doc.getLength();v>=x?(v=x-1,S=this.doc.getLine(x-1).length):S=Math.min(this.doc.getLine(v).length,S)}return{row:v,column:S}},$.prototype.$clipRangeToDocument=function(v){v.start.row<0?(v.start.row=0,v.start.column=0):v.start.column=this.$clipColumnToRow(v.start.row,v.start.column);var S=this.doc.getLength()-1;return v.end.row>S?(v.end.row=S,v.end.column=this.doc.getLine(S).length):v.end.column=this.$clipColumnToRow(v.end.row,v.end.column),v},$.prototype.setUseWrapMode=function(v){if(v!=this.$useWrapMode){if(this.$useWrapMode=v,this.$modified=!0,this.$resetRowCache(0),v){var S=this.getLength();this.$wrapData=Array(S),this.$updateWrapData(0,S-1)}this._signal("changeWrapMode")}},$.prototype.getUseWrapMode=function(){return this.$useWrapMode},$.prototype.setWrapLimitRange=function(v,S){(this.$wrapLimitRange.min!==v||this.$wrapLimitRange.max!==S)&&(this.$wrapLimitRange={min:v,max:S},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},$.prototype.adjustWrapLimit=function(v,S){var x=this.$wrapLimitRange;x.max<0&&(x={min:S,max:S});var M=this.$constrainWrapLimit(v,x.min,x.max);return M!=this.$wrapLimit&&M>1?(this.$wrapLimit=M,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},$.prototype.$constrainWrapLimit=function(v,S,x){return S&&(v=Math.max(S,v)),x&&(v=Math.min(x,v)),v},$.prototype.getWrapLimit=function(){return this.$wrapLimit},$.prototype.setWrapLimit=function(v){this.setWrapLimitRange(v,v)},$.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},$.prototype.$updateInternalDataOnChange=function(v){var S=this.$useWrapMode,x=v.action,M=v.start,R=v.end,I=M.row,D=R.row,N=D-I,B=null;if(this.$updating=!0,N!=0)if(x==="remove"){this[S?"$wrapData":"$rowLengthCache"].splice(I,N);var W=this.$foldData;B=this.getFoldsInRange(v),this.removeFolds(B);var F=this.getFoldLine(R.row),H=0;if(F){F.addRemoveChars(R.row,R.column,M.column-R.column),F.shiftRow(-N);var z=this.getFoldLine(I);z&&z!==F&&(z.merge(F),F=z),H=W.indexOf(F)+1}for(H;H<W.length;H++){var F=W[H];F.start.row>=R.row&&F.shiftRow(-N)}D=I}else{var P=Array(N);P.unshift(I,0);var U=S?this.$wrapData:this.$rowLengthCache;U.splice.apply(U,P);var W=this.$foldData,F=this.getFoldLine(I),H=0;if(F){var G=F.range.compareInside(M.row,M.column);G==0?(F=F.split(M.row,M.column),F&&(F.shiftRow(N),F.addRemoveChars(D,0,R.column-M.column))):G==-1&&(F.addRemoveChars(I,0,R.column-M.column),F.shiftRow(N)),H=W.indexOf(F)+1}for(H;H<W.length;H++){var F=W[H];F.start.row>=I&&F.shiftRow(N)}}else{N=Math.abs(v.start.column-v.end.column),x==="remove"&&(B=this.getFoldsInRange(v),this.removeFolds(B),N=-N);var F=this.getFoldLine(I);F&&F.addRemoveChars(I,M.column,N)}return S&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,S?this.$updateWrapData(I,D):this.$updateRowLengthCache(I,D),B},$.prototype.$updateRowLengthCache=function(v,S){this.$rowLengthCache[v]=null,this.$rowLengthCache[S]=null},$.prototype.$updateWrapData=function(v,S){var x=this.doc.getAllLines(),M=this.getTabSize(),R=this.$wrapData,I=this.$wrapLimit,D,N,B=v;for(S=Math.min(S,x.length-1);B<=S;)N=this.getFoldLine(B,N),N?(D=[],N.walk((function(W,F,H,z){var P;if(W!=null){P=this.$getDisplayTokens(W,D.length),P[0]=E;for(var U=1;U<P.length;U++)P[U]=b}else P=this.$getDisplayTokens(x[F].substring(z,H),D.length);D=D.concat(P)}).bind(this),N.end.row,x[N.end.row].length+1),R[N.start.row]=this.$computeWrapSplits(D,I,M),B=N.end.row+1):(D=this.$getDisplayTokens(x[B]),R[B]=this.$computeWrapSplits(D,I,M),B++)},$.prototype.$computeWrapSplits=function(v,S,x){if(v.length==0)return[];var M=[],R=v.length,I=0,D=0,N=this.$wrapAsCode,B=this.$indentedSoftWrap,W=S<=Math.max(2*x,8)||B===!1?0:Math.floor(S/2);function F(){var G=0;if(W===0)return G;if(B)for(var K=0;K<v.length;K++){var V=v[K];if(V==_)G+=1;else if(V==k)G+=x;else{if(V==T)continue;break}}return N&&B!==!1&&(G+=x),Math.min(G,W)}function H(G){for(var K=G-I,V=I;V<G;V++){var Y=v[V];(Y===12||Y===2)&&(K-=1)}M.length||(z=F(),M.indent=z),D+=K,M.push(D),I=G}for(var z=0;R-I>S-z;){var P=I+S-z;if(v[P-1]>=_&&v[P]>=_){H(P);continue}if(v[P]==E||v[P]==b){for(P;P!=I-1&&v[P]!=E;P--);if(P>I){H(P);continue}for(P=I+S,P;P<v.length&&v[P]==b;P++);if(P==v.length)break;H(P);continue}for(var U=Math.max(P-(S-(S>>2)),I-1);P>U&&v[P]<E;)P--;if(N){for(;P>U&&v[P]<E;)P--;for(;P>U&&v[P]==L;)P--}else for(;P>U&&v[P]<_;)P--;if(P>U){H(++P);continue}P=I+S,v[P]==A&&P--,H(P-z)}return M},$.prototype.$getDisplayTokens=function(v,S){var x=[],M;S=S||0;for(var R=0;R<v.length;R++){var I=v.charCodeAt(R);if(I==9){M=this.getScreenTabSize(x.length+S),x.push(k);for(var D=1;D<M;D++)x.push(T)}else I==32?x.push(_):I>39&&I<48||I>57&&I<64?x.push(L):I>=4352&&O(I)?x.push(C,A):x.push(C)}return x},$.prototype.$getStringScreenWidth=function(v,S,x){if(S==0)return[0,0];S==null&&(S=1/0),x=x||0;var M,R;for(R=0;R<v.length&&(M=v.charCodeAt(R),M==9?x+=this.getScreenTabSize(x):M>=4352&&O(M)?x+=2:x+=1,!(x>S));R++);return[x,R]},$.prototype.getRowLength=function(v){var S=1;return this.lineWidgets&&(S+=this.lineWidgets[v]&&this.lineWidgets[v].rowCount||0),!this.$useWrapMode||!this.$wrapData[v]?S:this.$wrapData[v].length+S},$.prototype.getRowLineCount=function(v){return!this.$useWrapMode||!this.$wrapData[v]?1:this.$wrapData[v].length+1},$.prototype.getRowWrapIndent=function(v){if(this.$useWrapMode){var S=this.screenToDocumentPosition(v,Number.MAX_VALUE),x=this.$wrapData[S.row];return x.length&&x[0]<S.column?x.indent:0}else return 0},$.prototype.getScreenLastRowColumn=function(v){var S=this.screenToDocumentPosition(v,Number.MAX_VALUE);return this.documentToScreenColumn(S.row,S.column)},$.prototype.getDocumentLastRowColumn=function(v,S){var x=this.documentToScreenRow(v,S);return this.getScreenLastRowColumn(x)},$.prototype.getDocumentLastRowColumnPosition=function(v,S){var x=this.documentToScreenRow(v,S);return this.screenToDocumentPosition(x,Number.MAX_VALUE/10)},$.prototype.getRowSplitData=function(v){if(this.$useWrapMode)return this.$wrapData[v]},$.prototype.getScreenTabSize=function(v){return this.$tabSize-(v%this.$tabSize|0)},$.prototype.screenToDocumentRow=function(v,S){return this.screenToDocumentPosition(v,S).row},$.prototype.screenToDocumentColumn=function(v,S){return this.screenToDocumentPosition(v,S).column},$.prototype.screenToDocumentPosition=function(v,S,x){if(v<0)return{row:0,column:0};var M,R=0,I=0,D,N=0,B=0,W=this.$screenRowCache,F=this.$getRowCacheIndex(W,v),H=W.length;if(H&&F>=0)var N=W[F],R=this.$docRowCache[F],z=v>W[H-1];else var z=!H;for(var P=this.getLength()-1,U=this.getNextFoldLine(R),G=U?U.start.row:1/0;N<=v&&(B=this.getRowLength(R),!(N+B>v||R>=P));)N+=B,R++,R>G&&(R=U.end.row+1,U=this.getNextFoldLine(R,U),G=U?U.start.row:1/0),z&&(this.$docRowCache.push(R),this.$screenRowCache.push(N));if(U&&U.start.row<=R)M=this.getFoldDisplayLine(U),R=U.start.row;else{if(N+B<=v||R>P)return{row:P,column:this.getLine(P).length};M=this.getLine(R),U=null}var K=0,V=Math.floor(v-N);if(this.$useWrapMode){var Y=this.$wrapData[R];Y&&(D=Y[V],V>0&&Y.length&&(K=Y.indent,I=Y[V-1]||Y[Y.length-1],M=M.substring(I)))}return x!==void 0&&this.$bidiHandler.isBidiRow(N+V,R,V)&&(S=this.$bidiHandler.offsetToCol(x)),I+=this.$getStringScreenWidth(M,S-K)[1],this.$useWrapMode&&I>=D&&(I=D-1),U?U.idxToPosition(I):{row:R,column:I}},$.prototype.documentToScreenPosition=function(v,S){if(typeof S>"u")var x=this.$clipPositionToDocument(v.row,v.column);else x=this.$clipPositionToDocument(v,S);v=x.row,S=x.column;var M=0,R=null,I=null;I=this.getFoldAt(v,S,1),I&&(v=I.start.row,S=I.start.column);var D,N=0,B=this.$docRowCache,W=this.$getRowCacheIndex(B,v),F=B.length;if(F&&W>=0)var N=B[W],M=this.$screenRowCache[W],H=v>B[F-1];else var H=!F;for(var z=this.getNextFoldLine(N),P=z?z.start.row:1/0;N<v;){if(N>=P){if(D=z.end.row+1,D>v)break;z=this.getNextFoldLine(D,z),P=z?z.start.row:1/0}else D=N+1;M+=this.getRowLength(N),N=D,H&&(this.$docRowCache.push(N),this.$screenRowCache.push(M))}var U="";z&&N>=P?(U=this.getFoldDisplayLine(z,v,S),R=z.start.row):(U=this.getLine(v).substring(0,S),R=v);var G=0;if(this.$useWrapMode){var K=this.$wrapData[R];if(K){for(var V=0;U.length>=K[V];)M++,V++;U=U.substring(K[V-1]||0,U.length),G=V>0?K.indent:0}}return this.lineWidgets&&this.lineWidgets[N]&&this.lineWidgets[N].rowsAbove&&(M+=this.lineWidgets[N].rowsAbove),{row:M,column:G+this.$getStringScreenWidth(U)[0]}},$.prototype.documentToScreenColumn=function(v,S){return this.documentToScreenPosition(v,S).column},$.prototype.documentToScreenRow=function(v,S){return this.documentToScreenPosition(v,S).row},$.prototype.getScreenLength=function(){var v=0,S=null;if(this.$useWrapMode)for(var R=this.$wrapData.length,I=0,M=0,S=this.$foldData[M++],D=S?S.start.row:1/0;I<R;){var N=this.$wrapData[I];v+=N?N.length+1:1,I++,I>D&&(I=S.end.row+1,S=this.$foldData[M++],D=S?S.start.row:1/0)}else{v=this.getLength();for(var x=this.$foldData,M=0;M<x.length;M++)S=x[M],v-=S.end.row-S.start.row}return this.lineWidgets&&(v+=this.$getWidgetScreenLength()),v},$.prototype.$setFontMetrics=function(v){this.$enableVarChar&&(this.$getStringScreenWidth=function(S,x,M){if(x===0)return[0,0];x||(x=1/0),M=M||0;var R,I;for(I=0;I<S.length&&(R=S.charAt(I),R==="	"?M+=this.getScreenTabSize(M):M+=v.getCharacterWidth(R),!(M>x));I++);return[M,I]})},$.prototype.getPrecedingCharacter=function(){var v=this.selection.getCursor();if(v.column===0)return v.row===0?"":this.doc.getNewLineCharacter();var S=this.getLine(v.row);return S[v.column-1]},$.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.endOperation(),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection&&(this.selection.off("changeCursor",this.$onSelectionChange),this.selection.off("changeSelection",this.$onSelectionChange)),this.selection.detach()},$}();w.$uid=0,w.prototype.$modes=a.$modes,w.prototype.getValue=w.prototype.toString,w.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},w.prototype.$overwrite=!1,w.prototype.$mode=null,w.prototype.$modeId=null,w.prototype.$scrollTop=0,w.prototype.$scrollLeft=0,w.prototype.$wrapLimit=80,w.prototype.$useWrapMode=!1,w.prototype.$wrapLimitRange={min:null,max:null},w.prototype.lineWidgets=null,w.prototype.isFullWidth=O,f.implement(w.prototype,d);var C=1,A=2,E=3,b=4,L=9,_=10,k=11,T=12;function O($){return $<4352?!1:$>=4352&&$<=4447||$>=4515&&$<=4519||$>=4602&&$<=4607||$>=9001&&$<=9002||$>=11904&&$<=11929||$>=11931&&$<=12019||$>=12032&&$<=12245||$>=12272&&$<=12283||$>=12288&&$<=12350||$>=12353&&$<=12438||$>=12441&&$<=12543||$>=12549&&$<=12589||$>=12593&&$<=12686||$>=12688&&$<=12730||$>=12736&&$<=12771||$>=12784&&$<=12830||$>=12832&&$<=12871||$>=12880&&$<=13054||$>=13056&&$<=19903||$>=19968&&$<=42124||$>=42128&&$<=42182||$>=43360&&$<=43388||$>=44032&&$<=55203||$>=55216&&$<=55238||$>=55243&&$<=55291||$>=63744&&$<=64255||$>=65040&&$<=65049||$>=65072&&$<=65106||$>=65108&&$<=65126||$>=65128&&$<=65131||$>=65281&&$<=65376||$>=65504&&$<=65510}e("./edit_session/folding").Folding.call(w.prototype),e("./edit_session/bracket_match").BracketMatch.call(w.prototype),a.defineOptions(w.prototype,"session",{wrap:{set:function($){if(!$||$=="off"?$=!1:$=="free"?$=!0:$=="printMargin"?$=-1:typeof $=="string"&&($=parseInt($,10)||!1),this.$wrap!=$)if(this.$wrap=$,!$)this.setUseWrapMode(!1);else{var v=typeof $=="number"?$:null;this.setWrapLimitRange(v,v),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function($){$=$=="auto"?this.$mode.type!="text":$!="text",$!=this.$wrapAsCode&&(this.$wrapAsCode=$,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function($){this.$useWorker=$,this.$stopWorker(),$&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function($){$=parseInt($),$>0&&this.$tabSize!==$&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=$,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function($){this.setFoldStyle($)},handlesSet:!0},overwrite:{set:function($){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function($){this.doc.setNewLineMode($)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function($){this.setMode($)},get:function(){return this.$modeId},handlesSet:!0}}),r.EditSession=w}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,r,p){var f=e("./lib/lang"),g=e("./lib/oop"),y=e("./range").Range,a=function(){function o(){this.$options={}}return o.prototype.set=function(i){return g.mixin(this.$options,i),this},o.prototype.getOptions=function(){return f.copyObject(this.$options)},o.prototype.setOptions=function(i){this.$options=i},o.prototype.find=function(i){var u=this.$options,c=this.$matchIterator(i,u);if(!c)return!1;var s=null;return c.forEach(function(l,h,m,w){return s=new y(l,h,m,w),h==w&&u.start&&u.start.start&&u.skipCurrent!=!1&&s.isEqual(u.start)?(s=null,!1):!0}),s},o.prototype.findAll=function(i){var u=this.$options;if(!u.needle)return[];this.$assembleRegExp(u);var c=u.range,s=c?i.getLines(c.start.row,c.end.row):i.doc.getAllLines(),l=[],h=u.re;if(u.$isMultiLine){var m=h.length,w=s.length-m,C;e:for(var A=h.offset||0;A<=w;A++){for(var E=0;E<m;E++)if(s[A+E].search(h[E])==-1)continue e;var b=s[A],L=s[A+m-1],_=b.length-b.match(h[0])[0].length,k=L.match(h[m-1])[0].length;C&&C.end.row===A&&C.end.column>_||(l.push(C=new y(A,_,A+m-1,k)),m>2&&(A=A+m-2))}}else for(var T=0;T<s.length;T++)for(var O=f.getMatchOffsets(s[T],h),E=0;E<O.length;E++){var $=O[E];l.push(new y(T,$.offset,T,$.offset+$.length))}if(c){for(var v=c.start.column,S=c.end.column,T=0,E=l.length-1;T<E&&l[T].start.column<v&&l[T].start.row==0;)T++;for(var x=c.end.row-c.start.row;T<E&&l[E].end.column>S&&l[E].end.row==x;)E--;for(l=l.slice(T,E+1),T=0,E=l.length;T<E;T++)l[T].start.row+=c.start.row,l[T].end.row+=c.start.row}return l},o.prototype.replace=function(i,u){var c=this.$options,s=this.$assembleRegExp(c);if(c.$isMultiLine)return u;if(s){var l=s.exec(i);if(!l||l[0].length!=i.length)return null;if(c.regExp||(u=u.replace(/\$/g,"$$$$")),u=i.replace(s,u),c.preserveCase){u=u.split("");for(var h=Math.min(i.length,i.length);h--;){var m=i[h];m&&m.toLowerCase()!=m?u[h]=u[h].toUpperCase():u[h]=u[h].toLowerCase()}u=u.join("")}return u}},o.prototype.$assembleRegExp=function(i,u){if(i.needle instanceof RegExp)return i.re=i.needle;var c=i.needle;if(!i.needle)return i.re=!1;i.regExp||(c=f.escapeRegExp(c));var s=i.caseSensitive?"gm":"gmi";try{new RegExp(c,"u"),i.$supportsUnicodeFlag=!0,s+="u"}catch{i.$supportsUnicodeFlag=!1}if(i.wholeWord&&(c=d(c,i)),i.$isMultiLine=!u&&/[\n\r]/.test(c),i.$isMultiLine)return i.re=this.$assembleMultilineRegExp(c,s);try{var l=new RegExp(c,s)}catch{l=!1}return i.re=l},o.prototype.$assembleMultilineRegExp=function(i,u){for(var c=i.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),s=[],l=0;l<c.length;l++)try{s.push(new RegExp(c[l],u))}catch{return!1}return s},o.prototype.$matchIterator=function(i,u){var c=this.$assembleRegExp(u);if(!c)return!1;var s=u.backwards==!0,l=u.skipCurrent!=!1,h=c.unicode,m=u.range,w=u.start;w||(w=m?m[s?"end":"start"]:i.selection.getRange()),w.start&&(w=w[l!=s?"end":"start"]);var C=m?m.start.row:0,A=m?m.end.row:i.getLength()-1;if(s)var E=function(_){var k=w.row;if(!L(k,w.column,_)){for(k--;k>=C;k--)if(L(k,Number.MAX_VALUE,_))return;if(u.wrap!=!1){for(k=A,C=w.row;k>=C;k--)if(L(k,Number.MAX_VALUE,_))return}}};else var E=function(k){var T=w.row;if(!L(T,w.column,k)){for(T=T+1;T<=A;T++)if(L(T,0,k))return;if(u.wrap!=!1){for(T=C,A=w.row;T<=A;T++)if(L(T,0,k))return}}};if(u.$isMultiLine)var b=c.length,L=function(_,k,T){var O=s?_-b+1:_;if(!(O<0||O+b>i.getLength())){var $=i.getLine(O),v=$.search(c[0]);if(!(!s&&v<k||v===-1)){for(var S=1;S<b;S++)if($=i.getLine(O+S),$.search(c[S])==-1)return;var x=$.match(c[b-1])[0].length;if(!(s&&x>k)&&T(O,v,O+b-1,x))return!0}}};else if(s)var L=function(k,T,O){var $=i.getLine(k),v=[],S,x=0;for(c.lastIndex=0;S=c.exec($);){var M=S[0].length;if(x=S.index,!M){if(x>=$.length)break;c.lastIndex=x+=f.skipEmptyMatch($,x,h)}if(S.index+M>T)break;v.push(S.index,M)}for(var R=v.length-1;R>=0;R-=2){var I=v[R-1],M=v[R];if(O(k,I,k,I+M))return!0}};else var L=function(k,T,O){var $=i.getLine(k),v,S;for(c.lastIndex=T;S=c.exec($);){var x=S[0].length;if(v=S.index,O(k,v,k,v+x))return!0;if(!x&&(c.lastIndex=v+=f.skipEmptyMatch($,v,h),v>=$.length))return!1}};return{forEach:E}},o}();function d(o,i){var u=f.supportsLookbehind();function c(m,w){w===void 0&&(w=!0);var C=u&&i.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return C.test(m)||i.regExp?u&&i.$supportsUnicodeFlag?w?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var s=Array.from(o),l=s[0],h=s[s.length-1];return c(l)+o+c(h,!1)}r.Search=a}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,r,p){var f=this&&this.__extends||function(){var u=function(c,s){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(l[m]=h[m])},u(c,s)};return function(c,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");u(c,s);function l(){this.constructor=c}c.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),g=e("../lib/keys"),y=e("../lib/useragent"),a=g.KEY_MODS,d=function(){function u(c,s){this.$init(c,s,!1)}return u.prototype.$init=function(c,s,l){this.platform=s||(y.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(c),this.$singleCommand=l},u.prototype.addCommand=function(c){this.commands[c.name]&&this.removeCommand(c),this.commands[c.name]=c,c.bindKey&&this._buildKeyHash(c)},u.prototype.removeCommand=function(c,s){var l=c&&(typeof c=="string"?c:c.name);c=this.commands[l],s||delete this.commands[l];var h=this.commandKeyBinding;for(var m in h){var w=h[m];if(w==c)delete h[m];else if(Array.isArray(w)){var C=w.indexOf(c);C!=-1&&(w.splice(C,1),w.length==1&&(h[m]=w[0]))}}},u.prototype.bindKey=function(c,s,l){if(typeof c=="object"&&c&&(l==null&&(l=c.position),c=c[this.platform]),!!c){if(typeof s=="function")return this.addCommand({exec:s,bindKey:c,name:s.name||c});c.split("|").forEach(function(h){var m="";if(h.indexOf(" ")!=-1){var w=h.split(/\s+/);h=w.pop(),w.forEach(function(E){var b=this.parseKeys(E),L=a[b.hashId]+b.key;m+=(m?" ":"")+L,this._addCommandToBinding(m,"chainKeys")},this),m+=" "}var C=this.parseKeys(h),A=a[C.hashId]+C.key;this._addCommandToBinding(m+A,s,l)},this)}},u.prototype._addCommandToBinding=function(c,s,l){var h=this.commandKeyBinding,m;if(!s)delete h[c];else if(!h[c]||this.$singleCommand)h[c]=s;else{Array.isArray(h[c])?(m=h[c].indexOf(s))!=-1&&h[c].splice(m,1):h[c]=[h[c]],typeof l!="number"&&(l=o(s));var w=h[c];for(m=0;m<w.length;m++){var C=w[m],A=o(C);if(A>l)break}w.splice(m,0,s)}},u.prototype.addCommands=function(c){c&&Object.keys(c).forEach(function(s){var l=c[s];if(l){if(typeof l=="string")return this.bindKey(l,s);typeof l=="function"&&(l={exec:l}),typeof l=="object"&&(l.name||(l.name=s),this.addCommand(l))}},this)},u.prototype.removeCommands=function(c){Object.keys(c).forEach(function(s){this.removeCommand(c[s])},this)},u.prototype.bindKeys=function(c){Object.keys(c).forEach(function(s){this.bindKey(s,c[s])},this)},u.prototype._buildKeyHash=function(c){this.bindKey(c.bindKey,c)},u.prototype.parseKeys=function(c){var s=c.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(A){return A}),l=s.pop(),h=g[l];if(g.FUNCTION_KEYS[h])l=g.FUNCTION_KEYS[h].toLowerCase();else if(s.length){if(s.length==1&&s[0]=="shift")return{key:l.toUpperCase(),hashId:-1}}else return{key:l,hashId:-1};for(var m=0,w=s.length;w--;){var C=g.KEY_MODS[s[w]];if(C==null)return typeof console<"u"&&console.error("invalid modifier "+s[w]+" in "+c),!1;m|=C}return{key:l,hashId:m}},u.prototype.findKeyCommand=function(c,s){var l=a[c]+s;return this.commandKeyBinding[l]},u.prototype.handleKeyboard=function(c,s,l,h){if(!(h<0)){var m=a[s]+l,w=this.commandKeyBinding[m];return c.$keyChain&&(c.$keyChain+=" "+m,w=this.commandKeyBinding[c.$keyChain]||w),w&&(w=="chainKeys"||w[w.length-1]=="chainKeys")?(c.$keyChain=c.$keyChain||m,{command:"null"}):(c.$keyChain&&((!s||s==4)&&l.length==1?c.$keyChain=c.$keyChain.slice(0,-m.length-1):(s==-1||h>0)&&(c.$keyChain="")),{command:w})}},u.prototype.getStatusText=function(c,s){return s.$keyChain||""},u}();function o(u){return typeof u=="object"&&u.bindKey&&u.bindKey.position||(u.isDefault?-100:0)}var i=function(u){f(c,u);function c(s,l){var h=u.call(this,s,l)||this;return h.$singleCommand=!0,h}return c}(d);i.call=function(u,c,s){d.prototype.$init.call(u,c,s,!0)},d.call=function(u,c,s){d.prototype.$init.call(u,c,s,!1)},r.HashHandler=i,r.MultiHashHandler=d}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,r,p){var f=this&&this.__extends||function(){var o=function(i,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,s){c.__proto__=s}||function(c,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(c[l]=s[l])},o(i,u)};return function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");o(i,u);function c(){this.constructor=i}i.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),g=e("../lib/oop"),y=e("../keyboard/hash_handler").MultiHashHandler,a=e("../lib/event_emitter").EventEmitter,d=function(o){f(i,o);function i(u,c){var s=o.call(this,c,u)||this;return s.byName=s.commands,s.setDefaultHandler("exec",function(l){return l.args?l.command.exec(l.editor,l.args,l.event,!1):l.command.exec(l.editor,{},l.event,!0)}),s}return i.prototype.exec=function(u,c,s){if(Array.isArray(u)){for(var l=u.length;l--;)if(this.exec(u[l],c,s))return!0;return!1}if(typeof u=="string"&&(u=this.commands[u]),!this.canExecute(u,c))return!1;var h={editor:c,command:u,args:s};return h.returnValue=this._emit("exec",h),this._signal("afterExec",h),h.returnValue!==!1},i.prototype.canExecute=function(u,c){return typeof u=="string"&&(u=this.commands[u]),!(!u||c&&c.$readOnly&&!u.readOnly||this.$checkCommandState!=!1&&u.isAvailable&&!u.isAvailable(c))},i.prototype.toggleRecording=function(u){if(!this.$inReplay)return u&&u._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=(function(c){this.macro.push([c.command,c.args])}).bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},i.prototype.replay=function(u){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(u);try{this.$inReplay=!0,this.macro.forEach(function(c){typeof c=="string"?this.exec(c,u):this.exec(c[0],u,c[1])},this)}finally{this.$inReplay=!1}}},i.prototype.trimMacro=function(u){return u.map(function(c){return typeof c[0]!="string"&&(c[0]=c[0].name),c[1]||(c=c[0]),c})},i}(y);g.implement(d.prototype,a),r.CommandManager=d}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,r,p){var f=e("../lib/lang"),g=e("../config"),y=e("../range").Range;function a(o,i){return{win:o,mac:i}}r.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:a("Ctrl-,","Command-,"),exec:function(o){g.loadModule("ace/ext/settings_menu",function(i){i.init(o),o.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:a("Alt-E","F4"),exec:function(o){g.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(o,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:a("Alt-Shift-E","Shift-F4"),exec:function(o){g.loadModule("ace/ext/error_marker",function(i){i.showErrorMarker(o,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:a("Ctrl-A","Command-A"),exec:function(o){o.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:a(null,"Ctrl-L"),exec:function(o){o.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:a("Ctrl-L","Command-L"),exec:function(o,i){typeof i=="number"&&!isNaN(i)&&o.gotoLine(i),o.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:a("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(o){o.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:a("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(o){o.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:a("F2","F2"),exec:function(o){o.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:a("Alt-F2","Alt-F2"),exec:function(o){o.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(o){o.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(o){o.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:a("Alt-0","Command-Option-0"),exec:function(o){o.session.foldAll(),o.session.unfold(o.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:a("Alt-Shift-0","Command-Option-Shift-0"),exec:function(o){o.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:a("Ctrl-K","Command-G"),exec:function(o){o.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:a("Ctrl-Shift-K","Command-Shift-G"),exec:function(o){o.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:a("Alt-K","Ctrl-G"),exec:function(o){o.selection.isEmpty()?o.selection.selectWord():o.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:a("Alt-Shift-K","Ctrl-Shift-G"),exec:function(o){o.selection.isEmpty()?o.selection.selectWord():o.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:a("Ctrl-F","Command-F"),exec:function(o){g.loadModule("ace/ext/searchbox",function(i){i.Search(o)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(o){o.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:a("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(o){o.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:a("Ctrl-Home","Command-Home|Command-Up"),exec:function(o){o.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:a("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(o){o.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:a("Up","Up|Ctrl-P"),exec:function(o,i){o.navigateUp(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:a("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(o){o.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:a("Ctrl-End","Command-End|Command-Down"),exec:function(o){o.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:a("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(o){o.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:a("Down","Down|Ctrl-N"),exec:function(o,i){o.navigateDown(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:a("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(o){o.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:a("Ctrl-Left","Option-Left"),exec:function(o){o.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:a("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(o){o.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:a("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(o){o.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:a("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(o){o.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:a("Left","Left|Ctrl-B"),exec:function(o,i){o.navigateLeft(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:a("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(o){o.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:a("Ctrl-Right","Option-Right"),exec:function(o){o.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:a("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(o){o.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:a("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(o){o.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:a("Shift-Right","Shift-Right"),exec:function(o){o.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:a("Right","Right|Ctrl-F"),exec:function(o,i){o.navigateRight(i.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(o){o.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:a(null,"Option-PageDown"),exec:function(o){o.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:a("PageDown","PageDown|Ctrl-V"),exec:function(o){o.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(o){o.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:a(null,"Option-PageUp"),exec:function(o){o.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(o){o.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:a("Ctrl-Up",null),exec:function(o){o.renderer.scrollBy(0,-2*o.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:a("Ctrl-Down",null),exec:function(o){o.renderer.scrollBy(0,2*o.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(o){o.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(o){o.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:a("Ctrl-Alt-E","Command-Option-E"),exec:function(o){o.commands.toggleRecording(o)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:a("Ctrl-Shift-E","Command-Shift-E"),exec:function(o){o.commands.replay(o)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:a("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(o){o.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:a("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(o){o.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:a("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(o){o.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:a(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(o){},readOnly:!0},{name:"cut",description:"Cut",exec:function(o){var i=o.$copyWithEmptySelection&&o.selection.isEmpty(),u=i?o.selection.getLineRange():o.selection.getRange();o._emit("cut",u),u.isEmpty()||o.session.remove(u),o.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(o,i){o.$handlePaste(i)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:a("Ctrl-D","Command-D"),exec:function(o){o.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:a("Ctrl-Shift-D","Command-Shift-D"),exec:function(o){o.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:a("Ctrl-Alt-S","Command-Alt-S"),exec:function(o){o.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:a("Ctrl-/","Command-/"),exec:function(o){o.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:a("Ctrl-Shift-/","Command-Shift-/"),exec:function(o){o.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:a("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(o){o.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:a("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(o){o.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:a("Ctrl-H","Command-Option-F"),exec:function(o){g.loadModule("ace/ext/searchbox",function(i){i.Search(o,!0)})}},{name:"undo",description:"Undo",bindKey:a("Ctrl-Z","Command-Z"),exec:function(o){o.undo()}},{name:"redo",description:"Redo",bindKey:a("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(o){o.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:a("Alt-Shift-Up","Command-Option-Up"),exec:function(o){o.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:a("Alt-Up","Option-Up"),exec:function(o){o.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:a("Alt-Shift-Down","Command-Option-Down"),exec:function(o){o.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:a("Alt-Down","Option-Down"),exec:function(o){o.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:a("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(o){o.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:a("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(o){o.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:a("Shift-Delete",null),exec:function(o){if(o.selection.isEmpty())o.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:a("Alt-Backspace","Command-Backspace"),exec:function(o){o.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:a("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(o){o.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:a("Ctrl-Shift-Backspace",null),exec:function(o){var i=o.selection.getRange();i.start.column=0,o.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:a("Ctrl-Shift-Delete",null),exec:function(o){var i=o.selection.getRange();i.end.column=Number.MAX_VALUE,o.session.remove(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:a("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(o){o.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:a("Ctrl-Delete","Alt-Delete"),exec:function(o){o.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:a("Shift-Tab","Shift-Tab"),exec:function(o){o.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:a("Tab","Tab"),exec:function(o){o.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:a("Ctrl-[","Ctrl-["),exec:function(o){o.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:a("Ctrl-]","Ctrl-]"),exec:function(o){o.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(o,i){o.insert(i)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(o,i){o.insert(f.stringRepeat(i.text||"",i.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:a(null,"Ctrl-O"),exec:function(o){o.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:a("Alt-Shift-X","Ctrl-T"),exec:function(o){o.transposeLetters()},multiSelectAction:function(o){o.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:a("Ctrl-U","Ctrl-U"),exec:function(o){o.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:a("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(o){o.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:a(null,null),exec:function(o){o.autoIndent()},scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:a("Ctrl-Shift-L","Command-Shift-L"),exec:function(o){var i=o.selection.getRange();i.start.column=i.end.column=0,i.end.row++,o.selection.setRange(i,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:a("Ctrl+F3","F3"),exec:function(o){o.openLink()}},{name:"joinlines",description:"Join lines",bindKey:a(null,null),exec:function(o){for(var i=o.selection.isBackwards(),u=i?o.selection.getSelectionLead():o.selection.getSelectionAnchor(),c=i?o.selection.getSelectionAnchor():o.selection.getSelectionLead(),s=o.session.doc.getLine(u.row).length,l=o.session.doc.getTextRange(o.selection.getRange()),h=l.replace(/\n\s*/," ").length,m=o.session.doc.getLine(u.row),w=u.row+1;w<=c.row+1;w++){var C=f.stringTrimLeft(f.stringTrimRight(o.session.doc.getLine(w)));C.length!==0&&(C=" "+C),m+=C}c.row+1<o.session.doc.getLength()-1&&(m+=o.session.doc.getNewLineCharacter()),o.clearSelection(),o.session.doc.replace(new y(u.row,0,c.row+2,0),m),h>0?(o.selection.moveCursorTo(u.row,u.column),o.selection.selectTo(u.row,u.column+h)):(s=o.session.doc.getLine(u.row).length>s?s+1:s,o.selection.moveCursorTo(u.row,s))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:a(null,null),exec:function(o){var i=o.session.doc.getLength()-1,u=o.session.doc.getLine(i).length,c=o.selection.rangeList.ranges,s=[];c.length<1&&(c=[o.selection.getRange()]);for(var l=0;l<c.length;l++)l==c.length-1&&(c[l].end.row===i&&c[l].end.column===u||s.push(new y(c[l].end.row,c[l].end.column,i,u))),l===0?c[l].start.row===0&&c[l].start.column===0||s.push(new y(0,0,c[l].start.row,c[l].start.column)):s.push(new y(c[l-1].end.row,c[l-1].end.column,c[l].start.row,c[l].start.column));o.exitMultiSelectMode(),o.clearSelection();for(var l=0;l<s.length;l++)o.selection.addRange(s[l],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(o){o.selection.clearSelection(),o.navigateLineEnd(),o.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(o){o.selection.clearSelection();var i=o.getCursorPosition();o.selection.moveTo(i.row-1,Number.MAX_VALUE),o.insert(`
`),i.row===0&&o.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(o){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),o.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:a("F1","F1"),exec:function(o){o.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:a(null,null),exec:function(o){o.prompt({$type:"modes"})},readOnly:!0}];for(var d=1;d<9;d++)r.commands.push({name:"foldToLevel"+d,description:"Fold To Level "+d,level:d,exec:function(o){o.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(e,r,p){var f=e("../lib/keys"),g=e("../mouse/default_gutter_handler").GutterTooltip,y=function(){function d(o){this.editor=o,this.gutterLayer=o.renderer.$gutterLayer,this.element=o.renderer.$gutter,this.lines=o.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new g(this.editor)}return d.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},d.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},d.prototype.$onGutterKeyDown=function(o){if(this.annotationTooltip.isOpen){o.preventDefault(),o.keyCode===f.escape&&this.annotationTooltip.hideTooltip();return}if(o.target===this.element){if(o.keyCode!=f.enter)return;o.preventDefault();var i=this.editor.getCursorPosition().row;this.editor.isRowVisible(i)||this.editor.scrollToLine(i,!0,!0),setTimeout((function(){var u=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),c=this.$findNearestFoldWidget(u),s=this.$findNearestAnnotation(u);if(!(c===null&&s===null)){if(c===null&&s!==null){this.activeRowIndex=s,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(c!==null&&s===null){this.activeRowIndex=c,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(s-u)<Math.abs(c-u)){this.activeRowIndex=s,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=c,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}).bind(this),10);return}this.$handleGutterKeyboardInteraction(o),setTimeout((function(){this.editor._signal("gutterkeydown",new a(o,this))}).bind(this),10)},d.prototype.$handleGutterKeyboardInteraction=function(o){if(o.keyCode===f.tab){o.preventDefault();return}if(o.keyCode===f.escape){o.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(o.keyCode===f.up){switch(o.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(o.keyCode===f.down){switch(o.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(o.keyCode===f.left){o.preventDefault(),this.$switchLane("annotation");return}if(o.keyCode===f.right){o.preventDefault(),this.$switchLane("fold");return}if(o.keyCode===f.enter||o.keyCode===f.space){switch(o.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var i=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),o),setTimeout((function(){this.$rowIndexToRow(this.activeRowIndex)!==i&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(i),this.$focusFoldWidget(this.activeRowIndex))}).bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var u=this.lines.cells[this.activeRowIndex].element.childNodes[2],c=u.getBoundingClientRect(),s=this.annotationTooltip.getElement().style;s.left=c.right+"px",s.top=c.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},d.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},d.prototype.$isFoldWidgetVisible=function(o){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(o)),u=this.$getFoldWidget(o).style.display!=="none";return i&&u},d.prototype.$isAnnotationVisible=function(o){var i=this.editor.isRowFullyVisible(this.$rowIndexToRow(o)),u=this.$getAnnotation(o).style.display!=="none";return i&&u},d.prototype.$getFoldWidget=function(o){var i=this.lines.get(o),u=i.element;return u.childNodes[1]},d.prototype.$getAnnotation=function(o){var i=this.lines.get(o),u=i.element;return u.childNodes[2]},d.prototype.$findNearestFoldWidget=function(o){if(this.$isFoldWidgetVisible(o))return o;for(var i=0;o-i>0||o+i<this.lines.getLength()-1;){if(i++,o-i>=0&&this.$isFoldWidgetVisible(o-i))return o-i;if(o+i<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(o+i))return o+i}return null},d.prototype.$findNearestAnnotation=function(o){if(this.$isAnnotationVisible(o))return o;for(var i=0;o-i>0||o+i<this.lines.getLength()-1;){if(i++,o-i>=0&&this.$isAnnotationVisible(o-i))return o-i;if(o+i<=this.lines.getLength()-1&&this.$isAnnotationVisible(o+i))return o+i}return null},d.prototype.$focusFoldWidget=function(o){if(o!=null){var i=this.$getFoldWidget(o);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},d.prototype.$focusAnnotation=function(o){if(o!=null){var i=this.$getAnnotation(o);i.classList.add(this.editor.renderer.keyboardFocusClassName),i.focus()}},d.prototype.$blurFoldWidget=function(o){var i=this.$getFoldWidget(o);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},d.prototype.$blurAnnotation=function(o){var i=this.$getAnnotation(o);i.classList.remove(this.editor.renderer.keyboardFocusClassName),i.blur()},d.prototype.$moveFoldWidgetUp=function(){for(var o=this.activeRowIndex;o>0;)if(o--,this.$isFoldWidgetVisible(o)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=o,this.$focusFoldWidget(this.activeRowIndex);return}},d.prototype.$moveFoldWidgetDown=function(){for(var o=this.activeRowIndex;o<this.lines.getLength()-1;)if(o++,this.$isFoldWidgetVisible(o)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=o,this.$focusFoldWidget(this.activeRowIndex);return}},d.prototype.$moveAnnotationUp=function(){for(var o=this.activeRowIndex;o>0;)if(o--,this.$isAnnotationVisible(o)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=o,this.$focusAnnotation(this.activeRowIndex);return}},d.prototype.$moveAnnotationDown=function(){for(var o=this.activeRowIndex;o<this.lines.getLength()-1;)if(o++,this.$isAnnotationVisible(o)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=o,this.$focusAnnotation(this.activeRowIndex);return}},d.prototype.$switchLane=function(o){switch(o){case"annotation":if(this.activeLane==="annotation")break;var i=this.$findNearestAnnotation(this.activeRowIndex);if(i==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=i,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var u=this.$findNearestFoldWidget(this.activeRowIndex);if(u==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=u,this.$focusFoldWidget(this.activeRowIndex);break}},d.prototype.$rowIndexToRow=function(o){var i=this.lines.get(o);return i?i.row:null},d.prototype.$rowToRowIndex=function(o){for(var i=0;i<this.lines.getLength();i++){var u=this.lines.get(i);if(u.row==o)return i}return null},d}();r.GutterKeyboardHandler=y;var a=function(){function d(o,i){this.gutterKeyboardHandler=i,this.domEvent=o}return d.prototype.getKey=function(){return f.keyCodeToString(this.domEvent.keyCode)},d.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},d.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},d.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},d}();r.GutterKeyboardEvent=a}),ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(e,r,p){var f=this&&this.__values||function($){var v=typeof Symbol=="function"&&Symbol.iterator,S=v&&$[v],x=0;if(S)return S.call($);if($&&typeof $.length=="number")return{next:function(){return $&&x>=$.length&&($=void 0),{value:$&&$[x++],done:!$}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")},g=e("./lib/oop"),y=e("./lib/dom"),a=e("./lib/lang"),d=e("./lib/useragent"),o=e("./keyboard/textinput").TextInput,i=e("./mouse/mouse_handler").MouseHandler,u=e("./mouse/fold_handler").FoldHandler,c=e("./keyboard/keybinding").KeyBinding,s=e("./edit_session").EditSession,l=e("./search").Search,h=e("./range").Range,m=e("./lib/event_emitter").EventEmitter,w=e("./commands/command_manager").CommandManager,C=e("./commands/default_commands").commands,A=e("./config"),E=e("./token_iterator").TokenIterator,b=e("./keyboard/gutter_handler").GutterKeyboardHandler,L=e("./config").nls,_=e("./clipboard"),k=e("./lib/keys"),T=function(){function $(v,S,x){this.session,this.$toDestroy=[];var M=v.getContainerElement();this.container=M,this.renderer=v,this.id="editor"+ ++$.$uid,this.commands=new w(d.isMac?"mac":"win",C),typeof document=="object"&&(this.textInput=new o(v.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new i(this),new u(this)),this.keyBinding=new c(this),this.$search=new l().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=a.delayedCall((function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}).bind(this)),this.on("change",function(R,I){I._$emitInputEvent.schedule(31)}),this.setSession(S||x&&x.session||new s("")),A.resetOptions(this),x&&this.setOptions(x),A._signal("editor",this)}return $.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0)},$.prototype.startOperation=function(v){this.session.startOperation(v)},$.prototype.endOperation=function(v){this.session.endOperation(v)},$.prototype.onStartOperation=function(v){this.curOp=this.session.curOp,this.curOp.scrollTop=this.renderer.scrollTop,this.prevOp=this.session.prevOp,v||(this.previousCommand=null)},$.prototype.onEndOperation=function(v){if(this.curOp&&this.session){if(v&&v.returnValue===!1){this.curOp=null;return}if(this._signal("beforeEndOperation"),!this.curOp)return;var S=this.curOp.command,x=S&&S.scrollIntoView;if(x){switch(x){case"center-animate":x="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var M=this.selection.getRange(),R=this.renderer.layerConfig;(M.start.row>=R.lastRow||M.end.row<=R.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break}x=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.$lastSel=this.session.selection.toJSON(),this.prevOp=this.curOp,this.curOp=null}},$.prototype.$historyTracker=function(v){if(this.$mergeUndoDeltas){var S=this.prevOp,x=this.$mergeableCommands,M=S.command&&v.command.name==S.command.name;if(v.command.name=="insertstring"){var R=v.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),M=M&&this.mergeNextCommand&&(!/\s/.test(R)||/\s/.test(S.args)),this.mergeNextCommand=!0}else M=M&&x.indexOf(v.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(M=!1),M?this.session.mergeUndoDeltas=!0:x.indexOf(v.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},$.prototype.setKeyboardHandler=function(v,S){if(v&&typeof v=="string"&&v!="ace"){this.$keybindingId=v;var x=this;A.loadModule(["keybinding",v],function(M){x.$keybindingId==v&&x.keyBinding.setKeyboardHandler(M&&M.handler),S&&S()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(v),S&&S()},$.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},$.prototype.setSession=function(v){if(this.session!=v){this.curOp&&this.endOperation(),this.curOp={};var S=this.session;if(S){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange),this.session.off("startOperation",this.$onStartOperation),this.session.off("endOperation",this.$onEndOperation);var x=this.session.getSelection();x.off("changeCursor",this.$onCursorChange),x.off("changeSelection",this.$onSelectionChange)}this.session=v,v?(this.$onDocumentChange=this.onDocumentChange.bind(this),v.on("change",this.$onDocumentChange),this.renderer.setSession(v),this.$onChangeMode=this.onChangeMode.bind(this),v.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),v.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),v.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),v.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),v.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),v.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=v.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.$onStartOperation=this.onStartOperation.bind(this),this.session.on("startOperation",this.$onStartOperation),this.$onEndOperation=this.onEndOperation.bind(this),this.session.on("endOperation",this.$onEndOperation),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(v)),this._signal("changeSession",{session:v,oldSession:S}),this.curOp=null,S&&S._signal("changeEditor",{oldEditor:this}),S&&(S.$editor=null),v&&v._signal("changeEditor",{editor:this}),v&&(v.$editor=this),v&&!v.destroyed&&v.bgTokenizer.scheduleStart()}},$.prototype.getSession=function(){return this.session},$.prototype.setValue=function(v,S){return this.session.doc.setValue(v),S?S==1?this.navigateFileEnd():S==-1&&this.navigateFileStart():this.selectAll(),v},$.prototype.getValue=function(){return this.session.getValue()},$.prototype.getSelection=function(){return this.selection},$.prototype.resize=function(v){this.renderer.onResize(v)},$.prototype.setTheme=function(v,S){this.renderer.setTheme(v,S)},$.prototype.getTheme=function(){return this.renderer.getTheme()},$.prototype.setStyle=function(v){this.renderer.setStyle(v)},$.prototype.unsetStyle=function(v){this.renderer.unsetStyle(v)},$.prototype.getFontSize=function(){return this.getOption("fontSize")||y.computedStyle(this.container).fontSize},$.prototype.setFontSize=function(v){this.setOption("fontSize",v)},$.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var v=this;this.$highlightPending=!0,setTimeout(function(){v.$highlightPending=!1;var S=v.session;if(!(!S||S.destroyed)){S.$bracketHighlight&&(S.$bracketHighlight.markerIds.forEach(function(F){S.removeMarker(F)}),S.$bracketHighlight=null);var x=v.getCursorPosition(),M=v.getKeyboardHandler(),R=M&&M.$getDirectionForHighlight&&M.$getDirectionForHighlight(v),I=S.getMatchingBracketRanges(x,R);if(!I){var D=new E(S,x.row,x.column),N=D.getCurrentToken();if(N&&/\b(?:tag-open|tag-name)/.test(N.type)){var B=S.getMatchingTags(x);B&&(I=[B.openTagName.isEmpty()?B.openTag:B.openTagName,B.closeTagName.isEmpty()?B.closeTag:B.closeTagName])}}if(!I&&S.$mode.getMatching&&(I=S.$mode.getMatching(v.session)),!I){v.getHighlightIndentGuides()&&v.renderer.$textLayer.$highlightIndentGuide();return}var W="ace_bracket";Array.isArray(I)?I.length==1&&(W="ace_error_bracket"):I=[I],I.length==2&&(h.comparePoints(I[0].end,I[1].start)==0?I=[h.fromPoints(I[0].start,I[1].end)]:h.comparePoints(I[0].start,I[1].end)==0&&(I=[h.fromPoints(I[1].start,I[0].end)])),S.$bracketHighlight={ranges:I,markerIds:I.map(function(F){return S.addMarker(F,W,"text")})},v.getHighlightIndentGuides()&&v.renderer.$textLayer.$highlightIndentGuide()}},50)}},$.prototype.focus=function(){this.textInput.focus()},$.prototype.isFocused=function(){return this.textInput.isFocused()},$.prototype.blur=function(){this.textInput.blur()},$.prototype.onFocus=function(v){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",v))},$.prototype.onBlur=function(v){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",v))},$.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},$.prototype.onDocumentChange=function(v){var S=this.session.$useWrapMode,x=v.start.row==v.end.row?v.end.row:1/0;this.renderer.updateLines(v.start.row,x,S),this._signal("change",v),this.$cursorChange()},$.prototype.onTokenizerUpdate=function(v){var S=v.data;this.renderer.updateLines(S.first,S.last)},$.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},$.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},$.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},$.prototype.$updateHighlightActiveLine=function(){var v=this.getSession(),S;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(S=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(S=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(S=!1)),v.$highlightLineMarker&&!S)v.removeMarker(v.$highlightLineMarker.id),v.$highlightLineMarker=null;else if(!v.$highlightLineMarker&&S){var x=new h(S.row,S.column,S.row,1/0);x.id=v.addMarker(x,"ace_active-line","screenLine"),v.$highlightLineMarker=x}else S&&(v.$highlightLineMarker.start.row=S.row,v.$highlightLineMarker.end.row=S.row,v.$highlightLineMarker.start.column=S.column,v._signal("changeBackMarker"))},$.prototype.onSelectionChange=function(v){var S=this.session;if(S.$selectionMarker&&S.removeMarker(S.$selectionMarker),S.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var x=this.selection.getRange(),M=this.getSelectionStyle();S.$selectionMarker=S.addMarker(x,"ace_selection",M)}var R=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(R),this._signal("changeSelection")},$.prototype.$getSelectionHighLightRegexp=function(){var v=this.session,S=this.getSelectionRange();if(!(S.isEmpty()||S.isMultiLine())){var x=S.start.column,M=S.end.column,R=v.getLine(S.start.row),I=R.substring(x,M);if(!(I.length>5e3||!/[\w\d]/.test(I))){var D=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:I}),N=R.substring(x-1,M+1);if(D.test(N))return D}}},$.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},$.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},$.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},$.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},$.prototype.onChangeMode=function(v){this.renderer.updateText(),this._emit("changeMode",v)},$.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},$.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},$.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},$.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},$.prototype.getCopyText=function(){var v=this.getSelectedText(),S=this.session.doc.getNewLineCharacter(),x=!1;if(!v&&this.$copyWithEmptySelection){x=!0;for(var M=this.selection.getAllRanges(),R=0;R<M.length;R++){var I=M[R];R&&M[R-1].start.row==I.start.row||(v+=this.session.getLine(I.start.row)+S)}}var D={text:v};return this._signal("copy",D),_.lineMode=x?D.text:!1,D.text},$.prototype.onCopy=function(){this.commands.exec("copy",this)},$.prototype.onCut=function(){this.commands.exec("cut",this)},$.prototype.onPaste=function(v,S){var x={text:v,event:S};this.commands.exec("paste",this,x)},$.prototype.$handlePaste=function(v){typeof v=="string"&&(v={text:v}),this._signal("paste",v);var S=v.text,x=S===_.lineMode,M=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)x?M.insert({row:this.selection.lead.row,column:0},S):this.insert(S);else if(x)this.selection.rangeList.ranges.forEach(function(W){M.insert({row:W.start.row,column:0},S)});else{var R=S.split(/\r\n|\r|\n/),I=this.selection.rangeList.ranges,D=R.length==2&&(!R[0]||!R[1]);if(R.length!=I.length||D)return this.commands.exec("insertstring",this,S);for(var N=I.length;N--;){var B=I[N];B.isEmpty()||M.remove(B),M.insert(B.start,R[N])}}},$.prototype.execCommand=function(v,S){return this.commands.exec(v,this,S)},$.prototype.insert=function(v,S){var x=this.session,M=x.getMode(),R=this.getCursorPosition();if(this.getBehavioursEnabled()&&!S){var I=M.transformAction(x.getState(R.row),"insertion",this,x,v);I&&(v!==I.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),v=I.text)}if(v=="	"&&(v=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&v.indexOf(`
`)==-1){var D=h.fromPoints(R,R);D.end.column+=v.length,this.session.remove(D)}}else{var D=this.getSelectionRange();R=this.session.remove(D),this.clearSelection()}if(v==`
`||v==`\r
`){var F=x.getLine(R.row);if(R.column>F.search(/\S|$/)){var N=F.substr(R.column).search(/\S|$/);x.doc.removeInLine(R.row,R.column,R.column+N)}}this.clearSelection();var B=R.column,W=x.getState(R.row),F=x.getLine(R.row),H=M.checkOutdent(W,F,v);if(x.insert(R,v),I&&I.selection&&(I.selection.length==2?this.selection.setSelectionRange(new h(R.row,B+I.selection[0],R.row,B+I.selection[1])):this.selection.setSelectionRange(new h(R.row+I.selection[0],I.selection[1],R.row+I.selection[2],I.selection[3]))),this.$enableAutoIndent){if(x.getDocument().isNewLine(v)){var z=M.getNextLineIndent(W,F.slice(0,R.column),x.getTabString());x.insert({row:R.row+1,column:0},z)}H&&M.autoOutdent(W,x,R.row)}},$.prototype.autoIndent=function(){for(var v=this.session,S=v.getMode(),x=this.selection.isEmpty()?[new h(0,0,v.doc.getLength()-1,0)]:this.selection.getAllRanges(),M="",R="",I="",D=v.getTabString(),N=0;N<x.length;N++)for(var B=x[N].start.row,W=x[N].end.row,F=B;F<=W;F++){F>0&&(M=v.getState(F-1),R=v.getLine(F-1),I=S.getNextLineIndent(M,R,D));var H=v.getLine(F),z=S.$getIndent(H);if(I!==z){if(z.length>0){var P=new h(F,0,F,z.length);v.remove(P)}I.length>0&&v.insert({row:F,column:0},I)}S.autoOutdent(M,v,F)}},$.prototype.onTextInput=function(v,S){if(!S)return this.keyBinding.onTextInput(v);this.startOperation({command:{name:"insertstring"}});var x=this.applyComposition.bind(this,v,S);this.selection.rangeCount?this.forEachSelection(x):x(),this.endOperation()},$.prototype.applyComposition=function(v,S){if(S.extendLeft||S.extendRight){var x=this.selection.getRange();x.start.column-=S.extendLeft,x.end.column+=S.extendRight,x.start.column<0&&(x.start.row--,x.start.column+=this.session.getLine(x.start.row).length+1),this.selection.setRange(x),!v&&!x.isEmpty()&&this.remove()}if((v||!this.selection.isEmpty())&&this.insert(v,!0),S.restoreStart||S.restoreEnd){var x=this.selection.getRange();x.start.column-=S.restoreStart,x.end.column-=S.restoreEnd,this.selection.setRange(x)}},$.prototype.onCommandKey=function(v,S,x){return this.keyBinding.onCommandKey(v,S,x)},$.prototype.setOverwrite=function(v){this.session.setOverwrite(v)},$.prototype.getOverwrite=function(){return this.session.getOverwrite()},$.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},$.prototype.setScrollSpeed=function(v){this.setOption("scrollSpeed",v)},$.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},$.prototype.setDragDelay=function(v){this.setOption("dragDelay",v)},$.prototype.getDragDelay=function(){return this.getOption("dragDelay")},$.prototype.setSelectionStyle=function(v){this.setOption("selectionStyle",v)},$.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},$.prototype.setHighlightActiveLine=function(v){this.setOption("highlightActiveLine",v)},$.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},$.prototype.setHighlightGutterLine=function(v){this.setOption("highlightGutterLine",v)},$.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},$.prototype.setHighlightSelectedWord=function(v){this.setOption("highlightSelectedWord",v)},$.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},$.prototype.setAnimatedScroll=function(v){this.renderer.setAnimatedScroll(v)},$.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},$.prototype.setShowInvisibles=function(v){this.renderer.setShowInvisibles(v)},$.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},$.prototype.setDisplayIndentGuides=function(v){this.renderer.setDisplayIndentGuides(v)},$.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},$.prototype.setHighlightIndentGuides=function(v){this.renderer.setHighlightIndentGuides(v)},$.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},$.prototype.setShowPrintMargin=function(v){this.renderer.setShowPrintMargin(v)},$.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},$.prototype.setPrintMarginColumn=function(v){this.renderer.setPrintMarginColumn(v)},$.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},$.prototype.setReadOnly=function(v){this.setOption("readOnly",v)},$.prototype.getReadOnly=function(){return this.getOption("readOnly")},$.prototype.setBehavioursEnabled=function(v){this.setOption("behavioursEnabled",v)},$.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},$.prototype.setWrapBehavioursEnabled=function(v){this.setOption("wrapBehavioursEnabled",v)},$.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},$.prototype.setShowFoldWidgets=function(v){this.setOption("showFoldWidgets",v)},$.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},$.prototype.setFadeFoldWidgets=function(v){this.setOption("fadeFoldWidgets",v)},$.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},$.prototype.remove=function(v){this.selection.isEmpty()&&(v=="left"?this.selection.selectLeft():this.selection.selectRight());var S=this.getSelectionRange();if(this.getBehavioursEnabled()){var x=this.session,M=x.getState(S.start.row),R=x.getMode().transformAction(M,"deletion",this,x,S);if(S.end.column===0){var I=x.getTextRange(S);if(I[I.length-1]==`
`){var D=x.getLine(S.end.row);/^\s+$/.test(D)&&(S.end.column=D.length)}}R&&(S=R)}this.session.remove(S),this.clearSelection()},$.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},$.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},$.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},$.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var v=this.getSelectionRange();v.start.column==v.end.column&&v.start.row==v.end.row&&(v.end.column=0,v.end.row++),this.session.remove(v),this.clearSelection()},$.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var v=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(v)},$.prototype.setGhostText=function(v,S){this.renderer.setGhostText(v,S)},$.prototype.removeGhostText=function(){this.renderer.removeGhostText()},$.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var v=this.getCursorPosition(),S=v.column;if(S!==0){var x=this.session.getLine(v.row),M,R;S<x.length?(M=x.charAt(S)+x.charAt(S-1),R=new h(v.row,S-1,v.row,S+1)):(M=x.charAt(S-1)+x.charAt(S-2),R=new h(v.row,S-2,v.row,S)),this.session.replace(R,M),this.session.selection.moveToPosition(R.end)}}},$.prototype.toLowerCase=function(){var v=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var S=this.getSelectionRange(),x=this.session.getTextRange(S);this.session.replace(S,x.toLowerCase()),this.selection.setSelectionRange(v)},$.prototype.toUpperCase=function(){var v=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var S=this.getSelectionRange(),x=this.session.getTextRange(S);this.session.replace(S,x.toUpperCase()),this.selection.setSelectionRange(v)},$.prototype.indent=function(){var v=this.session,S=this.getSelectionRange();if(S.start.row<S.end.row){var x=this.$getSelectedRows();v.indentRows(x.first,x.last,"	");return}else if(S.start.column<S.end.column){var M=v.getTextRange(S);if(!/^\s+$/.test(M)){var x=this.$getSelectedRows();v.indentRows(x.first,x.last,"	");return}}var R=v.getLine(S.start.row),I=S.start,D=v.getTabSize(),N=v.documentToScreenColumn(I.row,I.column);if(this.session.getUseSoftTabs())var B=D-N%D,W=a.stringRepeat(" ",B);else{for(var B=N%D;R[S.start.column-1]==" "&&B;)S.start.column--,B--;this.selection.setSelectionRange(S),W="	"}return this.insert(W)},$.prototype.blockIndent=function(){var v=this.$getSelectedRows();this.session.indentRows(v.first,v.last,"	")},$.prototype.blockOutdent=function(){var v=this.session.getSelection();this.session.outdentRows(v.getRange())},$.prototype.sortLines=function(){for(var v=this.$getSelectedRows(),S=this.session,x=[],M=v.first;M<=v.last;M++)x.push(S.getLine(M));x.sort(function(D,N){return D.toLowerCase()<N.toLowerCase()?-1:D.toLowerCase()>N.toLowerCase()?1:0});for(var R=new h(0,0,0,0),M=v.first;M<=v.last;M++){var I=S.getLine(M);R.start.row=M,R.end.row=M,R.end.column=I.length,S.replace(R,x[M-v.first])}},$.prototype.toggleCommentLines=function(){var v=this.session.getState(this.getCursorPosition().row),S=this.$getSelectedRows();this.session.getMode().toggleCommentLines(v,this.session,S.first,S.last)},$.prototype.toggleBlockComment=function(){var v=this.getCursorPosition(),S=this.session.getState(v.row),x=this.getSelectionRange();this.session.getMode().toggleBlockComment(S,this.session,x,v)},$.prototype.getNumberAt=function(v,S){var x=/[\-]?[0-9]+(?:\.[0-9]+)?/g;x.lastIndex=0;for(var M=this.session.getLine(v);x.lastIndex<S;){var R=x.exec(M);if(R.index<=S&&R.index+R[0].length>=S){var I={value:R[0],start:R.index,end:R.index+R[0].length};return I}}return null},$.prototype.modifyNumber=function(v){var S=this.selection.getCursor().row,x=this.selection.getCursor().column,M=new h(S,x-1,S,x),R=this.session.getTextRange(M);if(!isNaN(parseFloat(R))&&isFinite(R)){var I=this.getNumberAt(S,x);if(I){var D=I.value.indexOf(".")>=0?I.start+I.value.indexOf(".")+1:I.end,N=I.start+I.value.length-D,B=parseFloat(I.value);B*=Math.pow(10,N),D!==I.end&&x<D?v*=Math.pow(10,I.end-x-1):v*=Math.pow(10,I.end-x),B+=v,B/=Math.pow(10,N);var W=B.toFixed(N),F=new h(S,I.start,S,I.end);this.session.replace(F,W),this.moveCursorTo(S,Math.max(I.start+1,x+W.length-I.value.length))}}else this.toggleWord()},$.prototype.toggleWord=function(){var v=this.selection.getCursor().row,S=this.selection.getCursor().column;this.selection.selectWord();var x=this.getSelectedText(),M=this.selection.getWordRange().start.column,R=x.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),I=S-M-1;I<0&&(I=0);var D=0,N=0,B=this;x.match(/[A-Za-z0-9_]+/)&&R.forEach(function(V,Y){N=D+V.length,I>=D&&I<=N&&(x=V,B.selection.clearSelection(),B.moveCursorTo(v,D+M),B.selection.selectTo(v,N+M)),D=N});for(var W=this.$toggleWordPairs,F,H=0;H<W.length;H++)for(var z=W[H],P=0;P<=1;P++){var U=+!P,G=x.match(new RegExp("^\\s?_?("+a.escapeRegExp(z[P])+")\\s?$","i"));if(G){var K=x.match(new RegExp("([_]|^|\\s)("+a.escapeRegExp(G[1])+")($|\\s)","g"));K&&(F=x.replace(new RegExp(a.escapeRegExp(z[P]),"i"),function(V){var Y=z[U];return V.toUpperCase()==V?Y=Y.toUpperCase():V.charAt(0).toUpperCase()==V.charAt(0)&&(Y=Y.substr(0,0)+z[U].charAt(0).toUpperCase()+Y.substr(1)),Y}),this.insert(F),F="")}}},$.prototype.findLinkAt=function(v,S){var x,M,R=this.session.getLine(v),I=R.split(/((?:https?|ftp):\/\/[\S]+)/),D=S;D<0&&(D=0);var N=0,B=0,W;try{for(var F=f(I),H=F.next();!H.done;H=F.next()){var z=H.value;if(B=N+z.length,D>=N&&D<=B&&z.match(/((?:https?|ftp):\/\/[\S]+)/)){W=z.replace(/[\s:.,'";}\]]+$/,"");break}N=B}}catch(P){x={error:P}}finally{try{H&&!H.done&&(M=F.return)&&M.call(F)}finally{if(x)throw x.error}}return W},$.prototype.openLink=function(){var v=this.selection.getCursor(),S=this.findLinkAt(v.row,v.column);return S&&window.open(S,"_blank"),S!=null},$.prototype.removeLines=function(){var v=this.$getSelectedRows();this.session.removeFullLines(v.first,v.last),this.clearSelection()},$.prototype.duplicateSelection=function(){var v=this.selection,S=this.session,x=v.getRange(),M=v.isBackwards();if(x.isEmpty()){var R=x.start.row;S.duplicateLines(R,R)}else{var I=M?x.start:x.end,D=S.insert(I,S.getTextRange(x));x.start=I,x.end=D,v.setSelectionRange(x,M)}},$.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},$.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},$.prototype.moveText=function(v,S,x){return this.session.moveText(v,S,x)},$.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},$.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},$.prototype.$moveLines=function(v,S){var x,M,R=this.selection;if(!R.inMultiSelectMode||this.inVirtualSelectionMode){var I=R.toOrientedRange();x=this.$getSelectedRows(I),M=this.session.$moveLines(x.first,x.last,S?0:v),S&&v==-1&&(M=0),I.moveBy(M,0),R.fromOrientedRange(I)}else{var D=R.rangeList.ranges;R.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var N=0,B=0,W=D.length,F=0;F<W;F++){var H=F;D[F].moveBy(N,0),x=this.$getSelectedRows(D[F]);for(var z=x.first,P=x.last;++F<W;){B&&D[F].moveBy(B,0);var U=this.$getSelectedRows(D[F]);if(S&&U.first!=P)break;if(!S&&U.first>P+1)break;P=U.last}for(F--,N=this.session.$moveLines(z,P,S?0:v),S&&v==-1&&(H=F+1);H<=F;)D[H].moveBy(N,0),H++;S||(N=0),B+=N}R.fromOrientedRange(R.ranges[0]),R.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},$.prototype.$getSelectedRows=function(v){return v=(v||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(v.start.row),last:this.session.getRowFoldEnd(v.end.row)}},$.prototype.onCompositionStart=function(v){this.renderer.showComposition(v)},$.prototype.onCompositionUpdate=function(v){this.renderer.setCompositionText(v)},$.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},$.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},$.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},$.prototype.isRowVisible=function(v){return v>=this.getFirstVisibleRow()&&v<=this.getLastVisibleRow()},$.prototype.isRowFullyVisible=function(v){return v>=this.renderer.getFirstFullyVisibleRow()&&v<=this.renderer.getLastFullyVisibleRow()},$.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},$.prototype.$moveByPage=function(v,S){var x=this.renderer,M=this.renderer.layerConfig,R=v*Math.floor(M.height/M.lineHeight);S===!0?this.selection.$moveSelection(function(){this.moveCursorBy(R,0)}):S===!1&&(this.selection.moveCursorBy(R,0),this.selection.clearSelection());var I=x.scrollTop;x.scrollBy(0,R*M.lineHeight),S!=null&&x.scrollCursorIntoView(null,.5),x.animateScrolling(I)},$.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},$.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},$.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},$.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},$.prototype.scrollPageDown=function(){this.$moveByPage(1)},$.prototype.scrollPageUp=function(){this.$moveByPage(-1)},$.prototype.scrollToRow=function(v){this.renderer.scrollToRow(v)},$.prototype.scrollToLine=function(v,S,x,M){this.renderer.scrollToLine(v,S,x,M)},$.prototype.centerSelection=function(){var v=this.getSelectionRange(),S={row:Math.floor(v.start.row+(v.end.row-v.start.row)/2),column:Math.floor(v.start.column+(v.end.column-v.start.column)/2)};this.renderer.alignCursor(S,.5)},$.prototype.getCursorPosition=function(){return this.selection.getCursor()},$.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},$.prototype.getSelectionRange=function(){return this.selection.getRange()},$.prototype.selectAll=function(){this.selection.selectAll()},$.prototype.clearSelection=function(){this.selection.clearSelection()},$.prototype.moveCursorTo=function(v,S){this.selection.moveCursorTo(v,S)},$.prototype.moveCursorToPosition=function(v){this.selection.moveCursorToPosition(v)},$.prototype.jumpToMatching=function(v,S){var x=this.getCursorPosition(),M=new E(this.session,x.row,x.column),R=M.getCurrentToken(),I=0;R&&R.type.indexOf("tag-name")!==-1&&(R=M.stepBackward());var D=R||M.stepForward();if(D){var N,B=!1,W={},F=x.column-D.start,H,z={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(D.value.match(/[{}()\[\]]/g)){for(;F<D.value.length&&!B;F++)if(z[D.value[F]])switch(H=z[D.value[F]]+"."+D.type.replace("rparen","lparen"),isNaN(W[H])&&(W[H]=0),D.value[F]){case"(":case"[":case"{":W[H]++;break;case")":case"]":case"}":W[H]--,W[H]===-1&&(N="bracket",B=!0);break}}else D.type.indexOf("tag-name")!==-1&&(isNaN(W[D.value])&&(W[D.value]=0),R.value==="<"&&I>1?W[D.value]++:R.value==="</"&&W[D.value]--,W[D.value]===-1&&(N="tag",B=!0));B||(R=D,I++,D=M.stepForward(),F=0)}while(D&&!B);if(N){var P,U;if(N==="bracket")P=this.session.getBracketRange(x),P||(P=new h(M.getCurrentTokenRow(),M.getCurrentTokenColumn()+F-1,M.getCurrentTokenRow(),M.getCurrentTokenColumn()+F-1),U=P.start,(S||U.row===x.row&&Math.abs(U.column-x.column)<2)&&(P=this.session.getBracketRange(U)));else if(N==="tag"){if(!D||D.type.indexOf("tag-name")===-1)return;if(P=new h(M.getCurrentTokenRow(),M.getCurrentTokenColumn()-2,M.getCurrentTokenRow(),M.getCurrentTokenColumn()-2),P.compare(x.row,x.column)===0){var G=this.session.getMatchingTags(x);G&&(G.openTag.contains(x.row,x.column)?(P=G.closeTag,U=P.start):(P=G.openTag,G.closeTag.start.row===x.row&&G.closeTag.start.column===x.column?U=P.end:U=P.start))}U=U||P.start}U=P&&P.cursor||U,U&&(v?P&&S?this.selection.setRange(P):P&&P.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(U.row,U.column):this.selection.moveTo(U.row,U.column))}}},$.prototype.gotoLine=function(v,S,x){this.selection.clearSelection(),this.session.unfold({row:v-1,column:S||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(v-1,S||0),this.isRowFullyVisible(v-1)||this.scrollToLine(v-1,!0,x)},$.prototype.navigateTo=function(v,S){this.selection.moveTo(v,S)},$.prototype.navigateUp=function(v){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var S=this.selection.anchor.getPosition();return this.moveCursorToPosition(S)}this.selection.clearSelection(),this.selection.moveCursorBy(-v||-1,0)},$.prototype.navigateDown=function(v){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var S=this.selection.anchor.getPosition();return this.moveCursorToPosition(S)}this.selection.clearSelection(),this.selection.moveCursorBy(v||1,0)},$.prototype.navigateLeft=function(v){if(this.selection.isEmpty())for(v=v||1;v--;)this.selection.moveCursorLeft();else{var S=this.getSelectionRange().start;this.moveCursorToPosition(S)}this.clearSelection()},$.prototype.navigateRight=function(v){if(this.selection.isEmpty())for(v=v||1;v--;)this.selection.moveCursorRight();else{var S=this.getSelectionRange().end;this.moveCursorToPosition(S)}this.clearSelection()},$.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},$.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},$.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},$.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},$.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},$.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},$.prototype.replace=function(v,S){S&&this.$search.set(S);var x=this.$search.find(this.session),M=0;return x&&(this.$tryReplace(x,v)&&(M=1),this.selection.setSelectionRange(x),this.renderer.scrollSelectionIntoView(x.start,x.end)),M},$.prototype.replaceAll=function(v,S){S&&this.$search.set(S);var x=this.$search.findAll(this.session),M=0;if(!x.length)return M;var R=this.getSelectionRange();this.selection.moveTo(0,0);for(var I=x.length-1;I>=0;--I)this.$tryReplace(x[I],v)&&M++;return this.selection.setSelectionRange(R),M},$.prototype.$tryReplace=function(v,S){var x=this.session.getTextRange(v);return S=this.$search.replace(x,S),S!==null?(v.end=this.session.replace(v,S),v):null},$.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},$.prototype.find=function(v,S,x){S||(S={}),typeof v=="string"||v instanceof RegExp?S.needle=v:typeof v=="object"&&g.mixin(S,v);var M=this.selection.getRange();S.needle==null&&(v=this.session.getTextRange(M)||this.$search.$options.needle,v||(M=this.session.getWordRange(M.start.row,M.start.column),v=this.session.getTextRange(M)),this.$search.set({needle:v})),this.$search.set(S),S.start||this.$search.set({start:M});var R=this.$search.find(this.session);if(S.preventScroll)return R;if(R)return this.revealRange(R,x),R;S.backwards?M.start=M.end:M.end=M.start,this.selection.setRange(M)},$.prototype.findNext=function(v,S){this.find({skipCurrent:!0,backwards:!1},v,S)},$.prototype.findPrevious=function(v,S){this.find(v,{skipCurrent:!0,backwards:!0},S)},$.prototype.revealRange=function(v,S){this.session.unfold(v),this.selection.setSelectionRange(v);var x=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(v.start,v.end,.5),S!==!1&&this.renderer.animateScrolling(x)},$.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},$.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},$.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(v){v.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},$.prototype.setAutoScrollEditorIntoView=function(v){if(v){var S,x=this,M=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var R=this.$scrollAnchor;R.style.cssText="position:absolute",this.container.insertBefore(R,this.container.firstChild);var I=this.on("changeSelection",function(){M=!0}),D=this.renderer.on("beforeRender",function(){M&&(S=x.renderer.container.getBoundingClientRect())}),N=this.renderer.on("afterRender",function(){if(M&&S&&(x.isFocused()||x.searchBox&&x.searchBox.isFocused())){var B=x.renderer,W=B.$cursorLayer.$pixelPos,F=B.layerConfig,H=W.top-F.offset;W.top>=0&&H+S.top<0?M=!0:W.top<F.height&&W.top+S.top+F.lineHeight>window.innerHeight?M=!1:M=null,M!=null&&(R.style.top=H+"px",R.style.left=W.left+"px",R.style.height=F.lineHeight+"px",R.scrollIntoView(M)),M=S=null}});this.setAutoScrollEditorIntoView=function(B){B||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",I),this.renderer.off("afterRender",N),this.renderer.off("beforeRender",D))}}},$.prototype.$resetCursorStyle=function(){var v=this.$cursorStyle||"ace",S=this.renderer.$cursorLayer;S&&(S.setSmoothBlinking(/smooth/.test(v)),S.isBlinking=!this.$readOnly&&v!="wide",y.setCssClass(S.element,"ace_slim-cursors",/slim/.test(v)))},$.prototype.prompt=function(v,S,x){var M=this;A.loadModule("ace/ext/prompt",function(R){R.prompt(M,v,S,x)})},$}();T.$uid=0,T.prototype.curOp=null,T.prototype.prevOp={},T.prototype.$mergeableCommands=["backspace","del","insertstring"],T.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],g.implement(T.prototype,m),A.defineOptions(T.prototype,"editor",{selectionStyle:{set:function($){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:$})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function($){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function($){this.textInput.setReadOnly($),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function($){this.textInput.setCopyWithEmptySelection($)},initialValue:!1},cursorStyle:{set:function($){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function($){this.setAutoScrollEditorIntoView($)}},keyboardHandler:{set:function($){this.setKeyboardHandler($)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function($){this.session.setValue($)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function($){this.setSession($)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function($){this.renderer.$gutterLayer.setShowLineNumbers($),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),$&&this.$relativeLineNumbers?O.attach(this):O.detach(this)},initialValue:!0},relativeLineNumbers:{set:function($){this.$showLineNumbers&&$?O.attach(this):O.detach(this)}},placeholder:{set:function($){this.$updatePlaceholder||(this.$updatePlaceholder=(function(){var v=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(v&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),y.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!v&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),y.addCssClass(this.container,"ace_hasPlaceholder");var S=y.createElement("div");S.className="ace_placeholder",S.textContent=this.$placeholder||"",this.renderer.placeholderNode=S,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!v&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}).bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function($){var v={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(M){M.blur(),M.renderer.scroller.focus()},readOnly:!0},S=function(M){if(M.target==this.renderer.scroller&&M.keyCode===k.enter){M.preventDefault();var R=this.getCursorPosition().row;this.isRowVisible(R)||this.scrollToLine(R,!0,!0),this.focus()}},x;$?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(d.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",L("editor.scroller.aria-roledescription","editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",L("editor.scroller.aria-label","Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",S.bind(this)),this.commands.addCommand(v),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",L("editor.gutter.aria-roledescription","editor")),this.renderer.$gutter.setAttribute("aria-label",L("editor.gutter.aria-label","Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),x||(x=new b(this)),x.addListener(),this.textInput.setAriaOptions({setLabel:!0})):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",S.bind(this)),this.commands.removeCommand(v),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),x&&x.removeListener())},initialValue:!1},textInputAriaLabel:{set:function($){this.$textInputAriaLabel=$},initialValue:""},enableMobileMenu:{set:function($){this.$enableMobileMenu=$},initialValue:!0},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var O={getText:function($,v){return(Math.abs($.selection.lead.row-v)||v+1+(v<9?"":""))+""},getWidth:function($,v,S){return Math.max(v.toString().length,(S.lastRow+1).toString().length,2)*S.characterWidth},update:function($,v){v.renderer.$loop.schedule(v.renderer.CHANGE_GUTTER)},attach:function($){$.renderer.$gutterLayer.$renderer=this,$.on("changeSelection",this.update),this.update(null,$)},detach:function($){$.renderer.$gutterLayer.$renderer==this&&($.renderer.$gutterLayer.$renderer=null),$.off("changeSelection",this.update),this.update(null,$)}};r.Editor=T}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,r,p){var f=e("../lib/dom"),g=function(){function y(a,d){this.element=a,this.canvasHeight=d||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return y.prototype.moveContainer=function(a){f.translate(this.element,0,-(a.firstRowScreen*a.lineHeight%this.canvasHeight)-a.offset*this.$offsetCoefficient)},y.prototype.pageChanged=function(a,d){return Math.floor(a.firstRowScreen*a.lineHeight/this.canvasHeight)!==Math.floor(d.firstRowScreen*d.lineHeight/this.canvasHeight)},y.prototype.computeLineTop=function(a,d,o){var i=d.firstRowScreen*d.lineHeight,u=Math.floor(i/this.canvasHeight),c=o.documentToScreenRow(a,0)*d.lineHeight;return c-u*this.canvasHeight},y.prototype.computeLineHeight=function(a,d,o){return d.lineHeight*o.getRowLineCount(a)},y.prototype.getLength=function(){return this.cells.length},y.prototype.get=function(a){return this.cells[a]},y.prototype.shift=function(){this.$cacheCell(this.cells.shift())},y.prototype.pop=function(){this.$cacheCell(this.cells.pop())},y.prototype.push=function(a){if(Array.isArray(a)){this.cells.push.apply(this.cells,a);for(var d=f.createFragment(this.element),o=0;o<a.length;o++)d.appendChild(a[o].element);this.element.appendChild(d)}else this.cells.push(a),this.element.appendChild(a.element)},y.prototype.unshift=function(a){if(Array.isArray(a)){this.cells.unshift.apply(this.cells,a);for(var d=f.createFragment(this.element),o=0;o<a.length;o++)d.appendChild(a[o].element);this.element.firstChild?this.element.insertBefore(d,this.element.firstChild):this.element.appendChild(d)}else this.cells.unshift(a),this.element.insertAdjacentElement("afterbegin",a.element)},y.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},y.prototype.$cacheCell=function(a){a&&(a.element.remove(),this.cellCache.push(a))},y.prototype.createCell=function(a,d,o,i){var u=this.cellCache.pop();if(!u){var c=f.createElement("div");i&&i(c),this.element.appendChild(c),u={element:c,text:"",row:a}}return u.row=a,u},y}();r.Lines=g}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(e,r,p){var f=e("../lib/dom"),g=e("../lib/oop"),y=e("../lib/lang"),a=e("../lib/event_emitter").EventEmitter,d=e("./lines").Lines,o=e("../config").nls,i=function(){function c(s){this.element=f.createElement("div"),this.element.className="ace_layer ace_gutter-layer",s.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new d(this.element),this.$lines.$offsetCoefficient=1}return c.prototype.setSession=function(s){this.session&&this.session.off("change",this.$updateAnnotations),this.session=s,s&&s.on("change",this.$updateAnnotations)},c.prototype.addGutterDecoration=function(s,l){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(s,l)},c.prototype.removeGutterDecoration=function(s,l){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(s,l)},c.prototype.setAnnotations=function(s){this.$annotations=[];for(var l=0;l<s.length;l++){var h=s[l],m=h.row,w=this.$annotations[m];w||(w=this.$annotations[m]={text:[],type:[],displayText:[]});var C=h.text,A=h.text,E=h.type;C=C?y.escapeHTML(C):h.html||"",A=A||h.html||"",w.text.indexOf(C)===-1&&(w.text.push(C),w.type.push(E),w.displayText.push(A));var b=h.className;b?w.className=b:E==="error"?w.className=" ace_error":E==="security"&&!/\bace_error\b/.test(w.className)?w.className=" ace_security":E==="warning"&&!/\bace_(error|security)\b/.test(w.className)?w.className=" ace_warning":E==="info"&&!w.className?w.className=" ace_info":E==="hint"&&!w.className&&(w.className=" ace_hint")}},c.prototype.$updateAnnotations=function(s){if(this.$annotations.length){var l=s.start.row,h=s.end.row-l;if(h!==0)if(s.action=="remove")this.$annotations.splice(l,h+1,null);else{var m=new Array(h+1);m.unshift(l,1),this.$annotations.splice.apply(this.$annotations,m)}}},c.prototype.update=function(s){this.config=s;var l=this.session,h=s.firstRow,m=Math.min(s.lastRow+s.gutterOffset,l.getLength()-1);this.oldLastRow=m,this.config=s,this.$lines.moveContainer(s),this.$updateCursorRow();for(var w=l.getNextFoldLine(h),C=w?w.start.row:1/0,A=null,E=-1,b=h;;){if(b>C&&(b=w.end.row+1,w=l.getNextFoldLine(b,w),C=w?w.start.row:1/0),b>m){for(;this.$lines.getLength()>E+1;)this.$lines.pop();break}A=this.$lines.get(++E),A?A.row=b:(A=this.$lines.createCell(b,s,this.session,u),this.$lines.push(A)),this.$renderCell(A,s,w,b),b++}this._signal("afterRender"),this.$updateGutterWidth(s)},c.prototype.$updateGutterWidth=function(s){var l=this.session,h=l.gutterRenderer||this.$renderer,m=l.$firstLineNumber,w=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||l.$useWrapMode)&&(w=l.getLength()+m-1);var C=h?h.getWidth(l,w,s):w.toString().length*s.characterWidth,A=this.$padding||this.$computePadding();C+=A.left+A.right,C!==this.gutterWidth&&!isNaN(C)&&(this.gutterWidth=C,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",C))},c.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var s=this.session.selection.getCursor();this.$cursorRow!==s.row&&(this.$cursorRow=s.row)}},c.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var s=this.session.selection.cursor.row;if(this.$cursorRow=s,!(this.$cursorCell&&this.$cursorCell.row==s)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var l=this.$lines.cells;this.$cursorCell=null;for(var h=0;h<l.length;h++){var m=l[h];if(m.row>=this.$cursorRow){if(m.row>this.$cursorRow){var w=this.session.getFoldLine(this.$cursorRow);if(h>0&&w&&w.start.row==l[h-1].row)m=l[h-1];else break}m.element.className="ace_gutter-active-line "+m.element.className,this.$cursorCell=m;break}}}}},c.prototype.scrollLines=function(s){var l=this.config;if(this.config=s,this.$updateCursorRow(),this.$lines.pageChanged(l,s))return this.update(s);this.$lines.moveContainer(s);var h=Math.min(s.lastRow+s.gutterOffset,this.session.getLength()-1),m=this.oldLastRow;if(this.oldLastRow=h,!l||m<s.firstRow)return this.update(s);if(h<l.firstRow)return this.update(s);if(l.firstRow<s.firstRow)for(var w=this.session.getFoldedRowCount(l.firstRow,s.firstRow-1);w>0;w--)this.$lines.shift();if(m>h)for(var w=this.session.getFoldedRowCount(h+1,m);w>0;w--)this.$lines.pop();s.firstRow<l.firstRow&&this.$lines.unshift(this.$renderLines(s,s.firstRow,l.firstRow-1)),h>m&&this.$lines.push(this.$renderLines(s,m+1,h)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(s)},c.prototype.$renderLines=function(s,l,h){for(var m=[],w=l,C=this.session.getNextFoldLine(w),A=C?C.start.row:1/0;w>A&&(w=C.end.row+1,C=this.session.getNextFoldLine(w,C),A=C?C.start.row:1/0),!(w>h);){var E=this.$lines.createCell(w,s,this.session,u);this.$renderCell(E,s,C,w),m.push(E),w++}return m},c.prototype.$renderCell=function(s,l,h,m){var w=s.element,C=this.session,A=w.childNodes[0],E=w.childNodes[1],b=w.childNodes[2],L=b.firstChild,_=C.$firstLineNumber,k=C.$breakpoints,T=C.$decorations,O=C.gutterRenderer||this.$renderer,$=this.$showFoldWidgets&&C.foldWidgets,v=h?h.start.row:Number.MAX_VALUE,S=l.lineHeight+"px",x=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",M=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",R=(O?O.getText(C,m):m+_).toString();if(this.$highlightGutterLine&&(m==this.$cursorRow||h&&m<this.$cursorRow&&m>=v&&this.$cursorRow<=h.end.row)&&(x+="ace_gutter-active-line ",this.$cursorCell!=s&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=s)),k[m]&&(x+=k[m]),T[m]&&(x+=T[m]),this.$annotations[m]&&m!==v&&(x+=this.$annotations[m].className),$){var I=$[m];I==null&&(I=$[m]=C.getFoldWidget(m))}if(I){var D="ace_fold-widget ace_"+I,N=I=="start"&&m==v&&m<h.end.row;if(N){D+=" ace_closed";for(var B="",W=!1,F=m+1;F<=h.end.row;F++)if(this.$annotations[F]){if(this.$annotations[F].className===" ace_error"){W=!0,B=" ace_error_fold";break}this.$annotations[F].className===" ace_security"?(W=!0,B=" ace_security_fold"):this.$annotations[F].className===" ace_warning"&&B!==" ace_security_fold"&&(W=!0,B=" ace_warning_fold")}x+=B}else D+=" ace_open";E.className!=D&&(E.className=D),f.setStyle(E.style,"height",S),f.setStyle(E.style,"display","inline-block"),E.setAttribute("role","button"),E.setAttribute("tabindex","-1");var H=C.getFoldWidgetRange(m);H?E.setAttribute("aria-label",o("gutter.code-folding.range.aria-label","Toggle code folding, rows $0 through $1",[H.start.row+1,H.end.row+1])):h?E.setAttribute("aria-label",o("gutter.code-folding.closed.aria-label","Toggle code folding, rows $0 through $1",[h.start.row+1,h.end.row+1])):E.setAttribute("aria-label",o("gutter.code-folding.open.aria-label","Toggle code folding, row $0",[m+1])),N?(E.setAttribute("aria-expanded","false"),E.setAttribute("title",o("gutter.code-folding.closed.title","Unfold code"))):(E.setAttribute("aria-expanded","true"),E.setAttribute("title",o("gutter.code-folding.open.title","Fold code")))}else E&&(f.setStyle(E.style,"display","none"),E.setAttribute("tabindex","0"),E.removeAttribute("role"),E.removeAttribute("aria-label"));if(W&&this.$showFoldedAnnotations){b.className="ace_gutter_annotation",L.className=M,L.className+=B,f.setStyle(L.style,"height",S),f.setStyle(b.style,"display","block"),f.setStyle(b.style,"height",S);var z;switch(B){case" ace_error_fold":z=o("gutter.annotation.aria-label.error","Error, read annotations row $0",[R]);break;case" ace_security_fold":z=o("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[R]);break;case" ace_warning_fold":z=o("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[R]);break}b.setAttribute("aria-label",z),b.setAttribute("tabindex","-1"),b.setAttribute("role","button")}else if(this.$annotations[m]){b.className="ace_gutter_annotation",L.className=M,this.$useSvgGutterIcons?L.className+=this.$annotations[m].className:w.classList.add(this.$annotations[m].className.replace(" ","")),f.setStyle(L.style,"height",S),f.setStyle(b.style,"display","block"),f.setStyle(b.style,"height",S);var z;switch(this.$annotations[m].className){case" ace_error":z=o("gutter.annotation.aria-label.error","Error, read annotations row $0",[R]);break;case" ace_security":z=o("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[R]);break;case" ace_warning":z=o("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[R]);break;case" ace_info":z=o("gutter.annotation.aria-label.info","Info, read annotations row $0",[R]);break;case" ace_hint":z=o("gutter.annotation.aria-label.hint","Suggestion, read annotations row $0",[R]);break}b.setAttribute("aria-label",z),b.setAttribute("tabindex","-1"),b.setAttribute("role","button")}else f.setStyle(b.style,"display","none"),b.removeAttribute("aria-label"),b.removeAttribute("role"),b.setAttribute("tabindex","0");return R!==A.data&&(A.data=R),w.className!=x&&(w.className=x),f.setStyle(s.element.style,"height",this.$lines.computeLineHeight(m,l,C)+"px"),f.setStyle(s.element.style,"top",this.$lines.computeLineTop(m,l,C)+"px"),s.text=R,b.style.display==="none"&&E.style.display==="none"?s.element.setAttribute("aria-hidden",!0):s.element.setAttribute("aria-hidden",!1),s},c.prototype.setHighlightGutterLine=function(s){this.$highlightGutterLine=s},c.prototype.setShowLineNumbers=function(s){this.$renderer=!s&&{getWidth:function(){return 0},getText:function(){return""}}},c.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},c.prototype.setShowFoldWidgets=function(s){s?f.addCssClass(this.element,"ace_folding-enabled"):f.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=s,this.$padding=null},c.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},c.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var s=f.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(s.borderLeftWidth)||0)+(parseInt(s.paddingLeft)||0)+1,this.$padding.right=(parseInt(s.borderRightWidth)||0)+(parseInt(s.paddingRight)||0),this.$padding},c.prototype.getRegion=function(s){var l=this.$padding||this.$computePadding(),h=this.element.getBoundingClientRect();if(s.x<l.left+h.left)return"markers";if(this.$showFoldWidgets&&s.x>h.right-l.right)return"foldWidgets"},c}();i.prototype.$fixedWidth=!1,i.prototype.$highlightGutterLine=!0,i.prototype.$renderer="",i.prototype.$showLineNumbers=!0,i.prototype.$showFoldWidgets=!0,g.implement(i.prototype,a);function u(c){var s=document.createTextNode("");c.appendChild(s);var l=f.createElement("span");c.appendChild(l);var h=f.createElement("span");c.appendChild(h);var m=f.createElement("span");return h.appendChild(m),c}r.Gutter=i}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,r,p){var f=e("../range").Range,g=e("../lib/dom"),y=function(){function d(o){this.element=g.createElement("div"),this.element.className="ace_layer ace_marker-layer",o.appendChild(this.element)}return d.prototype.setPadding=function(o){this.$padding=o},d.prototype.setSession=function(o){this.session=o},d.prototype.setMarkers=function(o){this.markers=o},d.prototype.elt=function(o,i){var u=this.i!=-1&&this.element.childNodes[this.i];u?this.i++:(u=document.createElement("div"),this.element.appendChild(u),this.i=-1),u.style.cssText=i,u.className=o},d.prototype.update=function(o){if(o){this.config=o,this.i=0;var i;for(var u in this.markers){var c=this.markers[u];if(!c.range){c.update(i,this,this.session,o);continue}var s=c.range.clipRows(o.firstRow,o.lastRow);if(!s.isEmpty())if(s=s.toScreenRange(this.session),c.renderer){var l=this.$getTop(s.start.row,o),h=this.$padding+s.start.column*o.characterWidth;c.renderer(i,s,h,l,o)}else c.type=="fullLine"?this.drawFullLineMarker(i,s,c.clazz,o):c.type=="screenLine"?this.drawScreenLineMarker(i,s,c.clazz,o):s.isMultiLine()?c.type=="text"?this.drawTextMarker(i,s,c.clazz,o):this.drawMultiLineMarker(i,s,c.clazz,o):this.drawSingleLineMarker(i,s,c.clazz+" ace_start ace_br15",o)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},d.prototype.$getTop=function(o,i){return(o-i.firstRowScreen)*i.lineHeight},d.prototype.drawTextMarker=function(o,i,u,c,s){for(var l=this.session,h=i.start.row,m=i.end.row,w=h,C=0,A=0,E=l.getScreenLastRowColumn(w),b=new f(w,i.start.column,w,A);w<=m;w++)b.start.row=b.end.row=w,b.start.column=w==h?i.start.column:l.getRowWrapIndent(w),b.end.column=E,C=A,A=E,E=w+1<m?l.getScreenLastRowColumn(w+1):w==m?0:i.end.column,this.drawSingleLineMarker(o,b,u+(w==h?" ace_start":"")+" ace_br"+a(w==h||w==h+1&&i.start.column,C<A,A>E,w==m),c,w==m?0:1,s)},d.prototype.drawMultiLineMarker=function(o,i,u,c,s){var l=this.$padding,h=c.lineHeight,m=this.$getTop(i.start.row,c),w=l+i.start.column*c.characterWidth;if(s=s||"",this.session.$bidiHandler.isBidiRow(i.start.row)){var C=i.clone();C.end.row=C.start.row,C.end.column=this.session.getLine(C.start.row).length,this.drawBidiSingleLineMarker(o,C,u+" ace_br1 ace_start",c,null,s)}else this.elt(u+" ace_br1 ace_start","height:"+h+"px;right:"+l+"px;top:"+m+"px;left:"+w+"px;"+(s||""));if(this.session.$bidiHandler.isBidiRow(i.end.row)){var C=i.clone();C.start.row=C.end.row,C.start.column=0,this.drawBidiSingleLineMarker(o,C,u+" ace_br12",c,null,s)}else{m=this.$getTop(i.end.row,c);var A=i.end.column*c.characterWidth;this.elt(u+" ace_br12","height:"+h+"px;width:"+A+"px;top:"+m+"px;left:"+l+"px;"+(s||""))}if(h=(i.end.row-i.start.row-1)*c.lineHeight,!(h<=0)){m=this.$getTop(i.start.row+1,c);var E=(i.start.column?1:0)|(i.end.column?0:8);this.elt(u+(E?" ace_br"+E:""),"height:"+h+"px;right:"+l+"px;top:"+m+"px;left:"+l+"px;"+(s||""))}},d.prototype.drawSingleLineMarker=function(o,i,u,c,s,l){if(this.session.$bidiHandler.isBidiRow(i.start.row))return this.drawBidiSingleLineMarker(o,i,u,c,s,l);var h=c.lineHeight,m=(i.end.column+(s||0)-i.start.column)*c.characterWidth,w=this.$getTop(i.start.row,c),C=this.$padding+i.start.column*c.characterWidth;this.elt(u,"height:"+h+"px;width:"+m+"px;top:"+w+"px;left:"+C+"px;"+(l||""))},d.prototype.drawBidiSingleLineMarker=function(o,i,u,c,s,l){var h=c.lineHeight,m=this.$getTop(i.start.row,c),w=this.$padding,C=this.session.$bidiHandler.getSelections(i.start.column,i.end.column);C.forEach(function(A){this.elt(u,"height:"+h+"px;width:"+(A.width+(s||0))+"px;top:"+m+"px;left:"+(w+A.left)+"px;"+(l||""))},this)},d.prototype.drawFullLineMarker=function(o,i,u,c,s){var l=this.$getTop(i.start.row,c),h=c.lineHeight;i.start.row!=i.end.row&&(h+=this.$getTop(i.end.row,c)-l),this.elt(u,"height:"+h+"px;top:"+l+"px;left:0;right:0;"+(s||""))},d.prototype.drawScreenLineMarker=function(o,i,u,c,s){var l=this.$getTop(i.start.row,c),h=c.lineHeight;this.elt(u,"height:"+h+"px;top:"+l+"px;left:0;right:0;"+(s||""))},d}();y.prototype.$padding=0;function a(d,o,i,u){return(d?1:0)|(o?2:0)|(i?4:0)|(u?8:0)}r.Marker=y}),ace.define("ace/layer/text_util",["require","exports","module"],function(e,r,p){var f=new Set(["text","rparen","lparen"]);r.isTextToken=function(g){return f.has(g)}}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(e,r,p){var f=e("../lib/oop"),g=e("../lib/dom"),y=e("../lib/lang"),a=e("./lines").Lines,d=e("../lib/event_emitter").EventEmitter,o=e("../config").nls,i=e("./text_util").isTextToken,u=function(){function c(s){this.dom=g,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",s.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new a(this.element)}return c.prototype.$updateEolChar=function(){var s=this.session.doc,l=s.getNewLineCharacter()==`
`&&s.getNewLineMode()!="windows",h=l?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=h)return this.EOL_CHAR=h,!0},c.prototype.setPadding=function(s){this.$padding=s,this.element.style.margin="0 "+s+"px"},c.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},c.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},c.prototype.$setFontMetrics=function(s){this.$fontMetrics=s,this.$fontMetrics.on("changeCharacterSize",(function(l){this._signal("changeCharacterSize",l)}).bind(this)),this.$pollSizeChanges()},c.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},c.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},c.prototype.setSession=function(s){this.session=s,s&&this.$computeTabString()},c.prototype.setShowInvisibles=function(s){return this.showInvisibles==s?!1:(this.showInvisibles=s,typeof s=="string"?(this.showSpaces=/tab/i.test(s),this.showTabs=/space/i.test(s),this.showEOL=/eol/i.test(s)):this.showSpaces=this.showTabs=this.showEOL=s,this.$computeTabString(),!0)},c.prototype.setDisplayIndentGuides=function(s){return this.displayIndentGuides==s?!1:(this.displayIndentGuides=s,this.$computeTabString(),!0)},c.prototype.setHighlightIndentGuides=function(s){return this.$highlightIndentGuides===s?!1:(this.$highlightIndentGuides=s,s)},c.prototype.$computeTabString=function(){var s=this.session.getTabSize();this.tabSize=s;for(var l=this.$tabStrings=[0],h=1;h<s+1;h++)if(this.showTabs){var m=this.dom.createElement("span");m.className="ace_invisible ace_invisible_tab",m.textContent=y.stringRepeat(this.TAB_CHAR,h),l.push(m)}else l.push(this.dom.createTextNode(y.stringRepeat(" ",h),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var w="ace_indent-guide",C=this.showSpaces?" ace_invisible ace_invisible_space":"",A=this.showSpaces?y.stringRepeat(this.SPACE_CHAR,this.tabSize):y.stringRepeat(" ",this.tabSize),E=this.showTabs?" ace_invisible ace_invisible_tab":"",b=this.showTabs?y.stringRepeat(this.TAB_CHAR,this.tabSize):A,m=this.dom.createElement("span");m.className=w+C,m.textContent=A,this.$tabStrings[" "]=m;var m=this.dom.createElement("span");m.className=w+E,m.textContent=b,this.$tabStrings["	"]=m}},c.prototype.updateLines=function(s,l,h){if(this.config.lastRow!=s.lastRow||this.config.firstRow!=s.firstRow)return this.update(s);this.config=s;for(var m=Math.max(l,s.firstRow),w=Math.min(h,s.lastRow),C=this.element.childNodes,A=0,b=s.firstRow;b<m;b++){var L=this.session.getFoldLine(b);if(L)if(L.containsRow(m)){m=L.start.row;break}else b=L.end.row;A++}for(var E=!1,b=m,L=this.session.getNextFoldLine(b),_=L?L.start.row:1/0;b>_&&(b=L.end.row+1,L=this.session.getNextFoldLine(b,L),_=L?L.start.row:1/0),!(b>w);){var k=C[A++];if(k){this.dom.removeChildren(k),this.$renderLine(k,b,b==_?L:!1),E&&(k.style.top=this.$lines.computeLineTop(b,s,this.session)+"px");var T=s.lineHeight*this.session.getRowLength(b)+"px";k.style.height!=T&&(E=!0,k.style.height=T)}b++}if(E)for(;A<this.$lines.cells.length;){var O=this.$lines.cells[A++];O.element.style.top=this.$lines.computeLineTop(O.row,s,this.session)+"px"}},c.prototype.scrollLines=function(s){var l=this.config;if(this.config=s,this.$lines.pageChanged(l,s))return this.update(s);this.$lines.moveContainer(s);var h=s.lastRow,m=l?l.lastRow:-1;if(!l||m<s.firstRow)return this.update(s);if(h<l.firstRow)return this.update(s);if(!l||l.lastRow<s.firstRow)return this.update(s);if(s.lastRow<l.firstRow)return this.update(s);if(l.firstRow<s.firstRow)for(var w=this.session.getFoldedRowCount(l.firstRow,s.firstRow-1);w>0;w--)this.$lines.shift();if(l.lastRow>s.lastRow)for(var w=this.session.getFoldedRowCount(s.lastRow+1,l.lastRow);w>0;w--)this.$lines.pop();s.firstRow<l.firstRow&&this.$lines.unshift(this.$renderLinesFragment(s,s.firstRow,l.firstRow-1)),s.lastRow>l.lastRow&&this.$lines.push(this.$renderLinesFragment(s,l.lastRow+1,s.lastRow)),this.$highlightIndentGuide()},c.prototype.$renderLinesFragment=function(s,l,h){for(var m=[],w=l,C=this.session.getNextFoldLine(w),A=C?C.start.row:1/0;w>A&&(w=C.end.row+1,C=this.session.getNextFoldLine(w,C),A=C?C.start.row:1/0),!(w>h);){var E=this.$lines.createCell(w,s,this.session),b=E.element;this.dom.removeChildren(b),g.setStyle(b.style,"height",this.$lines.computeLineHeight(w,s,this.session)+"px"),g.setStyle(b.style,"top",this.$lines.computeLineTop(w,s,this.session)+"px"),this.$renderLine(b,w,w==A?C:!1),this.$useLineGroups()?b.className="ace_line_group":b.className="ace_line",m.push(E),w++}return m},c.prototype.update=function(s){this.$lines.moveContainer(s),this.config=s;for(var l=s.firstRow,h=s.lastRow,m=this.$lines;m.getLength();)m.pop();m.push(this.$renderLinesFragment(s,l,h))},c.prototype.$renderToken=function(s,l,h,m){for(var w=this,C=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069\u2060\u2061\u2062\u2063\u2064\u206A\u206B\u206B\u206C\u206D\u206E\u206F]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,A=this.dom.createFragment(this.element),E,b=0;E=C.exec(m);){var L=E[1],_=E[2],k=E[3],T=E[4],O=E[5];if(!(!w.showSpaces&&_)){var $=b!=E.index?m.slice(b,E.index):"";if(b=E.index+E[0].length,$&&A.appendChild(this.dom.createTextNode($,this.element)),L){var v=w.session.getScreenTabSize(l+E.index);A.appendChild(w.$tabStrings[v].cloneNode(!0)),l+=v-1}else if(_)if(w.showSpaces){var S=this.dom.createElement("span");S.className="ace_invisible ace_invisible_space",S.textContent=y.stringRepeat(w.SPACE_CHAR,_.length),A.appendChild(S)}else A.appendChild(this.dom.createTextNode(_,this.element));else if(k){var S=this.dom.createElement("span");S.className="ace_invisible ace_invisible_space ace_invalid",S.textContent=y.stringRepeat(w.SPACE_CHAR,k.length),A.appendChild(S)}else if(T){l+=1;var S=this.dom.createElement("span");S.style.width=w.config.characterWidth*2+"px",S.className=w.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",S.textContent=w.showSpaces?w.SPACE_CHAR:T,A.appendChild(S)}else if(O){l+=1;var S=this.dom.createElement("span");S.style.width=w.config.characterWidth*2+"px",S.className="ace_cjk",S.textContent=O,A.appendChild(S)}}}if(A.appendChild(this.dom.createTextNode(b?m.slice(b):m,this.element)),i(h.type))s.appendChild(A);else{var x="ace_"+h.type.replace(/\./g," ace_"),S=this.dom.createElement("span");h.type=="fold"&&(S.style.width=h.value.length*this.config.characterWidth+"px",S.setAttribute("title",o("inline-fold.closed.title","Unfold code"))),S.className=x,S.appendChild(A),s.appendChild(S)}return l+m.length},c.prototype.renderIndentGuide=function(s,l,h){var m=l.search(this.$indentGuideRe);if(m<=0||m>=h)return l;if(l[0]==" "){m-=m%this.tabSize;for(var w=m/this.tabSize,C=0;C<w;C++)s.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),l.substr(m)}else if(l[0]=="	"){for(var C=0;C<m;C++)s.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),l.substr(m)}return this.$highlightIndentGuide(),l},c.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var s=this.session.doc.$lines;if(s){var l=this.session.selection.getCursor(),h=/^\s*/.exec(this.session.doc.getLine(l.row))[0].length,m=Math.floor(h/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:m,start:l.row};var w=this.session.$bracketHighlight;if(w){for(var C=this.session.$bracketHighlight.ranges,A=0;A<C.length;A++)if(l.row!==C[A].start.row){this.$highlightIndentGuideMarker.end=C[A].start.row,l.row>C[A].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&s[l.row]!==""&&l.column===s[l.row].length){this.$highlightIndentGuideMarker.dir=1;for(var A=l.row+1;A<s.length;A++){var E=s[A],b=/^\s*/.exec(E)[0].length;if(E!==""&&(this.$highlightIndentGuideMarker.end=A,b<=h))break}}this.$renderHighlightIndentGuide()}}},c.prototype.$clearActiveIndentGuide=function(){for(var s=this.$lines.cells,l=0;l<s.length;l++){var h=s[l],m=h.element.childNodes;if(m.length>0){for(var w=0;w<m.length;w++)if(m[w].classList&&m[w].classList.contains("ace_indent-guide-active")){m[w].classList.remove("ace_indent-guide-active");break}}}},c.prototype.$setIndentGuideActive=function(s,l){var h=this.session.doc.getLine(s.row);if(h!==""){var m=s.element.childNodes;if(m){var w=m[l-1];w&&w.classList&&w.classList.contains("ace_indent-guide")&&w.classList.add("ace_indent-guide-active")}}},c.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var s=this.$lines.cells;this.$clearActiveIndentGuide();var l=this.$highlightIndentGuideMarker.indentLevel;if(l!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var h=0;h<s.length;h++){var m=s[h];if(this.$highlightIndentGuideMarker.end&&m.row>=this.$highlightIndentGuideMarker.start+1){if(m.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(m,l)}}else for(var h=s.length-1;h>=0;h--){var m=s[h];if(this.$highlightIndentGuideMarker.end&&m.row<this.$highlightIndentGuideMarker.start){if(m.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(m,l)}}}},c.prototype.$createLineElement=function(s){var l=this.dom.createElement("div");return l.className="ace_line",l.style.height=this.config.lineHeight+"px",l},c.prototype.$renderWrappedLine=function(s,l,h){var m=0,w=0,C=h[0],A=0,E=this.$createLineElement();s.appendChild(E);for(var b=0;b<l.length;b++){var L=l[b],_=L.value;if(b==0&&this.displayIndentGuides){if(m=_.length,_=this.renderIndentGuide(E,_,C),!_)continue;m-=_.length}if(m+_.length<C)A=this.$renderToken(E,A,L,_),m+=_.length;else{for(;m+_.length>=C;)A=this.$renderToken(E,A,L,_.substring(0,C-m)),_=_.substring(C-m),m=C,E=this.$createLineElement(),s.appendChild(E),E.appendChild(this.dom.createTextNode(y.stringRepeat("",h.indent),this.element)),w++,A=0,C=h[w]||Number.MAX_VALUE;_.length!=0&&(m+=_.length,A=this.$renderToken(E,A,L,_))}}h[h.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(E,A,null,"",!0)},c.prototype.$renderSimpleLine=function(s,l){for(var h=0,m=0;m<l.length;m++){var w=l[m],C=w.value;if(!(m==0&&this.displayIndentGuides&&(C=this.renderIndentGuide(s,C),!C))){if(h+C.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(s,h,w,C);h=this.$renderToken(s,h,w,C)}}},c.prototype.$renderOverflowMessage=function(s,l,h,m,w){h&&this.$renderToken(s,l,h,m.slice(0,this.MAX_LINE_LENGTH-l));var C=this.dom.createElement("span");C.className="ace_inline_button ace_keyword ace_toggle_wrap",C.textContent=w?"<hide>":"<click to see more...>",s.appendChild(C)},c.prototype.$renderLine=function(s,l,h){if(!h&&h!=!1&&(h=this.session.getFoldLine(l)),h)var m=this.$getFoldLineTokens(l,h);else var m=this.session.getTokens(l);var w=s;if(m.length){var C=this.session.getRowSplitData(l);if(C&&C.length){this.$renderWrappedLine(s,m,C);var w=s.lastChild}else{var w=s;this.$useLineGroups()&&(w=this.$createLineElement(),s.appendChild(w)),this.$renderSimpleLine(w,m)}}else this.$useLineGroups()&&(w=this.$createLineElement(),s.appendChild(w));if(this.showEOL&&w){h&&(l=h.end.row);var A=this.dom.createElement("span");A.className="ace_invisible ace_invisible_eol",A.textContent=l==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,w.appendChild(A)}},c.prototype.$getFoldLineTokens=function(s,l){var h=this.session,m=[];function w(A,E,b){for(var L=0,_=0;_+A[L].value.length<E;)if(_+=A[L].value.length,L++,L==A.length)return;if(_!=E){var k=A[L].value.substring(E-_);k.length>b-E&&(k=k.substring(0,b-E)),m.push({type:A[L].type,value:k}),_=E+k.length,L+=1}for(;_<b&&L<A.length;){var k=A[L].value;k.length+_>b?m.push({type:A[L].type,value:k.substring(0,b-_)}):m.push(A[L]),_+=k.length,L+=1}}var C=h.getTokens(s);return l.walk(function(A,E,b,L,_){A!=null?m.push({type:"fold",value:A}):(_&&(C=h.getTokens(E)),C.length&&w(C,L,b))},l.end.row,this.session.getLine(l.end.row).length),m},c.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},c}();u.prototype.EOF_CHAR="",u.prototype.EOL_CHAR_LF="",u.prototype.EOL_CHAR_CRLF="",u.prototype.EOL_CHAR=u.prototype.EOL_CHAR_LF,u.prototype.TAB_CHAR="",u.prototype.SPACE_CHAR="",u.prototype.$padding=0,u.prototype.MAX_LINE_LENGTH=1e4,u.prototype.showInvisibles=!1,u.prototype.showSpaces=!1,u.prototype.showTabs=!1,u.prototype.showEOL=!1,u.prototype.displayIndentGuides=!0,u.prototype.$highlightIndentGuides=!0,u.prototype.$tabStrings=[],u.prototype.destroy={},u.prototype.onChangeTabSize=u.prototype.$computeTabString,f.implement(u.prototype,d),r.Text=u}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,r,p){var f=e("../lib/dom"),g=function(){function y(a){this.element=f.createElement("div"),this.element.className="ace_layer ace_cursor-layer",a.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),f.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return y.prototype.$updateOpacity=function(a){for(var d=this.cursors,o=d.length;o--;)f.setStyle(d[o].style,"opacity",a?"":"0")},y.prototype.$startCssAnimation=function(){for(var a=this.cursors,d=a.length;d--;)a[d].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout((function(){this.$isAnimating&&f.addCssClass(this.element,"ace_animate-blinking")}).bind(this))},y.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,f.removeCssClass(this.element,"ace_animate-blinking")},y.prototype.setPadding=function(a){this.$padding=a},y.prototype.setSession=function(a){this.session=a},y.prototype.setBlinking=function(a){a!=this.isBlinking&&(this.isBlinking=a,this.restartTimer())},y.prototype.setBlinkInterval=function(a){a!=this.blinkInterval&&(this.blinkInterval=a,this.restartTimer())},y.prototype.setSmoothBlinking=function(a){a!=this.smoothBlinking&&(this.smoothBlinking=a,f.setCssClass(this.element,"ace_smooth-blinking",a),this.$updateCursors(!0),this.restartTimer())},y.prototype.addCursor=function(){var a=f.createElement("div");return a.className="ace_cursor",this.element.appendChild(a),this.cursors.push(a),a},y.prototype.removeCursor=function(){if(this.cursors.length>1){var a=this.cursors.pop();return a.parentNode.removeChild(a),a}},y.prototype.hideCursor=function(){this.isVisible=!1,f.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},y.prototype.showCursor=function(){this.isVisible=!0,f.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},y.prototype.restartTimer=function(){var a=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,f.removeCssClass(this.element,"ace_smooth-blinking")),a(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout((function(){this.$isSmoothBlinking&&f.addCssClass(this.element,"ace_smooth-blinking")}).bind(this))),f.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var d=(function(){this.timeoutId=setTimeout(function(){a(!1)},.6*this.blinkInterval)}).bind(this);this.intervalId=setInterval(function(){a(!0),d()},this.blinkInterval),d()}},y.prototype.getPixelPosition=function(a,d){if(!this.config||!this.session)return{left:0,top:0};a||(a=this.session.selection.getCursor());var o=this.session.documentToScreenPosition(a),i=this.$padding+(this.session.$bidiHandler.isBidiRow(o.row,a.row)?this.session.$bidiHandler.getPosLeft(o.column):o.column*this.config.characterWidth),u=(o.row-(d?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:i,top:u}},y.prototype.isCursorInView=function(a,d){return a.top>=0&&a.top<d.maxHeight},y.prototype.update=function(a){this.config=a;var d=this.session.$selectionMarkers,o=0,i=0;(d===void 0||d.length===0)&&(d=[{cursor:null}]);for(var o=0,u=d.length;o<u;o++){var c=this.getPixelPosition(d[o].cursor,!0);if(!((c.top>a.height+a.offset||c.top<0)&&o>1)){var s=this.cursors[i++]||this.addCursor(),l=s.style;this.drawCursor?this.drawCursor(s,c,a,d[o],this.session):this.isCursorInView(c,a)?(f.setStyle(l,"display","block"),f.translate(s,c.left,c.top),f.setStyle(l,"width",Math.round(a.characterWidth)+"px"),f.setStyle(l,"height",a.lineHeight+"px")):f.setStyle(l,"display","none")}}for(;this.cursors.length>i;)this.removeCursor();var h=this.session.getOverwrite();this.$setOverwrite(h),this.$pixelPos=c,this.restartTimer()},y.prototype.$setOverwrite=function(a){a!=this.overwrite&&(this.overwrite=a,a?f.addCssClass(this.element,"ace_overwrite-cursors"):f.removeCssClass(this.element,"ace_overwrite-cursors"))},y.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},y}();g.prototype.$padding=0,g.prototype.drawCursor=null,r.Cursor=g}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,r,p){var f=this&&this.__extends||function(){var s=function(l,h){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,w){m.__proto__=w}||function(m,w){for(var C in w)Object.prototype.hasOwnProperty.call(w,C)&&(m[C]=w[C])},s(l,h)};return function(l,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");s(l,h);function m(){this.constructor=l}l.prototype=h===null?Object.create(h):(m.prototype=h.prototype,new m)}}(),g=e("./lib/oop"),y=e("./lib/dom"),a=e("./lib/event"),d=e("./lib/event_emitter").EventEmitter,o=32768,i=function(){function s(l,h){this.element=y.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+h,this.inner=y.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="",this.element.appendChild(this.inner),l.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,a.addListener(this.element,"scroll",this.onScroll.bind(this)),a.addListener(this.element,"mousedown",a.preventDefault)}return s.prototype.setVisible=function(l){this.element.style.display=l?"":"none",this.isVisible=l,this.coeff=1},s}();g.implement(i.prototype,d);var u=function(s){f(l,s);function l(h,m){var w=s.call(this,h,"-v")||this;return w.scrollTop=0,w.scrollHeight=0,m.$scrollbarWidth=w.width=y.scrollbarWidth(h.ownerDocument),w.inner.style.width=w.element.style.width=(w.width||15)+5+"px",w.$minWidth=0,w}return l.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var h=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-h)/(this.coeff-h)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},l.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},l.prototype.setHeight=function(h){this.element.style.height=h+"px"},l.prototype.setScrollHeight=function(h){this.scrollHeight=h,h>o?(this.coeff=o/h,h=o):this.coeff!=1&&(this.coeff=1),this.inner.style.height=h+"px"},l.prototype.setScrollTop=function(h){this.scrollTop!=h&&(this.skipEvent=!0,this.scrollTop=h,this.element.scrollTop=h*this.coeff)},l}(i);u.prototype.setInnerHeight=u.prototype.setScrollHeight;var c=function(s){f(l,s);function l(h,m){var w=s.call(this,h,"-h")||this;return w.scrollLeft=0,w.height=m.$scrollbarWidth,w.inner.style.height=w.element.style.height=(w.height||15)+5+"px",w}return l.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},l.prototype.getHeight=function(){return this.isVisible?this.height:0},l.prototype.setWidth=function(h){this.element.style.width=h+"px"},l.prototype.setInnerWidth=function(h){this.inner.style.width=h+"px"},l.prototype.setScrollWidth=function(h){this.inner.style.width=h+"px"},l.prototype.setScrollLeft=function(h){this.scrollLeft!=h&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=h)},l}(i);r.ScrollBar=u,r.ScrollBarV=u,r.ScrollBarH=c,r.VScrollBar=u,r.HScrollBar=c}),ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,r,p){var f=this&&this.__extends||function(){var c=function(s,l){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,m){h.__proto__=m}||function(h,m){for(var w in m)Object.prototype.hasOwnProperty.call(m,w)&&(h[w]=m[w])},c(s,l)};return function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");c(s,l);function h(){this.constructor=s}s.prototype=l===null?Object.create(l):(h.prototype=l.prototype,new h)}}(),g=e("./lib/oop"),y=e("./lib/dom"),a=e("./lib/event"),d=e("./lib/event_emitter").EventEmitter;y.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var o=function(){function c(s,l){this.element=y.createElement("div"),this.element.className="ace_sb"+l,this.inner=y.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,s.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,a.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return c.prototype.setVisible=function(s){this.element.style.display=s?"":"none",this.isVisible=s,this.coeff=1},c}();g.implement(o.prototype,d);var i=function(c){f(s,c);function s(l,h){var m=c.call(this,l,"-v")||this;return m.scrollTop=0,m.scrollHeight=0,m.parent=l,m.width=m.VScrollWidth,m.renderer=h,m.inner.style.width=m.element.style.width=(m.width||15)+"px",m.$minWidth=0,m}return s.prototype.onMouseDown=function(l,h){if(l==="mousedown"&&!(a.getButton(h)!==0||h.detail===2)){if(h.target===this.inner){var m=this,w=h.clientY,C=function(T){w=T.clientY},A=function(){clearInterval(_)},E=h.clientY,b=this.thumbTop,L=function(){if(w!==void 0){var T=m.scrollTopFromThumbTop(b+w-E);T!==m.scrollTop&&m._emit("scroll",{data:T})}};a.capture(this.inner,C,A);var _=setInterval(L,20);return a.preventDefault(h)}var k=h.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(k)}),a.preventDefault(h)}},s.prototype.getHeight=function(){return this.height},s.prototype.scrollTopFromThumbTop=function(l){var h=l*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return h=h>>0,h<0?h=0:h>this.pageHeight-this.viewHeight&&(h=this.pageHeight-this.viewHeight),h},s.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},s.prototype.setHeight=function(l){this.height=Math.max(0,l),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},s.prototype.setScrollHeight=function(l,h){this.pageHeight===l&&!h||(this.pageHeight=l,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},s.prototype.setScrollTop=function(l){this.scrollTop=l,l<0&&(l=0),this.thumbTop=l*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},s}(o);i.prototype.setInnerHeight=i.prototype.setScrollHeight;var u=function(c){f(s,c);function s(l,h){var m=c.call(this,l,"-h")||this;return m.scrollLeft=0,m.scrollWidth=0,m.height=m.HScrollHeight,m.inner.style.height=m.element.style.height=(m.height||12)+"px",m.renderer=h,m}return s.prototype.onMouseDown=function(l,h){if(l==="mousedown"&&!(a.getButton(h)!==0||h.detail===2)){if(h.target===this.inner){var m=this,w=h.clientX,C=function(T){w=T.clientX},A=function(){clearInterval(_)},E=h.clientX,b=this.thumbLeft,L=function(){if(w!==void 0){var T=m.scrollLeftFromThumbLeft(b+w-E);T!==m.scrollLeft&&m._emit("scroll",{data:T})}};a.capture(this.inner,C,A);var _=setInterval(L,20);return a.preventDefault(h)}var k=h.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(k)}),a.preventDefault(h)}},s.prototype.getHeight=function(){return this.isVisible?this.height:0},s.prototype.scrollLeftFromThumbLeft=function(l){var h=l*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return h=h>>0,h<0?h=0:h>this.pageWidth-this.viewWidth&&(h=this.pageWidth-this.viewWidth),h},s.prototype.setWidth=function(l){this.width=Math.max(0,l),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},s.prototype.setScrollWidth=function(l,h){this.pageWidth===l&&!h||(this.pageWidth=l,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},s.prototype.setScrollLeft=function(l){this.scrollLeft=l,l<0&&(l=0),this.thumbLeft=l*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},s}(o);u.prototype.setInnerWidth=u.prototype.setScrollWidth,r.ScrollBar=i,r.ScrollBarV=i,r.ScrollBarH=u,r.VScrollBar=i,r.HScrollBar=u}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,r,p){var f=e("./lib/event"),g=function(){function y(a,d){this.onRender=a,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=d||window;var o=this;this._flush=function(i){o.pending=!1;var u=o.changes;if(u&&(f.blockIdle(100),o.changes=0,o.onRender(u)),o.changes){if(o.$recursionLimit--<0)return;o.schedule()}else o.$recursionLimit=2}}return y.prototype.schedule=function(a){this.changes=this.changes|a,this.changes&&!this.pending&&(f.nextFrame(this._flush),this.pending=!0)},y.prototype.clear=function(a){var d=this.changes;return this.changes=0,d},y}();r.RenderLoop=g}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,r,p){var f=e("../lib/oop"),g=e("../lib/dom"),y=e("../lib/lang"),a=e("../lib/event"),d=e("../lib/useragent"),o=e("../lib/event_emitter").EventEmitter,i=512,u=typeof ResizeObserver=="function",c=200,s=function(){function l(h){this.el=g.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=g.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=g.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),h.appendChild(this.el),this.$measureNode.textContent=y.stringRepeat("X",i),this.$characterSize={width:0,height:0},u?this.$addObserver():this.checkForSizeChanges()}return l.prototype.$setMeasureNodeStyles=function(h,m){h.width=h.height="auto",h.left=h.top="0px",h.visibility="hidden",h.position="absolute",h.whiteSpace="pre",d.isIE<8?h["font-family"]="inherit":h.font="inherit",h.overflow=m?"hidden":"visible"},l.prototype.checkForSizeChanges=function(h){if(h===void 0&&(h=this.$measureSizes()),h&&(this.$characterSize.width!==h.width||this.$characterSize.height!==h.height)){this.$measureNode.style.fontWeight="bold";var m=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=h,this.charSizes=Object.create(null),this.allowBoldFonts=m&&m.width===h.width&&m.height===h.height,this._emit("changeCharacterSize",{data:h})}},l.prototype.$addObserver=function(){var h=this;this.$observer=new window.ResizeObserver(function(m){h.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},l.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var h=this;return this.$pollSizeChangesTimer=a.onIdle(function m(){h.checkForSizeChanges(),a.onIdle(m,500)},500)},l.prototype.setPolling=function(h){h?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},l.prototype.$measureSizes=function(h){var m={height:(h||this.$measureNode).clientHeight,width:(h||this.$measureNode).clientWidth/i};return m.width===0||m.height===0?null:m},l.prototype.$measureCharWidth=function(h){this.$main.textContent=y.stringRepeat(h,i);var m=this.$main.getBoundingClientRect();return m.width/i},l.prototype.getCharacterWidth=function(h){var m=this.charSizes[h];return m===void 0&&(m=this.charSizes[h]=this.$measureCharWidth(h)/this.$characterSize.width),m},l.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},l.prototype.$getZoom=function(h){return!h||!h.parentElement?1:(Number(window.getComputedStyle(h).zoom)||1)*this.$getZoom(h.parentElement)},l.prototype.$initTransformMeasureNodes=function(){var h=function(m,w){return["div",{style:"position: absolute;top:"+m+"px;left:"+w+"px;"}]};this.els=g.buildDom([h(0,0),h(c,0),h(0,c),h(c,c)],this.el)},l.prototype.transformCoordinates=function(h,m){if(h){var w=this.$getZoom(this.el);h=b(1/w,h)}function C(N,B,W){var F=N[1]*B[0]-N[0]*B[1];return[(-B[1]*W[0]+B[0]*W[1])/F,(+N[1]*W[0]-N[0]*W[1])/F]}function A(N,B){return[N[0]-B[0],N[1]-B[1]]}function E(N,B){return[N[0]+B[0],N[1]+B[1]]}function b(N,B){return[N*B[0],N*B[1]]}this.els||this.$initTransformMeasureNodes();function L(N){var B=N.getBoundingClientRect();return[B.left,B.top]}var _=L(this.els[0]),k=L(this.els[1]),T=L(this.els[2]),O=L(this.els[3]),$=C(A(O,k),A(O,T),A(E(k,T),E(O,_))),v=b(1+$[0],A(k,_)),S=b(1+$[1],A(T,_));if(m){var x=m,M=$[0]*x[0]/c+$[1]*x[1]/c+1,R=E(b(x[0],v),b(x[1],S));return E(b(1/M/c,R),_)}var I=A(h,_),D=C(A(v,b($[0],I)),A(S,b($[1],I)),I);return b(c,D)},l}();s.prototype.$characterSize={width:0,height:0},f.implement(s.prototype,o),r.FontMetrics=s}),ace.define("ace/css/editor-css",["require","exports","module"],function(e,r,p){p.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    forced-color-adjust: none;
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold, .ace_gutter-cell.ace_security, .ace_icon.ace_security, .ace_icon.ace_security_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info, .ace_gutter-cell.ace_hint, .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info, .ace_dark .ace_gutter-cell.ace_hint, .ace_dark .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_security {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iZGFya29yYW5nZSIgZmlsbD0ibm9uZSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgogICAgICAgIDxwYXRoIGNsYXNzPSJzdHJva2UtbGluZWpvaW4tcm91bmQiIGQ9Ik04IDE0LjgzMDdDOCAxNC44MzA3IDIgMTIuOTA0NyAyIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOEM3Ljk4OTk5IDEuMzQ5MTggMTAuNjkgMy4yNjU0OCAxNCAzLjI2NTQ4VjguMDg5OTJDMTQgMTIuOTA0NyA4IDE0LjgzMDcgOCAxNC44MzA3WiIvPgogICAgICAgIDxwYXRoIGQ9Ik0yIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOCIvPgogICAgICAgIDxwYXRoIGQ9Ik0xMy45OSA4LjA4OTkyVjMuMjY1NDhDMTAuNjggMy4yNjU0OCA4IDEuMzQ5MTggOCAxLjM0OTE4Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggNFY5Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggMTBWMTIiLz4KICAgIDwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}
.ace_icon_svg.ace_hint {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0ic2lsdmVyIiBmaWxsPSJub25lIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTYgMTRIMTAiLz4KICAgICAgICA8cGF0aCBkPSJNOCAxMUg5QzkgOS40NzAwMiAxMiA4LjU0MDAyIDEyIDUuNzYwMDJDMTIuMDIgNC40MDAwMiAxMS4zOSAzLjM2MDAyIDEwLjQzIDIuNjcwMDJDOSAxLjY0MDAyIDcuMDAwMDEgMS42NDAwMiA1LjU3MDAxIDIuNjcwMDJDNC42MTAwMSAzLjM2MDAyIDMuOTggNC40MDAwMiA0IDUuNzYwMDJDNCA4LjU0MDAyIDcuMDAwMDEgOS40NzAwMiA3LjAwMDAxIDExSDhaIi8+CiAgICA8L2c+Cjwvc3ZnPg==");
    background-color: silver;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_security_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTcgMTQiIGZpbGw9Im5vbmUiPgogICAgPHBhdGggZD0iTTEwLjAwMDEgMTMuNjk5MkMxMC4wMDAxIDEzLjY5OTIgMTEuOTI0MSAxMy40NzYzIDEzIDEyLjY5OTJDMTQuNDEzOSAxMS42NzgxIDE2IDEwLjUgMTYuMTI1MSA2LjgxMTI2VjIuNTg5ODdDMTYuMTI1MSAyLjU0NzY4IDE2LjEyMjEgMi41MDYxOSAxNi4xMTY0IDIuNDY1NTlWMS43MTQ4NUgxNS4yNDE0TDE1LjIzMDcgMS43MTQ4NEwxNC42MjUxIDEuNjk5MjJWNi44MTEyM0MxNC42MjUxIDguNTEwNjEgMTQuNjI1MSA5LjQ2NDYxIDEyLjc4MjQgMTEuNzIxQzEyLjE1ODYgMTIuNDg0OCAxMC4wMDAxIDEzLjY5OTIgMTAuMDAwMSAxMy42OTkyWiIgZmlsbD0iY3JpbXNvbiIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTcuMzM2MDkgMC4zNjc0NzVDNy4wMzIxNCAwLjE1MjY1MiA2LjYyNTQ4IDAuMTUzNjE0IDYuMzIyNTMgMC4zNjk5OTdMNi4zMDg2OSAwLjM3OTU1NEM2LjI5NTUzIDAuMzg4NTg4IDYuMjczODggMC40MDMyNjYgNi4yNDQxNyAwLjQyMjc4OUM2LjE4NDcxIDAuNDYxODYgNi4wOTMyMSAwLjUyMDE3MSA1Ljk3MzEzIDAuNTkxMzczQzUuNzMyNTEgMC43MzQwNTkgNS4zNzk5IDAuOTI2ODY0IDQuOTQyNzkgMS4xMjAwOUM0LjA2MTQ0IDEuNTA5NyAyLjg3NTQxIDEuODgzNzcgMS41ODk4NCAxLjg4Mzc3SDAuNzE0ODQ0VjIuNzU4NzdWNi45ODAxNUMwLjcxNDg0NCA5LjQ5Mzc0IDIuMjg4NjYgMTEuMTk3MyAzLjcwMjU0IDEyLjIxODVDNC40MTg0NSAxMi43MzU1IDUuMTI4NzQgMTMuMTA1MyA1LjY1NzMzIDEzLjM0NTdDNS45MjI4NCAxMy40NjY0IDYuMTQ1NjYgMTMuNTU1OSA2LjMwNDY1IDEzLjYxNjFDNi4zODQyMyAxMy42NDYyIDYuNDQ4MDUgMTMuNjY5IDYuNDkzNDkgMTMuNjg0OEM2LjUxNjIyIDEzLjY5MjcgNi41MzQzOCAxMy42OTg5IDYuNTQ3NjQgMTMuNzAzM0w2LjU2MzgyIDEzLjcwODdMNi41NjkwOCAxMy43MTA0TDYuNTcwOTkgMTMuNzExTDYuODM5ODQgMTMuNzUzM0w2LjU3MjQyIDEzLjcxMTVDNi43NDYzMyAxMy43NjczIDYuOTMzMzUgMTMuNzY3MyA3LjEwNzI3IDEzLjcxMTVMNy4xMDg3IDEzLjcxMUw3LjExMDYxIDEzLjcxMDRMNy4xMTU4NyAxMy43MDg3TDcuMTMyMDUgMTMuNzAzM0M3LjE0NTMxIDEzLjY5ODkgNy4xNjM0NiAxMy42OTI3IDcuMTg2MTkgMTMuNjg0OEM3LjIzMTY0IDEzLjY2OSA3LjI5NTQ2IDEzLjY0NjIgNy4zNzUwMyAxMy42MTYxQzcuNTM0MDMgMTMuNTU1OSA3Ljc1Njg1IDEzLjQ2NjQgOC4wMjIzNiAxMy4zNDU3QzguNTUwOTUgMTMuMTA1MyA5LjI2MTIzIDEyLjczNTUgOS45NzcxNSAxMi4yMTg1QzExLjM5MSAxMS4xOTczIDEyLjk2NDggOS40OTM3NyAxMi45NjQ4IDYuOTgwMThWMi43NTg4QzEyLjk2NDggMi43MTY2IDEyLjk2MTkgMi42NzUxMSAxMi45NTYxIDIuNjM0NTFWMS44ODM3N0gxMi4wODExQzEyLjA3NzUgMS44ODM3NyAxMi4wNzQgMS44ODM3NyAxMi4wNzA0IDEuODgzNzdDMTAuNzk3OSAxLjg4MDA0IDkuNjE5NjIgMS41MTEwMiA4LjczODk0IDEuMTI0ODZDOC43MzUzNCAxLjEyMzI3IDguNzMxNzQgMS4xMjE2OCA4LjcyODE0IDEuMTIwMDlDOC4yOTEwMyAwLjkyNjg2NCA3LjkzODQyIDAuNzM0MDU5IDcuNjk3NzkgMC41OTEzNzNDNy41Nzc3MiAwLjUyMDE3MSA3LjQ4NjIyIDAuNDYxODYgNy40MjY3NiAwLjQyMjc4OUM3LjM5NzA1IDAuNDAzMjY2IDcuMzc1MzkgMC4zODg1ODggNy4zNjIyNCAwLjM3OTU1NEw3LjM0ODk2IDAuMzcwMzVDNy4zNDg5NiAwLjM3MDM1IDcuMzQ4NDcgMC4zNzAwMiA3LjM0NTYzIDAuMzc0MDU0TDcuMzM3NzkgMC4zNjg2NTlMNy4zMzYwOSAwLjM2NzQ3NVpNOC4wMzQ3MSAyLjcyNjkxQzguODYwNCAzLjA5MDYzIDkuOTYwNjYgMy40NjMwOSAxMS4yMDYxIDMuNTg5MDdWNi45ODAxNUgxMS4yMTQ4QzExLjIxNDggOC42Nzk1MyAxMC4xNjM3IDkuOTI1MDcgOC45NTI1NCAxMC43OTk4QzguMzU1OTUgMTEuMjMwNiA3Ljc1Mzc0IDExLjU0NTQgNy4yOTc5NiAxMS43NTI3QzcuMTE2NzEgMTEuODM1MSA2Ljk2MDYyIDExLjg5OTYgNi44Mzk4NCAxMS45NDY5QzYuNzE5MDYgMTEuODk5NiA2LjU2Mjk3IDExLjgzNTEgNi4zODE3MyAxMS43NTI3QzUuOTI1OTUgMTEuNTQ1NCA1LjMyMzczIDExLjIzMDYgNC43MjcxNSAxMC43OTk4QzMuNTE2MDMgOS45MjUwNyAyLjQ2NDg0IDguNjc5NTUgMi40NjQ4NCA2Ljk4MDE4VjMuNTg5MDlDMy43MTczOCAzLjQ2MjM5IDQuODIzMDggMy4wODYzOSA1LjY1MDMzIDIuNzIwNzFDNi4xNDIyOCAyLjUwMzI0IDYuNTQ0ODUgMi4yODUzNyA2LjgzMjU0IDIuMTE2MjRDNy4xMjE4MSAyLjI4NTM1IDcuNTI3IDIuNTAzNTIgOC4wMjE5NiAyLjcyMTMxQzguMDI2MiAyLjcyMzE3IDguMDMwNDUgMi43MjUwNCA4LjAzNDcxIDIuNzI2OTFaTTUuOTY0ODQgMy40MDE0N1Y3Ljc3NjQ3SDcuNzE0ODRWMy40MDE0N0g1Ljk2NDg0Wk01Ljk2NDg0IDEwLjQwMTVWOC42NTE0N0g3LjcxNDg0VjEwLjQwMTVINS45NjQ4NFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    position: relative;
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
    z-index: 1;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
}

.ace_ghost_text_container > div {
    white-space: pre;
}

.ghost_text_line_wrapped::after {
    content: "";
    position: absolute;
}

.ace_lineWidgetContainer.ace_ghost_text {
    margin: 0px 4px
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}

.ace_hidden_token {
    display: none;
}`}),ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,r,p){var f=e("../lib/dom"),g=e("../lib/oop"),y=e("../lib/event_emitter").EventEmitter,a=function(){function d(o,i){this.canvas=f.createElement("canvas"),this.renderer=i,this.pixelRatio=1,this.maxHeight=i.layerConfig.maxHeight,this.lineHeight=i.layerConfig.lineHeight,this.canvasHeight=o.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=o.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},o.element.appendChild(this.canvas)}return d.prototype.$updateDecorators=function(o){var i=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(o){this.maxHeight=o.maxHeight,this.lineHeight=o.lineHeight,this.canvasHeight=o.height;var u=(o.lastRow+1)*this.lineHeight;u<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var c=this.canvas.getContext("2d");function s(O,$){return O.priority<$.priority?-1:O.priority>$.priority?1:0}var l=this.renderer.session.$annotations;if(c.clearRect(0,0,this.canvas.width,this.canvas.height),l){var h={info:1,warning:2,error:3};l.forEach(function(O){O.priority=h[O.type]||null}),l=l.sort(s);for(var m=this.renderer.session.$foldData,w=0;w<l.length;w++){var C=l[w].row,A=this.compensateFoldRows(C,m),E=Math.round((C-A)*this.lineHeight*this.heightRatio),b=Math.round((C-A)*this.lineHeight*this.heightRatio),L=Math.round(((C-A)*this.lineHeight+this.lineHeight)*this.heightRatio),_=L-b;if(_<this.minDecorationHeight){var k=(b+L)/2|0;k<this.halfMinDecorationHeight?k=this.halfMinDecorationHeight:k+this.halfMinDecorationHeight>this.canvasHeight&&(k=this.canvasHeight-this.halfMinDecorationHeight),b=Math.round(k-this.halfMinDecorationHeight),L=Math.round(k+this.halfMinDecorationHeight)}c.fillStyle=i[l[w].type]||null,c.fillRect(0,E,this.canvasWidth,L-b)}}var T=this.renderer.session.selection.getCursor();if(T){var A=this.compensateFoldRows(T.row,m),E=Math.round((T.row-A)*this.lineHeight*this.heightRatio);c.fillStyle="rgba(0, 0, 0, 0.5)",c.fillRect(0,E,this.canvasWidth,2)}},d.prototype.compensateFoldRows=function(o,i){var u=0;if(i&&i.length>0)for(var c=0;c<i.length;c++)o>i[c].start.row&&o<i[c].end.row?u+=o-i[c].start.row:o>=i[c].end.row&&(u+=i[c].end.row-i[c].start.row);return u},d}();g.implement(a.prototype,y),r.Decorator=a}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent","ace/layer/text_util"],function(e,r,p){var f=e("./lib/oop"),g=e("./lib/dom"),y=e("./lib/lang"),a=e("./config"),d=e("./layer/gutter").Gutter,o=e("./layer/marker").Marker,i=e("./layer/text").Text,u=e("./layer/cursor").Cursor,c=e("./scrollbar").HScrollBar,s=e("./scrollbar").VScrollBar,l=e("./scrollbar_custom").HScrollBar,h=e("./scrollbar_custom").VScrollBar,m=e("./renderloop").RenderLoop,w=e("./layer/font_metrics").FontMetrics,C=e("./lib/event_emitter").EventEmitter,A=e("./css/editor-css"),E=e("./layer/decorators").Decorator,b=e("./lib/useragent"),L=e("./layer/text_util").isTextToken;g.importCssString(A,"ace_editor.css",!1);var _=function(){function k(T,O){var $=this;this.container=T||g.createElement("div"),g.addCssClass(this.container,"ace_editor"),g.HI_DPI&&g.addCssClass(this.container,"ace_hidpi"),this.setTheme(O),a.get("useStrictCSP")==null&&a.set("useStrictCSP",!1),this.$gutter=g.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=g.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=g.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new d(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new o(this.content);var v=this.$textLayer=new i(this.content);this.canvas=v.element,this.$markerFront=new o(this.content),this.$cursorLayer=new u(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new s(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.on("scroll",function(S){$.$scrollAnimation||$.session.setScrollTop(S.data-$.scrollMargin.top)}),this.scrollBarH.on("scroll",function(S){$.$scrollAnimation||$.session.setScrollLeft(S.data-$.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new w(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(S){$.updateCharacterSize(),$.onResize(!0,$.gutterWidth,$.$size.width,$.$size.height),$._signal("changeCharacterSize",S)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!b.isIOS,this.$loop=new m(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),a.resetOptions(this),a._signal("renderer",this)}return k.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),g.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},k.prototype.setSession=function(T){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=T,T&&this.scrollMargin.top&&T.getScrollTop()<=0&&T.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(T),this.$markerBack.setSession(T),this.$markerFront.setSession(T),this.$gutterLayer.setSession(T),this.$textLayer.setSession(T),T&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},k.prototype.updateLines=function(T,O,$){if(O===void 0&&(O=1/0),this.$changedLines?(this.$changedLines.firstRow>T&&(this.$changedLines.firstRow=T),this.$changedLines.lastRow<O&&(this.$changedLines.lastRow=O)):this.$changedLines={firstRow:T,lastRow:O},this.$changedLines.lastRow<this.layerConfig.firstRow)if($)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},k.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},k.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},k.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},k.prototype.updateFull=function(T){T?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},k.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},k.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},k.prototype.onResize=function(T,O,$,v){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=T?1:0;var S=this.container;v||(v=S.clientHeight||S.scrollHeight),!v&&this.$maxLines&&this.lineHeight>1&&(!S.style.height||S.style.height=="0px")&&(S.style.height="1px",v=S.clientHeight||S.scrollHeight),$||($=S.clientWidth||S.scrollWidth);var x=this.$updateCachedSize(T,O,$,v);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!$&&!v)return this.resizing=0;T&&(this.$gutterLayer.$padding=null),T?this.$renderChanges(x|this.$changes,!0):this.$loop.schedule(x|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},k.prototype.$updateCachedSize=function(T,O,$,v){v-=this.$extraHeight||0;var S=0,x=this.$size,M={width:x.width,height:x.height,scrollerHeight:x.scrollerHeight,scrollerWidth:x.scrollerWidth};if(v&&(T||x.height!=v)&&(x.height=v,S|=this.CHANGE_SIZE,x.scrollerHeight=x.height,this.$horizScroll&&(x.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(x.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",S=S|this.CHANGE_SCROLL),$&&(T||x.width!=$)){S|=this.CHANGE_SIZE,x.width=$,O==null&&(O=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=O,g.setStyle(this.scrollBarH.element.style,"left",O+"px"),g.setStyle(this.scroller.style,"left",O+this.margin.left+"px"),x.scrollerWidth=Math.max(0,$-O-this.scrollBarV.getWidth()-this.margin.h),g.setStyle(this.$gutter.style,"left",this.margin.left+"px");var R=this.scrollBarV.getWidth()+"px";g.setStyle(this.scrollBarH.element.style,"right",R),g.setStyle(this.scroller.style,"right",R),g.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(x.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||T)&&(S|=this.CHANGE_FULL)}return x.$dirty=!$||!v,S&&this._signal("resize",M),S},k.prototype.onGutterResize=function(T){var O=this.$showGutter?T:0;O!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,O,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},k.prototype.adjustWrapLimit=function(){var T=this.$size.scrollerWidth-this.$padding*2,O=Math.floor(T/this.characterWidth);return this.session.adjustWrapLimit(O,this.$showPrintMargin&&this.$printMarginColumn)},k.prototype.setAnimatedScroll=function(T){this.setOption("animatedScroll",T)},k.prototype.getAnimatedScroll=function(){return this.$animatedScroll},k.prototype.setShowInvisibles=function(T){this.setOption("showInvisibles",T),this.session.$bidiHandler.setShowInvisibles(T)},k.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},k.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},k.prototype.setDisplayIndentGuides=function(T){this.setOption("displayIndentGuides",T)},k.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},k.prototype.setHighlightIndentGuides=function(T){this.setOption("highlightIndentGuides",T)},k.prototype.setShowPrintMargin=function(T){this.setOption("showPrintMargin",T)},k.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},k.prototype.setPrintMarginColumn=function(T){this.setOption("printMarginColumn",T)},k.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},k.prototype.getShowGutter=function(){return this.getOption("showGutter")},k.prototype.setShowGutter=function(T){return this.setOption("showGutter",T)},k.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},k.prototype.setFadeFoldWidgets=function(T){this.setOption("fadeFoldWidgets",T)},k.prototype.setHighlightGutterLine=function(T){this.setOption("highlightGutterLine",T)},k.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},k.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var T=g.createElement("div");T.className="ace_layer ace_print-margin-layer",this.$printMarginEl=g.createElement("div"),this.$printMarginEl.className="ace_print-margin",T.appendChild(this.$printMarginEl),this.content.insertBefore(T,this.content.firstChild)}var O=this.$printMarginEl.style;O.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",O.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},k.prototype.getContainerElement=function(){return this.container},k.prototype.getMouseEventTarget=function(){return this.scroller},k.prototype.getTextAreaContainer=function(){return this.container},k.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var T=this.textarea.style,O=this.$composition;if(!this.$keepTextAreaAtCursor&&!O){g.translate(this.textarea,-100,0);return}var $=this.$cursorLayer.$pixelPos;if($){O&&O.markerRange&&($=this.$cursorLayer.getPixelPosition(O.markerRange.start,!0));var v=this.layerConfig,S=$.top,x=$.left;S-=v.offset;var M=O&&O.useTextareaForIME||b.isMobile?this.lineHeight:1;if(S<0||S>v.height-M){g.translate(this.textarea,0,0);return}var R=1,I=this.$size.height-M;if(!O)S+=this.lineHeight;else if(O.useTextareaForIME){var D=this.textarea.value;R=this.characterWidth*this.session.$getStringScreenWidth(D)[0]}else S+=this.lineHeight+2;x-=this.scrollLeft,x>this.$size.scrollerWidth-R&&(x=this.$size.scrollerWidth-R),x+=this.gutterWidth+this.margin.left,g.setStyle(T,"height",M+"px"),g.setStyle(T,"width",R+"px"),g.translate(this.textarea,Math.min(x,this.$size.scrollerWidth-R),Math.min(S,I))}}},k.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},k.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},k.prototype.getLastFullyVisibleRow=function(){var T=this.layerConfig,O=T.lastRow,$=this.session.documentToScreenRow(O,0)*T.lineHeight;return $-this.session.getScrollTop()>T.height-T.lineHeight?O-1:O},k.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},k.prototype.setPadding=function(T){this.$padding=T,this.$textLayer.setPadding(T),this.$cursorLayer.setPadding(T),this.$markerFront.setPadding(T),this.$markerBack.setPadding(T),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},k.prototype.setScrollMargin=function(T,O,$,v){var S=this.scrollMargin;S.top=T|0,S.bottom=O|0,S.right=v|0,S.left=$|0,S.v=S.top+S.bottom,S.h=S.left+S.right,S.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-S.top),this.updateFull()},k.prototype.setMargin=function(T,O,$,v){var S=this.margin;S.top=T|0,S.bottom=O|0,S.right=v|0,S.left=$|0,S.v=S.top+S.bottom,S.h=S.left+S.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},k.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},k.prototype.setHScrollBarAlwaysVisible=function(T){this.setOption("hScrollBarAlwaysVisible",T)},k.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},k.prototype.setVScrollBarAlwaysVisible=function(T){this.setOption("vScrollBarAlwaysVisible",T)},k.prototype.$updateScrollBarV=function(){var T=this.layerConfig.maxHeight,O=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(T-=(O-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>T-O&&(T=this.scrollTop+O,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(T+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},k.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},k.prototype.freeze=function(){this.$frozen=!0},k.prototype.unfreeze=function(){this.$frozen=!1},k.prototype.$renderChanges=function(T,O){if(this.$changes&&(T|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!T&&!O){this.$changes|=T;return}if(this.$size.$dirty)return this.$changes|=T,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",T),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var $=this.layerConfig;if(T&this.CHANGE_FULL||T&this.CHANGE_SIZE||T&this.CHANGE_TEXT||T&this.CHANGE_LINES||T&this.CHANGE_SCROLL||T&this.CHANGE_H_SCROLL){if(T|=this.$computeLayerConfig()|this.$loop.clear(),$.firstRow!=this.layerConfig.firstRow&&$.firstRowScreen==this.layerConfig.firstRowScreen){var v=this.scrollTop+($.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;v>0&&(this.scrollTop=v,T=T|this.CHANGE_SCROLL,T|=this.$computeLayerConfig()|this.$loop.clear())}$=this.layerConfig,this.$updateScrollBarV(),T&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),g.translate(this.content,-this.scrollLeft,-$.offset);var S=$.width+2*this.$padding+"px",x=$.minHeight+"px";g.setStyle(this.content.style,"width",S),g.setStyle(this.content.style,"height",x)}if(T&this.CHANGE_H_SCROLL&&(g.translate(this.content,-this.scrollLeft,-$.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),T&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update($),this.$showGutter&&this.$gutterLayer.update($),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators($),this.$markerBack.update($),this.$markerFront.update($),this.$cursorLayer.update($),this.$moveTextAreaToCursor(),this._signal("afterRender",T);return}if(T&this.CHANGE_SCROLL){this.$changedLines=null,T&this.CHANGE_TEXT||T&this.CHANGE_LINES?this.$textLayer.update($):this.$textLayer.scrollLines($),this.$showGutter&&(T&this.CHANGE_GUTTER||T&this.CHANGE_LINES?this.$gutterLayer.update($):this.$gutterLayer.scrollLines($)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators($),this.$markerBack.update($),this.$markerFront.update($),this.$cursorLayer.update($),this.$moveTextAreaToCursor(),this._signal("afterRender",T);return}T&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update($),this.$showGutter&&this.$gutterLayer.update($),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators($)):T&this.CHANGE_LINES?((this.$updateLines()||T&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update($),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators($)):T&this.CHANGE_TEXT||T&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update($),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators($)):T&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight($),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators($)),T&this.CHANGE_CURSOR&&(this.$cursorLayer.update($),this.$moveTextAreaToCursor()),T&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update($),T&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update($),this._signal("afterRender",T)},k.prototype.$autosize=function(){var T=this.session.getScreenLength()*this.lineHeight,O=this.$maxLines*this.lineHeight,$=Math.min(O,Math.max((this.$minLines||1)*this.lineHeight,T))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&($+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&$>this.$maxPixelHeight&&($=this.$maxPixelHeight);var v=$<=2*this.lineHeight,S=!v&&T>O;if($!=this.desiredHeight||this.$size.height!=this.desiredHeight||S!=this.$vScroll){S!=this.$vScroll&&(this.$vScroll=S,this.scrollBarV.setVisible(S));var x=this.container.clientWidth;this.container.style.height=$+"px",this.$updateCachedSize(!0,this.$gutterWidth,x,$),this.desiredHeight=$,this._signal("autosize")}},k.prototype.$computeLayerConfig=function(){var T=this.session,O=this.$size,$=O.height<=2*this.lineHeight,v=this.session.getScreenLength(),S=v*this.lineHeight,x=this.$getLongestLine(),M=!$&&(this.$hScrollBarAlwaysVisible||O.scrollerWidth-x-2*this.$padding<0),R=this.$horizScroll!==M;R&&(this.$horizScroll=M,this.scrollBarH.setVisible(M));var I=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var D=O.scrollerHeight+this.lineHeight,N=!this.$maxLines&&this.$scrollPastEnd?(O.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;S+=N;var B=this.scrollMargin;this.session.setScrollTop(Math.max(-B.top,Math.min(this.scrollTop,S-O.scrollerHeight+B.bottom))),this.session.setScrollLeft(Math.max(-B.left,Math.min(this.scrollLeft,x+2*this.$padding-O.scrollerWidth+B.right)));var W=!$&&(this.$vScrollBarAlwaysVisible||O.scrollerHeight-S+N<0||this.scrollTop>B.top),F=I!==W;F&&(this.$vScroll=W,this.scrollBarV.setVisible(W));var H=this.scrollTop%this.lineHeight,z=Math.ceil(D/this.lineHeight)-1,P=Math.max(0,Math.round((this.scrollTop-H)/this.lineHeight)),U=P+z,G,K,V=this.lineHeight;P=T.screenToDocumentRow(P,0);var Y=T.getFoldLine(P);Y&&(P=Y.start.row),G=T.documentToScreenRow(P,0),K=T.getRowLength(P)*V,U=Math.min(T.screenToDocumentRow(U,0),T.getLength()-1),D=O.scrollerHeight+T.getRowLength(U)*V+K,H=this.scrollTop-G*V;var q=0;return(this.layerConfig.width!=x||R)&&(q=this.CHANGE_H_SCROLL),(R||F)&&(q|=this.$updateCachedSize(!0,this.gutterWidth,O.width,O.height),this._signal("scrollbarVisibilityChanged"),F&&(x=this.$getLongestLine())),this.layerConfig={width:x,padding:this.$padding,firstRow:P,firstRowScreen:G,lastRow:U,lineHeight:V,characterWidth:this.characterWidth,minHeight:D,maxHeight:S,offset:H,gutterOffset:V?Math.max(0,Math.ceil((H+O.height-O.scrollerHeight)/V)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(x-this.$padding),q},k.prototype.$updateLines=function(){if(this.$changedLines){var T=this.$changedLines.firstRow,O=this.$changedLines.lastRow;this.$changedLines=null;var $=this.layerConfig;if(!(T>$.lastRow+1)&&!(O<$.firstRow)){if(O===1/0){this.$showGutter&&this.$gutterLayer.update($),this.$textLayer.update($);return}return this.$textLayer.updateLines($,T,O),!0}}},k.prototype.$getLongestLine=function(){var T=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(T+=1),this.$textLayer&&T>this.$textLayer.MAX_LINE_LENGTH&&(T=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(T*this.characterWidth))},k.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},k.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},k.prototype.addGutterDecoration=function(T,O){this.$gutterLayer.addGutterDecoration(T,O)},k.prototype.removeGutterDecoration=function(T,O){this.$gutterLayer.removeGutterDecoration(T,O)},k.prototype.updateBreakpoints=function(T){this._rows=T,this.$loop.schedule(this.CHANGE_GUTTER)},k.prototype.setAnnotations=function(T){this.$gutterLayer.setAnnotations(T),this.$loop.schedule(this.CHANGE_GUTTER)},k.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},k.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},k.prototype.showCursor=function(){this.$cursorLayer.showCursor()},k.prototype.scrollSelectionIntoView=function(T,O,$){this.scrollCursorIntoView(T,$),this.scrollCursorIntoView(O,$)},k.prototype.scrollCursorIntoView=function(T,O,$){if(this.$size.scrollerHeight!==0){var v=this.$cursorLayer.getPixelPosition(T),S=v.left,x=v.top,M=$&&$.top||0,R=$&&$.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var I=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;I+M>x?(O&&I+M>x+this.lineHeight&&(x-=O*this.$size.scrollerHeight),x===0&&(x=-this.scrollMargin.top),this.session.setScrollTop(x)):I+this.$size.scrollerHeight-R<x+this.lineHeight&&(O&&I+this.$size.scrollerHeight-R<x-this.lineHeight&&(x+=O*this.$size.scrollerHeight),this.session.setScrollTop(x+this.lineHeight+R-this.$size.scrollerHeight));var D=this.scrollLeft,N=2*this.layerConfig.characterWidth;S-N<D?(S-=N,S<this.$padding+N&&(S=-this.scrollMargin.left),this.session.setScrollLeft(S)):(S+=N,D+this.$size.scrollerWidth<S+this.characterWidth?this.session.setScrollLeft(Math.round(S+this.characterWidth-this.$size.scrollerWidth)):D<=this.$padding&&S-D<this.characterWidth&&this.session.setScrollLeft(0))}},k.prototype.getScrollTop=function(){return this.session.getScrollTop()},k.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},k.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},k.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},k.prototype.scrollToRow=function(T){this.session.setScrollTop(T*this.lineHeight)},k.prototype.alignCursor=function(T,O){typeof T=="number"&&(T={row:T,column:0});var $=this.$cursorLayer.getPixelPosition(T),v=this.$size.scrollerHeight-this.lineHeight,S=$.top-v*(O||0);return this.session.setScrollTop(S),S},k.prototype.$calcSteps=function(T,O){var $=0,v=this.STEPS,S=[],x=function(M,R,I){return I*(Math.pow(M-1,3)+1)+R};for($=0;$<v;++$)S.push(x($/this.STEPS,T,O-T));return S},k.prototype.scrollToLine=function(T,O,$,v){var S=this.$cursorLayer.getPixelPosition({row:T,column:0}),x=S.top;O&&(x-=this.$size.scrollerHeight/2);var M=this.scrollTop;this.session.setScrollTop(x),$!==!1&&this.animateScrolling(M,v)},k.prototype.animateScrolling=function(T,O){var $=this.scrollTop;if(!this.$animatedScroll)return;var v=this;if(T==$)return;if(this.$scrollAnimation){var S=this.$scrollAnimation.steps;if(S.length&&(T=S[0],T==$))return}var x=v.$calcSteps(T,$);this.$scrollAnimation={from:T,to:$,steps:x},clearInterval(this.$timer),v.session.setScrollTop(x.shift()),v.session.$scrollTop=$;function M(){v.$timer=clearInterval(v.$timer),v.$scrollAnimation=null,v.$stopAnimation=!1,O&&O()}this.$timer=setInterval(function(){if(v.$stopAnimation){M();return}if(!v.session)return clearInterval(v.$timer);x.length?(v.session.setScrollTop(x.shift()),v.session.$scrollTop=$):$!=null?(v.session.$scrollTop=-1,v.session.setScrollTop($),$=null):M()},10)},k.prototype.scrollToY=function(T){this.scrollTop!==T&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=T)},k.prototype.scrollToX=function(T){this.scrollLeft!==T&&(this.scrollLeft=T),this.$loop.schedule(this.CHANGE_H_SCROLL)},k.prototype.scrollTo=function(T,O){this.session.setScrollTop(O),this.session.setScrollLeft(T)},k.prototype.scrollBy=function(T,O){O&&this.session.setScrollTop(this.session.getScrollTop()+O),T&&this.session.setScrollLeft(this.session.getScrollLeft()+T)},k.prototype.isScrollableBy=function(T,O){if(O<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||O>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||T<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||T>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},k.prototype.pixelToScreenCoordinates=function(T,O){var $;if(this.$hasCssTransforms){$={top:0,left:0};var v=this.$fontMetrics.transformCoordinates([T,O]);T=v[1]-this.gutterWidth-this.margin.left,O=v[0]}else $=this.scroller.getBoundingClientRect();var S=T+this.scrollLeft-$.left-this.$padding,x=S/this.characterWidth,M=Math.floor((O+this.scrollTop-$.top)/this.lineHeight),R=this.$blockCursor?Math.floor(x):Math.round(x);return{row:M,column:R,side:x-R>0?1:-1,offsetX:S}},k.prototype.screenToTextCoordinates=function(T,O){var $;if(this.$hasCssTransforms){$={top:0,left:0};var v=this.$fontMetrics.transformCoordinates([T,O]);T=v[1]-this.gutterWidth-this.margin.left,O=v[0]}else $=this.scroller.getBoundingClientRect();var S=T+this.scrollLeft-$.left-this.$padding,x=S/this.characterWidth,M=this.$blockCursor?Math.floor(x):Math.round(x),R=Math.floor((O+this.scrollTop-$.top)/this.lineHeight);return this.session.screenToDocumentPosition(R,Math.max(M,0),S)},k.prototype.textToScreenCoordinates=function(T,O){var $=this.scroller.getBoundingClientRect(),v=this.session.documentToScreenPosition(T,O),S=this.$padding+(this.session.$bidiHandler.isBidiRow(v.row,T)?this.session.$bidiHandler.getPosLeft(v.column):Math.round(v.column*this.characterWidth)),x=v.row*this.lineHeight;return{pageX:$.left+S-this.scrollLeft,pageY:$.top+x-this.scrollTop}},k.prototype.visualizeFocus=function(){g.addCssClass(this.container,"ace_focus")},k.prototype.visualizeBlur=function(){g.removeCssClass(this.container,"ace_focus")},k.prototype.showComposition=function(T){this.$composition=T,T.cssText||(T.cssText=this.textarea.style.cssText),T.useTextareaForIME==null&&(T.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(g.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):T.markerId=this.session.addMarker(T.markerRange,"ace_composition_marker","text")},k.prototype.setCompositionText=function(T){var O=this.session.selection.cursor;this.addToken(T,"composition_placeholder",O.row,O.column),this.$moveTextAreaToCursor()},k.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),g.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var T=this.session.selection.cursor;this.removeExtraToken(T.row,T.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},k.prototype.setGhostText=function(T,O){var $=this.session.selection.cursor,v=O||{row:$.row,column:$.column};this.removeGhostText();var S=this.$calculateWrappedTextChunks(T,v);this.addToken(S[0].text,"ghost_text",v.row,v.column),this.$ghostText={text:T,position:{row:v.row,column:v.column}};var x=g.createElement("div");if(S.length>1){var M=this.hideTokensAfterPosition(v.row,v.column),R;S.slice(1).forEach(function(F){var H=g.createElement("div"),z=g.createElement("span");z.className="ace_ghost_text",F.wrapped&&(H.className="ghost_text_line_wrapped"),F.text.length===0&&(F.text=" "),z.appendChild(g.createTextNode(F.text)),H.appendChild(z),x.appendChild(H),R=H}),M.forEach(function(F){var H=g.createElement("span");L(F.type)||(H.className="ace_"+F.type.replace(/\./g," ace_")),H.appendChild(g.createTextNode(F.value)),R.appendChild(H)}),this.$ghostTextWidget={el:x,row:v.row,column:v.column,className:"ace_ghost_text_container"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var I=this.$cursorLayer.getPixelPosition(v,!0),D=this.container,N=D.getBoundingClientRect().height,B=S.length*this.lineHeight,W=B<N-I.top;if(W)return;B<N?this.scrollBy(0,(S.length-1)*this.lineHeight):this.scrollToRow(v.row)}},k.prototype.$calculateWrappedTextChunks=function(T,O){var $=this.$size.scrollerWidth-this.$padding*2,v=Math.floor($/this.characterWidth)-2;v=v<=0?60:v;for(var S=T.split(/\r?\n/),x=[],M=0;M<S.length;M++){var R=this.session.$getDisplayTokens(S[M],O.column),I=this.session.$computeWrapSplits(R,v,this.session.$tabSize);if(I.length>0){var D=0;I.push(S[M].length);for(var N=0;N<I.length;N++){var B=S[M].slice(D,I[N]);x.push({text:B,wrapped:!0}),D=I[N]}}else x.push({text:S[M],wrapped:!1})}return x},k.prototype.removeGhostText=function(){if(this.$ghostText){var T=this.$ghostText.position;this.removeExtraToken(T.row,T.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},k.prototype.addToken=function(T,O,$,v){var S=this.session;S.bgTokenizer.lines[$]=null;var x={type:O,value:T},M=S.getTokens($);if(v==null||!M.length)M.push(x);else for(var R=0,I=0;I<M.length;I++){var D=M[I];if(R+=D.value.length,v<=R){var N=D.value.length-(R-v),B=D.value.slice(0,N),W=D.value.slice(N);M.splice(I,1,{type:D.type,value:B},x,{type:D.type,value:W});break}}this.updateLines($,$)},k.prototype.hideTokensAfterPosition=function(T,O){for(var $=this.session.getTokens(T),v=0,S=!1,x=[],M=0;M<$.length;M++){var R=$[M];if(v+=R.value.length,R.type!=="ghost_text"){if(S){x.push({type:R.type,value:R.value}),R.type="hidden_token";continue}v===O&&(S=!0)}}return this.updateLines(T,T),x},k.prototype.removeExtraToken=function(T,O){this.session.bgTokenizer.lines[T]=null,this.updateLines(T,T)},k.prototype.setTheme=function(T,O){var $=this;if(this.$themeId=T,$._dispatchEvent("themeChange",{theme:T}),!T||typeof T=="string"){var v=T||this.$options.theme.initialValue;a.loadModule(["theme",v],S)}else S(T);function S(x){if($.$themeId!=T)return O&&O();if(!x||!x.cssClass)throw new Error("couldn't load module "+T+" or it didn't call define");x.$id&&($.$themeId=x.$id),g.importCssString(x.cssText,x.cssClass,$.container),$.theme&&g.removeCssClass($.container,$.theme.cssClass);var M="padding"in x?x.padding:"padding"in($.theme||{})?4:$.$padding;$.$padding&&M!=$.$padding&&$.setPadding(M),$.$theme=x.cssClass,$.theme=x,g.addCssClass($.container,x.cssClass),g.setCssClass($.container,"ace_dark",x.isDark),$.$size&&($.$size.width=0,$.$updateSizeAsync()),$._dispatchEvent("themeLoaded",{theme:x}),O&&O(),b.isSafari&&$.scroller&&($.scroller.style.background="red",$.scroller.style.background="")}},k.prototype.getTheme=function(){return this.$themeId},k.prototype.setStyle=function(T,O){g.setCssClass(this.container,T,O!==!1)},k.prototype.unsetStyle=function(T){g.removeCssClass(this.container,T)},k.prototype.setCursorStyle=function(T){g.setStyle(this.scroller.style,"cursor",T)},k.prototype.setMouseCursor=function(T){g.setStyle(this.scroller.style,"cursor",T)},k.prototype.attachToShadowRoot=function(){g.importCssString(A,"ace_editor.css",this.container)},k.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},k.prototype.$updateCustomScrollbar=function(T){var O=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,T===!0?(this.scrollBarV=new h(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function($){O.$scrollAnimation||O.session.setScrollTop($.data-O.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function($){O.$scrollAnimation||O.session.setScrollLeft($.data-O.scrollMargin.left)}),this.$scrollDecorator=new E(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new s(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.addEventListener("scroll",function($){O.$scrollAnimation||O.session.setScrollTop($.data-O.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function($){O.$scrollAnimation||O.session.setScrollLeft($.data-O.scrollMargin.left)}))},k.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var T=this;this.$resizeTimer=y.delayedCall(function(){T.destroyed||T.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(O){var $=O[0].contentRect.width,v=O[0].contentRect.height;Math.abs(T.$size.width-$)>1||Math.abs(T.$size.height-v)>1?T.$resizeTimer.delay():T.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},k}();_.prototype.CHANGE_CURSOR=1,_.prototype.CHANGE_MARKER=2,_.prototype.CHANGE_GUTTER=4,_.prototype.CHANGE_SCROLL=8,_.prototype.CHANGE_LINES=16,_.prototype.CHANGE_TEXT=32,_.prototype.CHANGE_SIZE=64,_.prototype.CHANGE_MARKER_BACK=128,_.prototype.CHANGE_MARKER_FRONT=256,_.prototype.CHANGE_FULL=512,_.prototype.CHANGE_H_SCROLL=1024,_.prototype.$changes=0,_.prototype.$padding=null,_.prototype.$frozen=!1,_.prototype.STEPS=8,f.implement(_.prototype,C),a.defineOptions(_.prototype,"renderer",{useResizeObserver:{set:function(k){!k&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):k&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(k){this.$textLayer.setShowInvisibles(k)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(k){typeof k=="number"&&(this.$printMarginColumn=k),this.$showPrintMargin=!!k,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(k){this.$gutter.style.display=k?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(k){this.$gutterLayer.$useSvgGutterIcons=k},initialValue:!1},showFoldedAnnotations:{set:function(k){this.$gutterLayer.$showFoldedAnnotations=k},initialValue:!1},fadeFoldWidgets:{set:function(k){g.setCssClass(this.$gutter,"ace_fade-fold-widgets",k)},initialValue:!1},showFoldWidgets:{set:function(k){this.$gutterLayer.setShowFoldWidgets(k),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(k){this.$textLayer.setDisplayIndentGuides(k)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(k){this.$textLayer.setHighlightIndentGuides(k)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(k){this.$gutterLayer.setHighlightGutterLine(k),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(k){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(k){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(k){typeof k=="number"&&(k=k+"px"),this.container.style.fontSize=k,this.updateFontSize()},initialValue:12},fontFamily:{set:function(k){this.container.style.fontFamily=k,this.updateFontSize()}},maxLines:{set:function(k){this.updateFull()}},minLines:{set:function(k){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(k){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(k){k=+k||0,this.$scrollPastEnd!=k&&(this.$scrollPastEnd=k,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(k){this.$gutterLayer.$fixedWidth=!!k,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(k){this.$updateCustomScrollbar(k)},initialValue:!1},theme:{set:function(k){this.setTheme(k)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!b.isMobile&&!b.isIE}}),r.VirtualRenderer=_}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,r,p){var f=e("../lib/oop"),g=e("../lib/net"),y=e("../lib/event_emitter").EventEmitter,a=e("../config");function d(c){var s="importScripts('"+g.qualifyURL(c)+"');";try{return new Blob([s],{type:"application/javascript"})}catch{var l=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,h=new l;return h.append(s),h.getBlob("application/javascript")}}function o(c){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(a.get("loadWorkerFromBlob")){var s=d(c),l=window.URL||window.webkitURL,h=l.createObjectURL(s);return new Worker(h)}return new Worker(c)}var i=function(c){c.postMessage||(c=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=c,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){f.implement(this,y),this.$createWorkerFromOldConfig=function(c,s,l,h,m){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),a.get("packaged")||!e.toUrl)h=h||a.moduleUrl(s,"worker");else{var w=this.$normalizePath;h=h||w(e.toUrl("ace/worker/worker.js",null,"_"));var C={};c.forEach(function(A){C[A]=w(e.toUrl(A,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=o(h),m&&this.send("importScripts",m),this.$worker.postMessage({init:!0,tlns:C,module:s,classname:l}),this.$worker},this.onMessage=function(c){var s=c.data;switch(s.type){case"event":this._signal(s.name,{data:s.data});break;case"call":var l=this.callbacks[s.id];l&&(l(s.data),delete this.callbacks[s.id]);break;case"error":this.reportError(s.data);break;case"log":window.console&&console.log&&console.log.apply(console,s.data);break}},this.reportError=function(c){window.console&&console.error&&console.error(c)},this.$normalizePath=function(c){return g.qualifyURL(c)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(c){c.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(c,s){this.$worker.postMessage({command:c,args:s})},this.call=function(c,s,l){if(l){var h=this.callbackId++;this.callbacks[h]=l,s.push(h)}this.send(c,s)},this.emit=function(c,s){try{s.data&&s.data.err&&(s.data.err={message:s.data.err.message,stack:s.data.err.stack,code:s.data.err.code}),this.$worker&&this.$worker.postMessage({event:c,data:{data:s.data}})}catch(l){console.error(l.stack)}},this.attachToDocument=function(c){this.$doc&&this.terminate(),this.$doc=c,this.call("setValue",[c.getValue()]),c.on("change",this.changeListener,!0)},this.changeListener=function(c){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),c.action=="insert"?this.deltaQueue.push(c.start,c.lines):this.deltaQueue.push(c.start,c.end)},this.$sendDeltaQueue=function(){var c=this.deltaQueue;c&&(this.deltaQueue=null,c.length>50&&c.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:c}))}}).call(i.prototype);var u=function(c,s,l){var h=null,m=!1,w=Object.create(y),C=[],A=new i({messageBuffer:C,terminate:function(){},postMessage:function(b){C.push(b),h&&(m?setTimeout(E):E())}});A.setEmitSync=function(b){m=b};var E=function(){var b=C.shift();b.command?h[b.command].apply(h,b.args):b.event&&w._signal(b.event,b.data)};return w.postMessage=function(b){A.onMessage({data:b})},w.callback=function(b,L){this.postMessage({type:"call",id:L,data:b})},w.emit=function(b,L){this.postMessage({type:"event",name:b,data:L})},a.loadModule(["worker",s],function(b){for(h=new b[l](w);C.length;)E()}),A};r.UIWorkerClient=u,r.WorkerClient=i,r.createWorker=o}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,r,p){var f=e("./range").Range,g=e("./lib/event_emitter").EventEmitter,y=e("./lib/oop"),a=function(){function d(o,i,u,c,s,l){var h=this;this.length=i,this.session=o,this.doc=o.getDocument(),this.mainClass=s,this.othersClass=l,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=c,this.$onCursorChange=function(){setTimeout(function(){h.onCursorChange()})},this.$pos=u;var m=o.getUndoManager().$undoStack||o.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=m.length,this.setup(),o.selection.on("changeCursor",this.$onCursorChange)}return d.prototype.setup=function(){var o=this,i=this.doc,u=this.session;this.selectionBefore=u.selection.toJSON(),u.selection.inMultiSelectMode&&u.selection.toSingleRange(),this.pos=i.createAnchor(this.$pos.row,this.$pos.column);var c=this.pos;c.$insertRight=!0,c.detach(),c.markerId=u.addMarker(new f(c.row,c.column,c.row,c.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(s){var l=i.createAnchor(s.row,s.column);l.$insertRight=!0,l.detach(),o.others.push(l)}),u.setUndoSelect(!1)},d.prototype.showOtherMarkers=function(){if(!this.othersActive){var o=this.session,i=this;this.othersActive=!0,this.others.forEach(function(u){u.markerId=o.addMarker(new f(u.row,u.column,u.row,u.column+i.length),i.othersClass,null,!1)})}},d.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var o=0;o<this.others.length;o++)this.session.removeMarker(this.others[o].markerId)}},d.prototype.onUpdate=function(o){if(this.$updating)return this.updateAnchors(o);var i=o;if(i.start.row===i.end.row&&i.start.row===this.pos.row){this.$updating=!0;var u=o.action==="insert"?i.end.column-i.start.column:i.start.column-i.end.column,c=i.start.column>=this.pos.column&&i.start.column<=this.pos.column+this.length+1,s=i.start.column-this.pos.column;if(this.updateAnchors(o),c&&(this.length+=u),c&&!this.session.$fromUndo){if(o.action==="insert")for(var l=this.others.length-1;l>=0;l--){var h=this.others[l],m={row:h.row,column:h.column+s};this.doc.insertMergedLines(m,o.lines)}else if(o.action==="remove")for(var l=this.others.length-1;l>=0;l--){var h=this.others[l],m={row:h.row,column:h.column+s};this.doc.remove(new f(m.row,m.column,m.row,m.column-u))}}this.$updating=!1,this.updateMarkers()}},d.prototype.updateAnchors=function(o){this.pos.onChange(o);for(var i=this.others.length;i--;)this.others[i].onChange(o);this.updateMarkers()},d.prototype.updateMarkers=function(){if(!this.$updating){var o=this,i=this.session,u=function(s,l){i.removeMarker(s.markerId),s.markerId=i.addMarker(new f(s.row,s.column,s.row,s.column+o.length),l,null,!1)};u(this.pos,this.mainClass);for(var c=this.others.length;c--;)u(this.others[c],this.othersClass)}},d.prototype.onCursorChange=function(o){if(!(this.$updating||!this.session)){var i=this.session.selection.getCursor();i.row===this.pos.row&&i.column>=this.pos.column&&i.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",o)):(this.hideOtherMarkers(),this._emit("cursorLeave",o))}},d.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},d.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var o=this.session.getUndoManager(),i=(o.$undoStack||o.$undostack).length-this.$undoStackDepth,u=0;u<i;u++)o.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},d}();y.implement(a.prototype,g),r.PlaceHolder=a}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,r,p){var f=e("../lib/event"),g=e("../lib/useragent");function y(d,o){return d.row==o.row&&d.column==o.column}function a(d){var o=d.domEvent,i=o.altKey,u=o.shiftKey,c=o.ctrlKey,s=d.getAccelKey(),l=d.getButton();if(c&&g.isMac&&(l=o.button),d.editor.inMultiSelectMode&&l==2){d.editor.textInput.onContextMenu(d.domEvent);return}if(!c&&!i&&!s){l===0&&d.editor.inMultiSelectMode&&d.editor.exitMultiSelectMode();return}if(l===0){var h=d.editor,m=h.selection,w=h.inMultiSelectMode,C=d.getDocumentPosition(),A=m.getCursor(),E=d.inSelection()||m.isEmpty()&&y(C,A),b=d.x,L=d.y,_=function(B){b=B.clientX,L=B.clientY},k=h.session,T=h.renderer.pixelToScreenCoordinates(b,L),O=T,$;if(h.$mouseHandler.$enableJumpToDef)c&&i||s&&i?$=u?"block":"add":i&&h.$blockSelectEnabled&&($="block");else if(s&&!i){if($="add",!w&&u)return}else i&&h.$blockSelectEnabled&&($="block");if($&&g.isMac&&o.ctrlKey&&h.$mouseHandler.cancelContextMenu(),$=="add"){if(!w&&E)return;if(!w){var v=m.toOrientedRange();h.addSelectionMarker(v)}var S=m.rangeList.rangeAtPoint(C);h.inVirtualSelectionMode=!0,u&&(S=null,v=m.ranges[0]||v,h.removeSelectionMarker(v)),h.once("mouseup",function(){var B=m.toOrientedRange();S&&B.isEmpty()&&y(S.cursor,B.cursor)?m.substractPoint(B.cursor):(u?m.substractPoint(v.cursor):v&&(h.removeSelectionMarker(v),m.addRange(v)),m.addRange(B)),h.inVirtualSelectionMode=!1})}else if($=="block"){d.stop(),h.inVirtualSelectionMode=!0;var x,M=[],R=function(){var B=h.renderer.pixelToScreenCoordinates(b,L),W=k.screenToDocumentPosition(B.row,B.column,B.offsetX);y(O,B)&&y(W,m.lead)||(O=B,h.selection.moveToPosition(W),h.renderer.scrollCursorIntoView(),h.removeSelectionMarkers(M),M=m.rectangularRangeBlock(O,T),h.$mouseHandler.$clickSelection&&M.length==1&&M[0].isEmpty()&&(M[0]=h.$mouseHandler.$clickSelection.clone()),M.forEach(h.addSelectionMarker,h),h.updateSelectionMarkers())};w&&!s?m.toSingleRange():!w&&s&&(x=m.toOrientedRange(),h.addSelectionMarker(x)),u?T=k.documentToScreenPosition(m.lead):m.moveToPosition(C),O={row:-1,column:-1};var I=function(B){R(),clearInterval(N),h.removeSelectionMarkers(M),M.length||(M=[m.toOrientedRange()]),x&&(h.removeSelectionMarker(x),m.toSingleRange(x));for(var W=0;W<M.length;W++)m.addRange(M[W]);h.inVirtualSelectionMode=!1,h.$mouseHandler.$clickSelection=null},D=R;f.capture(h.container,_,I);var N=setInterval(function(){D()},20);return d.preventDefault()}}}r.onMouseDown=a}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,r,p){r.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(g){g.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(g){g.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(g){g.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(g){g.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(g){g.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(g){g.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(g){g.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(g){g.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(g){g.multiSelect.rangeCount>1?g.multiSelect.joinSelections():g.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(g){g.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(g){g.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(g){g.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],r.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(g){g.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(g){return g&&g.inMultiSelectMode}}];var f=e("../keyboard/hash_handler").HashHandler;r.keyboardHandler=new f(r.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,r,p){var f=e("./range_list").RangeList,g=e("./range").Range,y=e("./selection").Selection,a=e("./mouse/multi_select_handler").onMouseDown,d=e("./lib/event"),o=e("./lib/lang"),i=e("./commands/multi_select_commands");r.commands=i.defaultCommands.concat(i.multiSelectCommands);var u=e("./search").Search,c=new u;function s(A,E,b){return c.$options.wrap=!0,c.$options.needle=E,c.$options.backwards=b==-1,c.find(A)}var l=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(l.prototype),(function(){this.ranges=null,this.rangeList=null,this.addRange=function(A,E){if(A){if(!this.inMultiSelectMode&&this.rangeCount===0){var b=this.toOrientedRange();if(this.rangeList.add(b),this.rangeList.add(A),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),E||this.fromOrientedRange(A);this.rangeList.removeAll(),this.rangeList.add(b),this.$onAddRange(b)}A.cursor||(A.cursor=A.end);var L=this.rangeList.add(A);return this.$onAddRange(A),L.length&&this.$onRemoveRange(L),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),E||this.fromOrientedRange(A)}},this.toSingleRange=function(A){A=A||this.ranges[0];var E=this.rangeList.removeAll();E.length&&this.$onRemoveRange(E),A&&this.fromOrientedRange(A)},this.substractPoint=function(A){var E=this.rangeList.substractPoint(A);if(E)return this.$onRemoveRange(E),E[0]},this.mergeOverlappingRanges=function(){var A=this.rangeList.merge();A.length&&this.$onRemoveRange(A)},this.$onAddRange=function(A){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(A),this._signal("addRange",{range:A})},this.$onRemoveRange=function(A){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var E=this.rangeList.ranges.pop();A.push(E),this.rangeCount=0}for(var b=A.length;b--;){var L=this.ranges.indexOf(A[b]);this.ranges.splice(L,1)}this._signal("removeRange",{ranges:A}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),E=E||this.ranges[0],E&&!E.isEqual(this.getRange())&&this.fromOrientedRange(E)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new f,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var A=this.ranges.length?this.ranges:[this.getRange()],E=[],b=0;b<A.length;b++){var L=A[b],_=L.start.row,k=L.end.row;if(_===k)E.push(L.clone());else{for(E.push(new g(_,L.start.column,_,this.session.getLine(_).length));++_<k;)E.push(this.getLineRange(_,!0));E.push(new g(k,0,k,L.end.column))}b==0&&!this.isBackwards()&&(E=E.reverse())}this.toSingleRange();for(var b=E.length;b--;)this.addRange(E[b])},this.joinSelections=function(){var A=this.rangeList.ranges,E=A[A.length-1],b=g.fromPoints(A[0].start,E.end);this.toSingleRange(),this.setSelectionRange(b,E.cursor==E.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var A=this.rangeList.ranges,E=A[A.length-1],b=g.fromPoints(A[0].start,E.end);this.toSingleRange(),this.setSelectionRange(b,E.cursor==E.start)}else{var L=this.session.documentToScreenPosition(this.cursor),_=this.session.documentToScreenPosition(this.anchor),k=this.rectangularRangeBlock(L,_);k.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(A,E,b){var L=[],_=A.column<E.column;if(_)var k=A.column,T=E.column,O=A.offsetX,$=E.offsetX;else var k=E.column,T=A.column,O=E.offsetX,$=A.offsetX;var v=A.row<E.row;if(v)var S=A.row,x=E.row;else var S=E.row,x=A.row;k<0&&(k=0),S<0&&(S=0),S==x&&(b=!0);for(var M,R=S;R<=x;R++){var I=g.fromPoints(this.session.screenToDocumentPosition(R,k,O),this.session.screenToDocumentPosition(R,T,$));if(I.isEmpty()){if(M&&m(I.end,M))break;M=I.end}I.cursor=_?I.start:I.end,L.push(I)}if(v&&L.reverse(),!b){for(var D=L.length-1;L[D].isEmpty()&&D>0;)D--;if(D>0)for(var N=0;L[N].isEmpty();)N++;for(var B=D;B>=N;B--)L[B].isEmpty()&&L.splice(B,1)}return L}}).call(y.prototype);var h=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(A){A.cursor||(A.cursor=A.end);var E=this.getSelectionStyle();return A.marker=this.session.addMarker(A,"ace_selection",E),this.session.$selectionMarkers.push(A),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,A},this.removeSelectionMarker=function(A){if(A.marker){this.session.removeMarker(A.marker);var E=this.session.$selectionMarkers.indexOf(A);E!=-1&&this.session.$selectionMarkers.splice(E,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(A){for(var E=this.session.$selectionMarkers,b=A.length;b--;){var L=A[b];if(L.marker){this.session.removeMarker(L.marker);var _=E.indexOf(L);_!=-1&&E.splice(_,1)}}this.session.selectionMarkerCount=E.length},this.$onAddRange=function(A){this.addSelectionMarker(A.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(A){this.removeSelectionMarkers(A.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(A){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(i.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(A){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(i.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(A){var E=A.command,b=A.editor;if(b.multiSelect){if(E.multiSelectAction)E.multiSelectAction=="forEach"?L=b.forEachSelection(E,A.args):E.multiSelectAction=="forEachLine"?L=b.forEachSelection(E,A.args,!0):E.multiSelectAction=="single"?(b.exitMultiSelectMode(),L=E.exec(b,A.args||{})):L=E.multiSelectAction(b,A.args||{});else{var L=E.exec(b,A.args||{});b.multiSelect.addRange(b.multiSelect.toOrientedRange()),b.multiSelect.mergeOverlappingRanges()}return L}},this.forEachSelection=function(A,E,b){if(!this.inVirtualSelectionMode){var L=b&&b.keepOrder,_=b==!0||b&&b.$byLines,k=this.session,T=this.selection,O=T.rangeList,$=(L?T:O).ranges,v;if(!$.length)return A.exec?A.exec(this,E||{}):A(this,E||{});var S=T._eventRegistry;T._eventRegistry={};var x=new y(k);this.inVirtualSelectionMode=!0;for(var M=$.length;M--;){if(_)for(;M>0&&$[M].start.row==$[M-1].end.row;)M--;x.fromOrientedRange($[M]),x.index=M,this.selection=k.selection=x;var R=A.exec?A.exec(this,E||{}):A(this,E||{});!v&&R!==void 0&&(v=R),x.toOrientedRange($[M])}x.detach(),this.selection=k.selection=T,this.inVirtualSelectionMode=!1,T._eventRegistry=S,T.mergeOverlappingRanges(),T.ranges[0]&&T.fromOrientedRange(T.ranges[0]);var I=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),I&&I.from==I.to&&this.renderer.animateScrolling(I.from),v}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var A="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var E=this.multiSelect.rangeList.ranges,b=[],L=0;L<E.length;L++)b.push(this.session.getTextRange(E[L]));var _=this.session.getDocument().getNewLineCharacter();A=b.join(_),A.length==(b.length-1)*_.length&&(A="")}else this.selection.isEmpty()||(A=this.session.getTextRange(this.getSelectionRange()));return A},this.$checkMultiselectChange=function(A,E){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var b=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&E==this.multiSelect.anchor)return;var L=E==this.multiSelect.anchor?b.cursor==b.start?b.end:b.start:b.cursor;L.row!=E.row||this.session.$clipPositionToDocument(L.row,L.column).column!=E.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(A,E,b){if(E=E||{},E.needle=A||E.needle,E.needle==null){var L=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();E.needle=this.session.getTextRange(L)}this.$search.set(E);var _=this.$search.findAll(this.session);if(!_.length)return 0;var k=this.multiSelect;b||k.toSingleRange(_[0]);for(var T=_.length;T--;)k.addRange(_[T],!0);return L&&k.rangeList.rangeAtPoint(L.start)&&k.addRange(L,!0),_.length},this.selectMoreLines=function(A,E){var b=this.selection.toOrientedRange(),L=b.cursor==b.end,_=this.session.documentToScreenPosition(b.cursor);this.selection.$desiredColumn&&(_.column=this.selection.$desiredColumn);var k=this.session.screenToDocumentPosition(_.row+A,_.column);if(b.isEmpty())var O=k;else var T=this.session.documentToScreenPosition(L?b.end:b.start),O=this.session.screenToDocumentPosition(T.row+A,T.column);if(L){var $=g.fromPoints(k,O);$.cursor=$.start}else{var $=g.fromPoints(O,k);$.cursor=$.end}if($.desiredColumn=_.column,!this.selection.inMultiSelectMode)this.selection.addRange(b);else if(E)var v=b.cursor;this.selection.addRange($),v&&this.selection.substractPoint(v)},this.transposeSelections=function(A){for(var E=this.session,b=E.multiSelect,L=b.ranges,_=L.length;_--;){var k=L[_];if(k.isEmpty()){var T=E.getWordRange(k.start.row,k.start.column);k.start.row=T.start.row,k.start.column=T.start.column,k.end.row=T.end.row,k.end.column=T.end.column}}b.mergeOverlappingRanges();for(var O=[],_=L.length;_--;){var k=L[_];O.unshift(E.getTextRange(k))}A<0?O.unshift(O.pop()):O.push(O.shift());for(var _=L.length;_--;){var k=L[_],$=k.clone();E.replace(k,O[_]),k.start.row=$.start.row,k.start.column=$.start.column}b.fromOrientedRange(b.ranges[0])},this.selectMore=function(A,E,b){var L=this.session,_=L.multiSelect,k=_.toOrientedRange();if(!(k.isEmpty()&&(k=L.getWordRange(k.start.row,k.start.column),k.cursor=A==-1?k.start:k.end,this.multiSelect.addRange(k),b))){var T=L.getTextRange(k),O=s(L,T,A);O&&(O.cursor=A==-1?O.start:O.end,this.session.unfold(O),this.multiSelect.addRange(O),this.renderer.scrollCursorIntoView(null,.5)),E&&this.multiSelect.substractPoint(k.cursor)}},this.alignCursors=function(){var A=this.session,E=A.multiSelect,b=E.ranges,L=-1,_=b.filter(function(D){if(D.cursor.row==L)return!0;L=D.cursor.row});if(!b.length||_.length==b.length-1){var k=this.selection.getRange(),T=k.start.row,O=k.end.row,$=T==O;if($){var v=this.session.getLength(),S;do S=this.session.getLine(O);while(/[=:]/.test(S)&&++O<v);do S=this.session.getLine(T);while(/[=:]/.test(S)&&--T>0);T<0&&(T=0),O>=v&&(O=v-1)}var x=this.session.removeFullLines(T,O);x=this.$reAlignText(x,$),this.session.insert({row:T,column:0},x.join(`
`)+`
`),$||(k.start.column=0,k.end.column=x[x.length-1].length),this.selection.setRange(k)}else{_.forEach(function(D){E.substractPoint(D.cursor)});var M=0,R=1/0,I=b.map(function(D){var N=D.cursor,B=A.getLine(N.row),W=B.substr(N.column).search(/\S/g);return W==-1&&(W=0),N.column>M&&(M=N.column),W<R&&(R=W),W});b.forEach(function(D,N){var B=D.cursor,W=M-B.column,F=I[N]-R;W>F?A.insert(B,o.stringRepeat(" ",W-F)):A.remove(new g(B.row,B.column,B.row,B.column-W+F)),D.start.column=D.end.column=M,D.start.row=D.end.row=B.row,D.cursor=D.end}),E.fromOrientedRange(b[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(A,E){var b=!0,L=!0,_,k,T;return A.map(function(x){var M=x.match(/(\s*)(.*?)(\s*)([=:].*)/);return M?_==null?(_=M[1].length,k=M[2].length,T=M[3].length,M):(_+k+T!=M[1].length+M[2].length+M[3].length&&(L=!1),_!=M[1].length&&(b=!1),_>M[1].length&&(_=M[1].length),k<M[2].length&&(k=M[2].length),T>M[3].length&&(T=M[3].length),M):[x]}).map(E?$:b?L?v:$:S);function O(x){return o.stringRepeat(" ",x)}function $(x){return x[2]?O(_)+x[2]+O(k-x[2].length+T)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}function v(x){return x[2]?O(_+k-x[2].length)+x[2]+O(T)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}function S(x){return x[2]?O(_)+x[2]+O(T)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}}}).call(h.prototype);function m(A,E){return A.row==E.row&&A.column==E.column}r.onSessionChange=function(A){var E=A.session;E&&!E.multiSelect&&(E.$selectionMarkers=[],E.selection.$initRangeList(),E.multiSelect=E.selection),this.multiSelect=E&&E.multiSelect;var b=A.oldSession;b&&(b.multiSelect.off("addRange",this.$onAddRange),b.multiSelect.off("removeRange",this.$onRemoveRange),b.multiSelect.off("multiSelect",this.$onMultiSelect),b.multiSelect.off("singleSelect",this.$onSingleSelect),b.multiSelect.lead.off("change",this.$checkMultiselectChange),b.multiSelect.anchor.off("change",this.$checkMultiselectChange)),E&&(E.multiSelect.on("addRange",this.$onAddRange),E.multiSelect.on("removeRange",this.$onRemoveRange),E.multiSelect.on("multiSelect",this.$onMultiSelect),E.multiSelect.on("singleSelect",this.$onSingleSelect),E.multiSelect.lead.on("change",this.$checkMultiselectChange),E.multiSelect.anchor.on("change",this.$checkMultiselectChange)),E&&this.inMultiSelectMode!=E.selection.inMultiSelectMode&&(E.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function w(A){A.$multiselectOnSessionChange||(A.$onAddRange=A.$onAddRange.bind(A),A.$onRemoveRange=A.$onRemoveRange.bind(A),A.$onMultiSelect=A.$onMultiSelect.bind(A),A.$onSingleSelect=A.$onSingleSelect.bind(A),A.$multiselectOnSessionChange=r.onSessionChange.bind(A),A.$checkMultiselectChange=A.$checkMultiselectChange.bind(A),A.$multiselectOnSessionChange(A),A.on("changeSession",A.$multiselectOnSessionChange),A.on("mousedown",a),A.commands.addCommands(i.defaultCommands),C(A))}function C(A){if(!A.textInput)return;var E=A.textInput.getElement(),b=!1;d.addListener(E,"keydown",function(_){var k=_.keyCode==18&&!(_.ctrlKey||_.shiftKey||_.metaKey);A.$blockSelectEnabled&&k?b||(A.renderer.setMouseCursor("crosshair"),b=!0):b&&L()},A),d.addListener(E,"keyup",L,A),d.addListener(E,"blur",L,A);function L(_){b&&(A.renderer.setMouseCursor(""),b=!1)}}r.MultiSelect=w,e("./config").defineOptions(h.prototype,"editor",{enableMultiselect:{set:function(A){w(this),A?this.on("mousedown",a):this.off("mousedown",a)},value:!0},enableBlockSelect:{set:function(A){this.$blockSelectEnabled=A},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,r,p){var f=e("../../range").Range,g=r.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(y,a,d){var o=y.getLine(d);return this.foldingStartMarker.test(o)?"start":a=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(o)?"end":""},this.getFoldWidgetRange=function(y,a,d){return null},this.indentationBlock=function(y,a,d){var o=/\S/,i=y.getLine(a),u=i.search(o);if(u!=-1){for(var c=d||i.length,s=y.getLength(),l=a,h=a;++a<s;){var m=y.getLine(a).search(o);if(m!=-1){if(m<=u){var w=y.getTokenAt(a,0);if(!w||w.type!=="string")break}h=a}}if(h>l){var C=y.getLine(h).length;return new f(l,c,h,C)}}},this.openingBracketBlock=function(y,a,d,o,i){var u={row:d,column:o+1},c=y.$findClosingBracket(a,u,i);if(c){var s=y.foldWidgets[c.row];return s==null&&(s=y.getFoldWidget(c.row)),s=="start"&&c.row>u.row&&(c.row--,c.column=y.getLine(c.row).length),f.fromPoints(u,c)}},this.closingBracketBlock=function(y,a,d,o,i){var u={row:d,column:o},c=y.$findOpeningBracket(a,u);if(c)return c.column++,u.column--,f.fromPoints(c,u)}}).call(g.prototype)}),ace.define("ace/ext/error_marker",["require","exports","module","ace/lib/dom","ace/range","ace/config"],function(e,r,p){var f=e("../lib/dom"),g=e("../range").Range,y=e("../config").nls;function a(o,i,u){for(var c=0,s=o.length-1;c<=s;){var l=c+s>>1,h=u(i,o[l]);if(h>0)c=l+1;else if(h<0)s=l-1;else return l}return-(c+1)}function d(o,i,u){var c=o.getAnnotations().sort(g.comparePoints);if(c.length){var s=a(c,{row:i,column:-1},g.comparePoints);s<0&&(s=-s-1),s>=c.length?s=u>0?0:c.length-1:s===0&&u<0&&(s=c.length-1);var l=c[s];if(!(!l||!u)){if(l.row===i){do l=c[s+=u];while(l&&l.row===i);if(!l)return c.slice()}var h=[];i=l.row;do h[u<0?"unshift":"push"](l),l=c[s+=u];while(l&&l.row==i);return h.length&&h}}}r.showErrorMarker=function(o,i){var u=o.session,c=o.getCursorPosition(),s=c.row,l=u.widgetManager.getWidgetsAtRow(s).filter(function(_){return _.type=="errorMarker"})[0];l?l.destroy():s-=i;var h=d(u,s,i),m;if(h){var w=h[0];c.column=(w.pos&&typeof w.column!="number"?w.pos.sc:w.column)||0,c.row=w.row,m=o.renderer.$gutterLayer.$annotations[c.row]}else{if(l)return;m={displayText:[y("error-marker.good-state","Looks good!")],className:"ace_ok"}}o.session.unfold(c.row),o.selection.moveToPosition(c);var C={row:c.row,fixedWidth:!0,coverGutter:!0,el:f.createElement("div"),type:"errorMarker"},A=C.el.appendChild(f.createElement("div")),E=C.el.appendChild(f.createElement("div"));E.className="error_widget_arrow "+m.className;var b=o.renderer.$cursorLayer.getPixelPosition(c).left;E.style.left=b+o.renderer.gutterWidth-5+"px",C.el.className="error_widget_wrapper",A.className="error_widget "+m.className,m.displayText.forEach(function(_,k){A.appendChild(f.createTextNode(_)),k<m.displayText.length-1&&A.appendChild(f.createElement("br"))}),A.appendChild(f.createElement("div"));var L=function(_,k,T){if(k===0&&(T==="esc"||T==="return"))return C.destroy(),{command:"null"}};C.destroy=function(){o.$mouseHandler.isMousePressed||(o.keyBinding.removeKeyboardHandler(L),u.widgetManager.removeLineWidget(C),o.off("changeSelection",C.destroy),o.off("changeSession",C.destroy),o.off("mouseup",C.destroy),o.off("change",C.destroy))},o.keyBinding.addKeyboardHandler(L),o.on("changeSelection",C.destroy),o.on("changeSession",C.destroy),o.on("mouseup",C.destroy),o.on("change",C.destroy),o.session.widgetManager.addLineWidget(C),C.el.onmousedown=o.focus.bind(o),o.renderer.scrollCursorIntoView(null,.5,{bottom:C.el.offsetHeight})},f.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,r,p){e("./loader_build")(r);var f=e("./lib/dom"),g=e("./range").Range,y=e("./editor").Editor,a=e("./edit_session").EditSession,d=e("./undomanager").UndoManager,o=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),r.config=e("./config"),r.edit=function(u,c){if(typeof u=="string"){var s=u;if(u=document.getElementById(s),!u)throw new Error("ace.edit can't find div #"+s)}if(u&&u.env&&u.env.editor instanceof y)return u.env.editor;var l="";if(u&&/input|textarea/i.test(u.tagName)){var h=u;l=h.value,u=f.createElement("pre"),h.parentNode.replaceChild(u,h)}else u&&(l=u.textContent,u.innerHTML="");var m=r.createEditSession(l),w=new y(new o(u),m,c),C={document:m,editor:w,onResize:w.resize.bind(w,null)};return h&&(C.textarea=h),w.on("destroy",function(){C.editor.container.env=null}),w.container.env=w.env=C,w},r.createEditSession=function(u,c){var s=new a(u,c);return s.setUndoManager(new d),s},r.Range=g,r.Editor=y,r.EditSession=a,r.UndoManager=d,r.VirtualRenderer=o;var i=r.config.version;r.version=i}),function(){ace.require(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define);var r=function(){return this}();!r&&typeof window<"u"&&(r=window),!r&&typeof self<"u"&&(r=self),r.ace||(r.ace=e);for(var p in e)e.hasOwnProperty(p)&&(r.ace[p]=e[p]);r.ace.default=r.ace,n.exports=r.ace})}()}(Qn)),Qn.exports}var Ol=Il();const Dl=`#version 300 es

in vec4 a_position;

void main() {
    gl_Position = a_position;
}
`;class Nl{constructor(t,e,r,p){he(this,"gl");he(this,"program");he(this,"positionLocation");he(this,"resolutionUniformLocation");he(this,"timeUniformLocation");this.gl=t;const f=t.createProgram()??Bl("Could not create gl program.");this.program=f,this.setupProgram(e),this.setupGeometry(),this.positionLocation=t.getAttribLocation(f,"a_position"),this.resolutionUniformLocation=t.getUniformLocation(f,"u_resolution"),this.timeUniformLocation=t.getUniformLocation(f,"u_time"),this.setupParameters(r,p),this.setupViewport()}render(t){const e=this.gl;e.uniform1f(this.timeUniformLocation,t),e.drawArrays(e.TRIANGLE_STRIP,0,4)}resize(t,e){const r=this.gl;r.uniform2f(this.resolutionUniformLocation,t,e),r.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}destroy(){const t=this.gl,e=this.program,r=t.getAttachedShaders(e);r==null||r.forEach(p=>{t.detachShader(e,p),t.deleteShader(p)}),t.deleteProgram(e)}setupProgram(t){const e=this.gl,r=this.program,p=this.createShader(e.VERTEX_SHADER,Dl),f=this.createShader(e.FRAGMENT_SHADER,t);if(e.attachShader(r,p),e.attachShader(r,f),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw console.error(e.getProgramInfoLog(r)),new Error("Program linking failed");e.useProgram(r)}setupGeometry(){const t=this.gl,e=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,e);const r=[-1,-1,1,-1,-1,1,1,1];t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW)}setupParameters(t,e){const r=this.gl;r.enableVertexAttribArray(this.positionLocation),r.vertexAttribPointer(this.positionLocation,2,r.FLOAT,!1,0,0),r.uniform2f(this.resolutionUniformLocation,t,e)}setupViewport(){const t=this.gl;t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)}createShader(t,e){const r=this.gl,p=r.createShader(t);if(p==null)throw Error("Could not create shader program.");if(r.shaderSource(p,e),r.compileShader(p),!r.getShaderParameter(p,r.COMPILE_STATUS))throw console.error(r.getShaderInfoLog(p)),r.deleteShader(p),new Error("Shader compilation failed");return p}}function Bl(n){throw new Error(n)}var Kt=(n=>(n[n.Code=0]="Code",n[n.Shader=1]="Shader",n))(Kt||{});class Fl{constructor(t){he(this,"state",Kt.Shader);he(this,"button");he(this,"showCode");he(this,"showShader");this.button=t.querySelector(".toggle-code"),this.showCode=t.querySelector(".show-code"),this.showShader=t.querySelector(".show-shader"),this.showCode.style.display="flex",this.showShader.style.display="none"}onToggle(t){this.button.addEventListener("click",()=>{switch(this.state=(this.state+1)%2,this.state){case Kt.Code:this.showCode.style.display="none",this.showShader.style.display="flex";break;case Kt.Shader:this.showCode.style.display="flex",this.showShader.style.display="none";break}t(this.state)})}}const Hl=`<div class="glostr-shader">
    <button class="toggle-code">
        <span class="material-icons purple show-shader toggle">image</span>
        <span class="show-code toggle">
            <span class="white">{</span><span class="purple">gl</span><span class="white">}</span>
        </span>
    </button>
    <div class="shader-editor"></div>
    <canvas class="shader-canvas"></canvas>  
</div>
`,Wl=".glostr-shader{display:flex;flex-direction:column;position:relative;width:800px;height:600px;max-width:100%;flex-shrink:0;flex-grow:0}.shader-canvas{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:8px;box-shadow:4px 4px 20px #00000080;z-index:0}.shader-editor{position:absolute;top:0;left:0;width:100%;height:100%;z-index:10;background:#131411a0;border-radius:8px}.toggle-code{font-family:JetBrains Mono,monospace;font-weight:700;display:flex;align-items:center;justify-content:center;position:absolute;right:20px;top:20px;z-index:20;width:40px;height:40px;font-size:13px;border:none;background:#202020bf;border:2px solid #d0d0d0;cursor:pointer;border-radius:8px}";class Pl{constructor(t,e){he(this,"gl");he(this,"_container");he(this,"program");he(this,"canvas");he(this,"startTime");const r=zl(Hl,Wl),p=r.querySelector(".shader-canvas"),f=r.querySelector(".shader-editor");this._container=r,this.canvas=p,this.keepAspectRatio(e),this.gl=this.setupCanvas(p),this.setupAce(f,t),this.program=this.createProgram(t),this.startTime=Date.now(),this.render(),f.style.display="none",new Fl(r).onToggle(g=>{f.style.display=g==Kt.Code?"block":"none"})}get container(){return this._container}keepAspectRatio(t){const e=this.container;new ResizeObserver(()=>{t!=null&&(e.style.height=`${e.offsetWidth/t}px`)}).observe(e)}setupCanvas(t){const e=t.getContext("webgl2");if(!e)throw alert("WebGL not supported!"),new Error("WebGL not supported!");return new ResizeObserver(()=>this.resize()).observe(t),e}setupAce(t,e){const r=Ol.edit(t);r.setTheme("ace/theme/monokai"),r.session.setMode("ace/mode/glsl"),r.setValue(e,-1);const p=document.body.style;t.addEventListener("mouseenter",()=>p.overscrollBehaviorX="none"),t.addEventListener("mouseleave",()=>p.overscrollBehaviorX="unset"),r.session.on("change",()=>{var g;const f=this.createProgram(r.getValue());f!=null&&((g=this.program)==null||g.destroy(),this.program=f)})}createProgram(t){try{const e=this.canvas;return new Nl(this.gl,t,e.width,e.height)}catch(e){return console.error(e),null}}render(){const t=(Date.now()-this.startTime)/1e3;this.program.render(t),requestAnimationFrame(()=>this.render())}resize(){const t=this.canvas;t.width=t.offsetWidth,t.height=t.offsetHeight,this.program.resize(t.width,t.height)}}function zl(n,t){const p=new DOMParser().parseFromString(n,"text/html").body.firstElementChild,f=document.createElement("style");return f.textContent=t,p.appendChild(f),p}class Ul{shader(t,e=3/4){return new Pl(t,e)}}function Xi(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function Vo(n,...t){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(n.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${n.length}`)}function jl(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Xi(n.outputLen),Xi(n.blockLen)}function gn(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Vl(n,t){Vo(n);const e=t.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Xn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Go=n=>n instanceof Uint8Array,qn=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Be=(n,t)=>n<<32-t|n>>>t,Gl=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Gl)throw new Error("Non little-endian hardware is not supported");function Kl(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Jr(n){if(typeof n=="string"&&(n=Kl(n)),!Go(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function Yl(...n){const t=new Uint8Array(n.reduce((r,p)=>r+p.length,0));let e=0;return n.forEach(r=>{if(!Go(r))throw new Error("Uint8Array expected");t.set(r,e),e+=r.length}),t}let Ko=class{clone(){return this._cloneInto()}};function Zl(n){const t=r=>n().update(Jr(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function Yo(n=32){if(Xn&&typeof Xn.getRandomValues=="function")return Xn.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function Ql(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const p=BigInt(32),f=BigInt(4294967295),g=Number(e>>p&f),y=Number(e&f),a=r?4:0,d=r?0:4;n.setUint32(t+a,g,r),n.setUint32(t+d,y,r)}let Xl=class extends Ko{constructor(t,e,r,p){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=p,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=qn(this.buffer)}update(t){gn(this);const{view:e,buffer:r,blockLen:p}=this;t=Jr(t);const f=t.length;for(let g=0;g<f;){const y=Math.min(p-this.pos,f-g);if(y===p){const a=qn(t);for(;p<=f-g;g+=p)this.process(a,g);continue}r.set(t.subarray(g,g+y),this.pos),this.pos+=y,g+=y,this.pos===p&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){gn(this),Vl(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:p,isLE:f}=this;let{pos:g}=this;e[g++]=128,this.buffer.subarray(g).fill(0),this.padOffset>p-g&&(this.process(r,0),g=0);for(let i=g;i<p;i++)e[i]=0;Ql(r,p-8,BigInt(this.length*8),f),this.process(r,0);const y=qn(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=a/4,o=this.get();if(d>o.length)throw new Error("_sha2: outputLen bigger than state");for(let i=0;i<d;i++)y.setUint32(4*i,o[i],f)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:p,finished:f,destroyed:g,pos:y}=this;return t.length=p,t.pos=y,t.finished=f,t.destroyed=g,p%e&&t.buffer.set(r),t}};const ql=(n,t,e)=>n&t^~n&e,Jl=(n,t,e)=>n&t^n&e^t&e,ec=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ot=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),st=new Uint32Array(64);let tc=class extends Xl{constructor(){super(64,32,8,!1),this.A=ot[0]|0,this.B=ot[1]|0,this.C=ot[2]|0,this.D=ot[3]|0,this.E=ot[4]|0,this.F=ot[5]|0,this.G=ot[6]|0,this.H=ot[7]|0}get(){const{A:t,B:e,C:r,D:p,E:f,F:g,G:y,H:a}=this;return[t,e,r,p,f,g,y,a]}set(t,e,r,p,f,g,y,a){this.A=t|0,this.B=e|0,this.C=r|0,this.D=p|0,this.E=f|0,this.F=g|0,this.G=y|0,this.H=a|0}process(t,e){for(let i=0;i<16;i++,e+=4)st[i]=t.getUint32(e,!1);for(let i=16;i<64;i++){const u=st[i-15],c=st[i-2],s=Be(u,7)^Be(u,18)^u>>>3,l=Be(c,17)^Be(c,19)^c>>>10;st[i]=l+st[i-7]+s+st[i-16]|0}let{A:r,B:p,C:f,D:g,E:y,F:a,G:d,H:o}=this;for(let i=0;i<64;i++){const u=Be(y,6)^Be(y,11)^Be(y,25),c=o+u+ql(y,a,d)+ec[i]+st[i]|0,l=(Be(r,2)^Be(r,13)^Be(r,22))+Jl(r,p,f)|0;o=d,d=a,a=y,y=g+c|0,g=f,f=p,p=r,r=c+l|0}r=r+this.A|0,p=p+this.B|0,f=f+this.C|0,g=g+this.D|0,y=y+this.E|0,a=a+this.F|0,d=d+this.G|0,o=o+this.H|0,this.set(r,p,f,g,y,a,d,o)}roundClean(){st.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Ar=Zl(()=>new tc);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zo=BigInt(0),Tn=BigInt(1),nc=BigInt(2),kn=n=>n instanceof Uint8Array,rc=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Rt(n){if(!kn(n))throw new Error("Uint8Array expected");let t="";for(let e=0;e<n.length;e++)t+=rc[n[e]];return t}function Qo(n){const t=n.toString(16);return t.length&1?`0${t}`:t}function ei(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function _t(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const t=n.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const e=new Uint8Array(t/2);for(let r=0;r<e.length;r++){const p=r*2,f=n.slice(p,p+2),g=Number.parseInt(f,16);if(Number.isNaN(g)||g<0)throw new Error("Invalid byte sequence");e[r]=g}return e}function Le(n){return ei(Rt(n))}function ti(n){if(!kn(n))throw new Error("Uint8Array expected");return ei(Rt(Uint8Array.from(n).reverse()))}function pt(n,t){return _t(n.toString(16).padStart(t*2,"0"))}function ni(n,t){return pt(n,t).reverse()}function ic(n){return _t(Qo(n))}function Se(n,t,e){let r;if(typeof t=="string")try{r=_t(t)}catch(f){throw new Error(`${n} must be valid hex string, got "${t}". Cause: ${f}`)}else if(kn(t))r=Uint8Array.from(t);else throw new Error(`${n} must be hex string or Uint8Array`);const p=r.length;if(typeof e=="number"&&p!==e)throw new Error(`${n} expected ${e} bytes, got ${p}`);return r}function xt(...n){const t=new Uint8Array(n.reduce((r,p)=>r+p.length,0));let e=0;return n.forEach(r=>{if(!kn(r))throw new Error("Uint8Array expected");t.set(r,e),e+=r.length}),t}function oc(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function sc(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function ac(n){let t;for(t=0;n>Zo;n>>=Tn,t+=1);return t}function lc(n,t){return n>>BigInt(t)&Tn}const cc=(n,t,e)=>n|(e?Tn:Zo)<<BigInt(t),ri=n=>(nc<<BigInt(n-1))-Tn,Jn=n=>new Uint8Array(n),qi=n=>Uint8Array.from(n);function Xo(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=Jn(n),p=Jn(n),f=0;const g=()=>{r.fill(1),p.fill(0),f=0},y=(...i)=>e(p,r,...i),a=(i=Jn())=>{p=y(qi([0]),i),r=y(),i.length!==0&&(p=y(qi([1]),i),r=y())},d=()=>{if(f++>=1e3)throw new Error("drbg: tried 1000 values");let i=0;const u=[];for(;i<t;){r=y();const c=r.slice();u.push(c),i+=r.length}return xt(...u)};return(i,u)=>{g(),a(i);let c;for(;!(c=u(d()));)a();return g(),c}}const uc={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Xt(n,t,e={}){const r=(p,f,g)=>{const y=uc[f];if(typeof y!="function")throw new Error(`Invalid validator "${f}", expected function`);const a=n[p];if(!(g&&a===void 0)&&!y(a,n))throw new Error(`Invalid param ${String(p)}=${a} (${typeof a}), expected ${f}`)};for(const[p,f]of Object.entries(t))r(p,f,!1);for(const[p,f]of Object.entries(e))r(p,f,!0);return n}const hc=Object.freeze(Object.defineProperty({__proto__:null,bitGet:lc,bitLen:ac,bitMask:ri,bitSet:cc,bytesToHex:Rt,bytesToNumberBE:Le,bytesToNumberLE:ti,concatBytes:xt,createHmacDrbg:Xo,ensureBytes:Se,equalBytes:oc,hexToBytes:_t,hexToNumber:ei,numberToBytesBE:pt,numberToBytesLE:ni,numberToHexUnpadded:Qo,numberToVarBytesBE:ic,utf8ToBytes:sc,validateObject:Xt},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ve=BigInt(0),de=BigInt(1),wt=BigInt(2),dc=BigInt(3),Cr=BigInt(4),Ji=BigInt(5),eo=BigInt(8);BigInt(9);BigInt(16);function we(n,t){const e=n%t;return e>=ve?e:t+e}function fc(n,t,e){if(e<=ve||t<ve)throw new Error("Expected power/modulo > 0");if(e===de)return ve;let r=de;for(;t>ve;)t&de&&(r=r*n%e),n=n*n%e,t>>=de;return r}function Re(n,t,e){let r=n;for(;t-- >ve;)r*=r,r%=e;return r}function Mr(n,t){if(n===ve||t<=ve)throw new Error(`invert: expected positive integers, got n=${n} mod=${t}`);let e=we(n,t),r=t,p=ve,f=de;for(;e!==ve;){const y=r/e,a=r%e,d=p-f*y;r=e,e=a,p=f,f=d}if(r!==de)throw new Error("invert: does not exist");return we(p,t)}function pc(n){const t=(n-de)/wt;let e,r,p;for(e=n-de,r=0;e%wt===ve;e/=wt,r++);for(p=wt;p<n&&fc(p,t,n)!==n-de;p++);if(r===1){const g=(n+de)/Cr;return function(a,d){const o=a.pow(d,g);if(!a.eql(a.sqr(o),d))throw new Error("Cannot find square root");return o}}const f=(e+de)/wt;return function(y,a){if(y.pow(a,t)===y.neg(y.ONE))throw new Error("Cannot find square root");let d=r,o=y.pow(y.mul(y.ONE,p),e),i=y.pow(a,f),u=y.pow(a,e);for(;!y.eql(u,y.ONE);){if(y.eql(u,y.ZERO))return y.ZERO;let c=1;for(let l=y.sqr(u);c<d&&!y.eql(l,y.ONE);c++)l=y.sqr(l);const s=y.pow(o,de<<BigInt(d-c-1));o=y.sqr(s),i=y.mul(i,s),u=y.mul(u,o),d=c}return i}}function gc(n){if(n%Cr===dc){const t=(n+de)/Cr;return function(r,p){const f=r.pow(p,t);if(!r.eql(r.sqr(f),p))throw new Error("Cannot find square root");return f}}if(n%eo===Ji){const t=(n-Ji)/eo;return function(r,p){const f=r.mul(p,wt),g=r.pow(f,t),y=r.mul(p,g),a=r.mul(r.mul(y,wt),g),d=r.mul(y,r.sub(a,r.ONE));if(!r.eql(r.sqr(d),p))throw new Error("Cannot find square root");return d}}return pc(n)}const mc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function vc(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=mc.reduce((r,p)=>(r[p]="function",r),t);return Xt(n,e)}function yc(n,t,e){if(e<ve)throw new Error("Expected power > 0");if(e===ve)return n.ONE;if(e===de)return t;let r=n.ONE,p=t;for(;e>ve;)e&de&&(r=n.mul(r,p)),p=n.sqr(p),e>>=de;return r}function wc(n,t){const e=new Array(t.length),r=t.reduce((f,g,y)=>n.is0(g)?f:(e[y]=f,n.mul(f,g)),n.ONE),p=n.inv(r);return t.reduceRight((f,g,y)=>n.is0(g)?f:(e[y]=n.mul(f,e[y]),n.mul(f,g)),p),e}function qo(n,t){const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function bc(n,t,e=!1,r={}){if(n<=ve)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:p,nByteLength:f}=qo(n,t);if(f>2048)throw new Error("Field lengths over 2048 bytes are not supported");const g=gc(n),y=Object.freeze({ORDER:n,BITS:p,BYTES:f,MASK:ri(p),ZERO:ve,ONE:de,create:a=>we(a,n),isValid:a=>{if(typeof a!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof a}`);return ve<=a&&a<n},is0:a=>a===ve,isOdd:a=>(a&de)===de,neg:a=>we(-a,n),eql:(a,d)=>a===d,sqr:a=>we(a*a,n),add:(a,d)=>we(a+d,n),sub:(a,d)=>we(a-d,n),mul:(a,d)=>we(a*d,n),pow:(a,d)=>yc(y,a,d),div:(a,d)=>we(a*Mr(d,n),n),sqrN:a=>a*a,addN:(a,d)=>a+d,subN:(a,d)=>a-d,mulN:(a,d)=>a*d,inv:a=>Mr(a,n),sqrt:r.sqrt||(a=>g(y,a)),invertBatch:a=>wc(y,a),cmov:(a,d,o)=>o?d:a,toBytes:a=>e?ni(a,f):pt(a,f),fromBytes:a=>{if(a.length!==f)throw new Error(`Fp.fromBytes: expected ${f}, got ${a.length}`);return e?ti(a):Le(a)}});return Object.freeze(y)}function Jo(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function es(n){const t=Jo(n);return t+Math.ceil(t/2)}function $c(n,t,e=!1){const r=n.length,p=Jo(t),f=es(t);if(r<16||r<f||r>1024)throw new Error(`expected ${f}-1024 bytes of input, got ${r}`);const g=e?Le(n):ti(n),y=we(g,t-de)+de;return e?ni(y,p):pt(y,p)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sc=BigInt(0),er=BigInt(1);function xc(n,t){const e=(p,f)=>{const g=f.negate();return p?g:f},r=p=>{const f=Math.ceil(t/p)+1,g=2**(p-1);return{windows:f,windowSize:g}};return{constTimeNegate:e,unsafeLadder(p,f){let g=n.ZERO,y=p;for(;f>Sc;)f&er&&(g=g.add(y)),y=y.double(),f>>=er;return g},precomputeWindow(p,f){const{windows:g,windowSize:y}=r(f),a=[];let d=p,o=d;for(let i=0;i<g;i++){o=d,a.push(o);for(let u=1;u<y;u++)o=o.add(d),a.push(o);d=o.double()}return a},wNAF(p,f,g){const{windows:y,windowSize:a}=r(p);let d=n.ZERO,o=n.BASE;const i=BigInt(2**p-1),u=2**p,c=BigInt(p);for(let s=0;s<y;s++){const l=s*a;let h=Number(g&i);g>>=c,h>a&&(h-=u,g+=er);const m=l,w=l+Math.abs(h)-1,C=s%2!==0,A=h<0;h===0?o=o.add(e(C,f[m])):d=d.add(e(A,f[w]))}return{p:d,f:o}},wNAFCached(p,f,g,y){const a=p._WINDOW_SIZE||1;let d=f.get(p);return d||(d=this.precomputeWindow(p,a),a!==1&&f.set(p,y(d))),this.wNAF(a,d,g)}}}function ts(n){return vc(n.Fp),Xt(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...qo(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ec(n){const t=ts(n);Xt(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:p}=t;if(e){if(!r.eql(p,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Ac,hexToBytes:Cc}=hc,$t={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(n){const{Err:t}=$t;if(n.length<2||n[0]!==2)throw new t("Invalid signature integer tag");const e=n[1],r=n.subarray(2,e+2);if(!e||r.length!==e)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Ac(r),l:n.subarray(e+2)}},toSig(n){const{Err:t}=$t,e=typeof n=="string"?Cc(n):n;if(!(e instanceof Uint8Array))throw new Error("ui8a expected");let r=e.length;if(r<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:p,l:f}=$t._parseInt(e.subarray(2)),{d:g,l:y}=$t._parseInt(f);if(y.length)throw new t("Invalid signature: left bytes after parsing");return{r:p,s:g}},hexFromSig(n){const t=d=>Number.parseInt(d[0],16)&8?"00"+d:d,e=d=>{const o=d.toString(16);return o.length&1?`0${o}`:o},r=t(e(n.s)),p=t(e(n.r)),f=r.length/2,g=p.length/2,y=e(f),a=e(g);return`30${e(g+f+4)}02${a}${p}02${y}${r}`}},Ze=BigInt(0),Ie=BigInt(1);BigInt(2);const to=BigInt(3);BigInt(4);function Mc(n){const t=Ec(n),{Fp:e}=t,r=t.toBytes||((s,l,h)=>{const m=l.toAffine();return xt(Uint8Array.from([4]),e.toBytes(m.x),e.toBytes(m.y))}),p=t.fromBytes||(s=>{const l=s.subarray(1),h=e.fromBytes(l.subarray(0,e.BYTES)),m=e.fromBytes(l.subarray(e.BYTES,2*e.BYTES));return{x:h,y:m}});function f(s){const{a:l,b:h}=t,m=e.sqr(s),w=e.mul(m,s);return e.add(e.add(w,e.mul(s,l)),h)}if(!e.eql(e.sqr(t.Gy),f(t.Gx)))throw new Error("bad generator point: equation left != right");function g(s){return typeof s=="bigint"&&Ze<s&&s<t.n}function y(s){if(!g(s))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function a(s){const{allowedPrivateKeyLengths:l,nByteLength:h,wrapPrivateKey:m,n:w}=t;if(l&&typeof s!="bigint"){if(s instanceof Uint8Array&&(s=Rt(s)),typeof s!="string"||!l.includes(s.length))throw new Error("Invalid key");s=s.padStart(h*2,"0")}let C;try{C=typeof s=="bigint"?s:Le(Se("private key",s,h))}catch{throw new Error(`private key must be ${h} bytes, hex or bigint, not ${typeof s}`)}return m&&(C=we(C,w)),y(C),C}const d=new Map;function o(s){if(!(s instanceof i))throw new Error("ProjectivePoint expected")}class i{constructor(l,h,m){if(this.px=l,this.py=h,this.pz=m,l==null||!e.isValid(l))throw new Error("x required");if(h==null||!e.isValid(h))throw new Error("y required");if(m==null||!e.isValid(m))throw new Error("z required")}static fromAffine(l){const{x:h,y:m}=l||{};if(!l||!e.isValid(h)||!e.isValid(m))throw new Error("invalid affine point");if(l instanceof i)throw new Error("projective point not allowed");const w=C=>e.eql(C,e.ZERO);return w(h)&&w(m)?i.ZERO:new i(h,m,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(l){const h=e.invertBatch(l.map(m=>m.pz));return l.map((m,w)=>m.toAffine(h[w])).map(i.fromAffine)}static fromHex(l){const h=i.fromAffine(p(Se("pointHex",l)));return h.assertValidity(),h}static fromPrivateKey(l){return i.BASE.multiply(a(l))}_setWindowSize(l){this._WINDOW_SIZE=l,d.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:l,y:h}=this.toAffine();if(!e.isValid(l)||!e.isValid(h))throw new Error("bad point: x or y not FE");const m=e.sqr(h),w=f(l);if(!e.eql(m,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:l}=this.toAffine();if(e.isOdd)return!e.isOdd(l);throw new Error("Field doesn't support isOdd")}equals(l){o(l);const{px:h,py:m,pz:w}=this,{px:C,py:A,pz:E}=l,b=e.eql(e.mul(h,E),e.mul(C,w)),L=e.eql(e.mul(m,E),e.mul(A,w));return b&&L}negate(){return new i(this.px,e.neg(this.py),this.pz)}double(){const{a:l,b:h}=t,m=e.mul(h,to),{px:w,py:C,pz:A}=this;let E=e.ZERO,b=e.ZERO,L=e.ZERO,_=e.mul(w,w),k=e.mul(C,C),T=e.mul(A,A),O=e.mul(w,C);return O=e.add(O,O),L=e.mul(w,A),L=e.add(L,L),E=e.mul(l,L),b=e.mul(m,T),b=e.add(E,b),E=e.sub(k,b),b=e.add(k,b),b=e.mul(E,b),E=e.mul(O,E),L=e.mul(m,L),T=e.mul(l,T),O=e.sub(_,T),O=e.mul(l,O),O=e.add(O,L),L=e.add(_,_),_=e.add(L,_),_=e.add(_,T),_=e.mul(_,O),b=e.add(b,_),T=e.mul(C,A),T=e.add(T,T),_=e.mul(T,O),E=e.sub(E,_),L=e.mul(T,k),L=e.add(L,L),L=e.add(L,L),new i(E,b,L)}add(l){o(l);const{px:h,py:m,pz:w}=this,{px:C,py:A,pz:E}=l;let b=e.ZERO,L=e.ZERO,_=e.ZERO;const k=t.a,T=e.mul(t.b,to);let O=e.mul(h,C),$=e.mul(m,A),v=e.mul(w,E),S=e.add(h,m),x=e.add(C,A);S=e.mul(S,x),x=e.add(O,$),S=e.sub(S,x),x=e.add(h,w);let M=e.add(C,E);return x=e.mul(x,M),M=e.add(O,v),x=e.sub(x,M),M=e.add(m,w),b=e.add(A,E),M=e.mul(M,b),b=e.add($,v),M=e.sub(M,b),_=e.mul(k,x),b=e.mul(T,v),_=e.add(b,_),b=e.sub($,_),_=e.add($,_),L=e.mul(b,_),$=e.add(O,O),$=e.add($,O),v=e.mul(k,v),x=e.mul(T,x),$=e.add($,v),v=e.sub(O,v),v=e.mul(k,v),x=e.add(x,v),O=e.mul($,x),L=e.add(L,O),O=e.mul(M,x),b=e.mul(S,b),b=e.sub(b,O),O=e.mul(S,$),_=e.mul(M,_),_=e.add(_,O),new i(b,L,_)}subtract(l){return this.add(l.negate())}is0(){return this.equals(i.ZERO)}wNAF(l){return c.wNAFCached(this,d,l,h=>{const m=e.invertBatch(h.map(w=>w.pz));return h.map((w,C)=>w.toAffine(m[C])).map(i.fromAffine)})}multiplyUnsafe(l){const h=i.ZERO;if(l===Ze)return h;if(y(l),l===Ie)return this;const{endo:m}=t;if(!m)return c.unsafeLadder(this,l);let{k1neg:w,k1:C,k2neg:A,k2:E}=m.splitScalar(l),b=h,L=h,_=this;for(;C>Ze||E>Ze;)C&Ie&&(b=b.add(_)),E&Ie&&(L=L.add(_)),_=_.double(),C>>=Ie,E>>=Ie;return w&&(b=b.negate()),A&&(L=L.negate()),L=new i(e.mul(L.px,m.beta),L.py,L.pz),b.add(L)}multiply(l){y(l);let h=l,m,w;const{endo:C}=t;if(C){const{k1neg:A,k1:E,k2neg:b,k2:L}=C.splitScalar(h);let{p:_,f:k}=this.wNAF(E),{p:T,f:O}=this.wNAF(L);_=c.constTimeNegate(A,_),T=c.constTimeNegate(b,T),T=new i(e.mul(T.px,C.beta),T.py,T.pz),m=_.add(T),w=k.add(O)}else{const{p:A,f:E}=this.wNAF(h);m=A,w=E}return i.normalizeZ([m,w])[0]}multiplyAndAddUnsafe(l,h,m){const w=i.BASE,C=(E,b)=>b===Ze||b===Ie||!E.equals(w)?E.multiplyUnsafe(b):E.multiply(b),A=C(this,h).add(C(l,m));return A.is0()?void 0:A}toAffine(l){const{px:h,py:m,pz:w}=this,C=this.is0();l==null&&(l=C?e.ONE:e.inv(w));const A=e.mul(h,l),E=e.mul(m,l),b=e.mul(w,l);if(C)return{x:e.ZERO,y:e.ZERO};if(!e.eql(b,e.ONE))throw new Error("invZ was invalid");return{x:A,y:E}}isTorsionFree(){const{h:l,isTorsionFree:h}=t;if(l===Ie)return!0;if(h)return h(i,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:l,clearCofactor:h}=t;return l===Ie?this:h?h(i,this):this.multiplyUnsafe(t.h)}toRawBytes(l=!0){return this.assertValidity(),r(i,this,l)}toHex(l=!0){return Rt(this.toRawBytes(l))}}i.BASE=new i(t.Gx,t.Gy,e.ONE),i.ZERO=new i(e.ZERO,e.ONE,e.ZERO);const u=t.nBitLength,c=xc(i,t.endo?Math.ceil(u/2):u);return{CURVE:t,ProjectivePoint:i,normPrivateKeyToScalar:a,weierstrassEquation:f,isWithinCurveOrder:g}}function Lc(n){const t=ts(n);return Xt(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Tc(n){const t=Lc(n),{Fp:e,n:r}=t,p=e.BYTES+1,f=2*e.BYTES+1;function g(x){return Ze<x&&x<e.ORDER}function y(x){return we(x,r)}function a(x){return Mr(x,r)}const{ProjectivePoint:d,normPrivateKeyToScalar:o,weierstrassEquation:i,isWithinCurveOrder:u}=Mc({...t,toBytes(x,M,R){const I=M.toAffine(),D=e.toBytes(I.x),N=xt;return R?N(Uint8Array.from([M.hasEvenY()?2:3]),D):N(Uint8Array.from([4]),D,e.toBytes(I.y))},fromBytes(x){const M=x.length,R=x[0],I=x.subarray(1);if(M===p&&(R===2||R===3)){const D=Le(I);if(!g(D))throw new Error("Point is not on curve");const N=i(D);let B=e.sqrt(N);const W=(B&Ie)===Ie;return(R&1)===1!==W&&(B=e.neg(B)),{x:D,y:B}}else if(M===f&&R===4){const D=e.fromBytes(I.subarray(0,e.BYTES)),N=e.fromBytes(I.subarray(e.BYTES,2*e.BYTES));return{x:D,y:N}}else throw new Error(`Point of length ${M} was invalid. Expected ${p} compressed bytes or ${f} uncompressed bytes`)}}),c=x=>Rt(pt(x,t.nByteLength));function s(x){const M=r>>Ie;return x>M}function l(x){return s(x)?y(-x):x}const h=(x,M,R)=>Le(x.slice(M,R));class m{constructor(M,R,I){this.r=M,this.s=R,this.recovery=I,this.assertValidity()}static fromCompact(M){const R=t.nByteLength;return M=Se("compactSignature",M,R*2),new m(h(M,0,R),h(M,R,2*R))}static fromDER(M){const{r:R,s:I}=$t.toSig(Se("DER",M));return new m(R,I)}assertValidity(){if(!u(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!u(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(M){return new m(this.r,this.s,M)}recoverPublicKey(M){const{r:R,s:I,recovery:D}=this,N=L(Se("msgHash",M));if(D==null||![0,1,2,3].includes(D))throw new Error("recovery id invalid");const B=D===2||D===3?R+t.n:R;if(B>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const W=D&1?"03":"02",F=d.fromHex(W+c(B)),H=a(B),z=y(-N*H),P=y(I*H),U=d.BASE.multiplyAndAddUnsafe(F,z,P);if(!U)throw new Error("point at infinify");return U.assertValidity(),U}hasHighS(){return s(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,y(-this.s),this.recovery):this}toDERRawBytes(){return _t(this.toDERHex())}toDERHex(){return $t.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return _t(this.toCompactHex())}toCompactHex(){return c(this.r)+c(this.s)}}const w={isValidPrivateKey(x){try{return o(x),!0}catch{return!1}},normPrivateKeyToScalar:o,randomPrivateKey:()=>{const x=es(t.n);return $c(t.randomBytes(x),t.n)},precompute(x=8,M=d.BASE){return M._setWindowSize(x),M.multiply(BigInt(3)),M}};function C(x,M=!0){return d.fromPrivateKey(x).toRawBytes(M)}function A(x){const M=x instanceof Uint8Array,R=typeof x=="string",I=(M||R)&&x.length;return M?I===p||I===f:R?I===2*p||I===2*f:x instanceof d}function E(x,M,R=!0){if(A(x))throw new Error("first arg must be private key");if(!A(M))throw new Error("second arg must be public key");return d.fromHex(M).multiply(o(x)).toRawBytes(R)}const b=t.bits2int||function(x){const M=Le(x),R=x.length*8-t.nBitLength;return R>0?M>>BigInt(R):M},L=t.bits2int_modN||function(x){return y(b(x))},_=ri(t.nBitLength);function k(x){if(typeof x!="bigint")throw new Error("bigint expected");if(!(Ze<=x&&x<_))throw new Error(`bigint expected < 2^${t.nBitLength}`);return pt(x,t.nByteLength)}function T(x,M,R=O){if(["recovered","canonical"].some(K=>K in R))throw new Error("sign() legacy options not supported");const{hash:I,randomBytes:D}=t;let{lowS:N,prehash:B,extraEntropy:W}=R;N==null&&(N=!0),x=Se("msgHash",x),B&&(x=Se("prehashed msgHash",I(x)));const F=L(x),H=o(M),z=[k(H),k(F)];if(W!=null){const K=W===!0?D(e.BYTES):W;z.push(Se("extraEntropy",K))}const P=xt(...z),U=F;function G(K){const V=b(K);if(!u(V))return;const Y=a(V),q=d.BASE.multiply(V).toAffine(),ee=y(q.x);if(ee===Ze)return;const ne=y(Y*y(U+ee*H));if(ne===Ze)return;let re=(q.x===ee?0:2)|Number(q.y&Ie),me=ne;return N&&s(ne)&&(me=l(ne),re^=1),new m(ee,me,re)}return{seed:P,k2sig:G}}const O={lowS:t.lowS,prehash:!1},$={lowS:t.lowS,prehash:!1};function v(x,M,R=O){const{seed:I,k2sig:D}=T(x,M,R),N=t;return Xo(N.hash.outputLen,N.nByteLength,N.hmac)(I,D)}d.BASE._setWindowSize(8);function S(x,M,R,I=$){var q;const D=x;if(M=Se("msgHash",M),R=Se("publicKey",R),"strict"in I)throw new Error("options.strict was renamed to lowS");const{lowS:N,prehash:B}=I;let W,F;try{if(typeof D=="string"||D instanceof Uint8Array)try{W=m.fromDER(D)}catch(ee){if(!(ee instanceof $t.Err))throw ee;W=m.fromCompact(D)}else if(typeof D=="object"&&typeof D.r=="bigint"&&typeof D.s=="bigint"){const{r:ee,s:ne}=D;W=new m(ee,ne)}else throw new Error("PARSE");F=d.fromHex(R)}catch(ee){if(ee.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(N&&W.hasHighS())return!1;B&&(M=t.hash(M));const{r:H,s:z}=W,P=L(M),U=a(z),G=y(P*U),K=y(H*U),V=(q=d.BASE.multiplyAndAddUnsafe(F,G,K))==null?void 0:q.toAffine();return V?y(V.x)===H:!1}return{CURVE:t,getPublicKey:C,getSharedSecret:E,sign:v,verify:S,ProjectivePoint:d,Signature:m,utils:w}}let ns=class extends Ko{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,jl(t);const r=Jr(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const p=this.blockLen,f=new Uint8Array(p);f.set(r.length>p?t.create().update(r).digest():r);for(let g=0;g<f.length;g++)f[g]^=54;this.iHash.update(f),this.oHash=t.create();for(let g=0;g<f.length;g++)f[g]^=106;this.oHash.update(f),f.fill(0)}update(t){return gn(this),this.iHash.update(t),this}digestInto(t){gn(this),Vo(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:p,destroyed:f,blockLen:g,outputLen:y}=this;return t=t,t.finished=p,t.destroyed=f,t.blockLen=g,t.outputLen=y,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const rs=(n,t,e)=>new ns(n,t).update(e).digest();rs.create=(n,t)=>new ns(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function kc(n){return{hash:n,hmac:(t,...e)=>rs(n,t,Yl(...e)),randomBytes:Yo}}function Rc(n,t){const e=r=>Tc({...n,...kc(r)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rn=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),mn=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),is=BigInt(1),vn=BigInt(2),no=(n,t)=>(n+t/vn)/t;function os(n){const t=Rn,e=BigInt(3),r=BigInt(6),p=BigInt(11),f=BigInt(22),g=BigInt(23),y=BigInt(44),a=BigInt(88),d=n*n*n%t,o=d*d*n%t,i=Re(o,e,t)*o%t,u=Re(i,e,t)*o%t,c=Re(u,vn,t)*d%t,s=Re(c,p,t)*c%t,l=Re(s,f,t)*s%t,h=Re(l,y,t)*l%t,m=Re(h,a,t)*h%t,w=Re(m,y,t)*l%t,C=Re(w,e,t)*o%t,A=Re(C,g,t)*s%t,E=Re(A,r,t)*d%t,b=Re(E,vn,t);if(!Lr.eql(Lr.sqr(b),n))throw new Error("Cannot find square root");return b}const Lr=bc(Rn,void 0,void 0,{sqrt:os}),Wt=Rc({a:BigInt(0),b:BigInt(7),Fp:Lr,n:mn,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=mn,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-is*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),p=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),f=e,g=BigInt("0x100000000000000000000000000000000"),y=no(f*n,t),a=no(-r*n,t);let d=we(n-y*e-a*p,t),o=we(-y*r-a*f,t);const i=d>g,u=o>g;if(i&&(d=t-d),u&&(o=t-o),d>g||o>g)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:i,k1:d,k2neg:u,k2:o}}}},Ar),_n=BigInt(0),ss=n=>typeof n=="bigint"&&_n<n&&n<Rn,_c=n=>typeof n=="bigint"&&_n<n&&n<mn,ro={};function yn(n,...t){let e=ro[n];if(e===void 0){const r=Ar(Uint8Array.from(n,p=>p.charCodeAt(0)));e=xt(r,r),ro[n]=e}return Ar(xt(e,...t))}const ii=n=>n.toRawBytes(!0).slice(1),Tr=n=>pt(n,32),tr=n=>we(n,Rn),Yt=n=>we(n,mn),oi=Wt.ProjectivePoint,Ic=(n,t,e)=>oi.BASE.multiplyAndAddUnsafe(n,t,e);function kr(n){let t=Wt.utils.normPrivateKeyToScalar(n),e=oi.fromPrivateKey(t);return{scalar:e.hasEvenY()?t:Yt(-t),bytes:ii(e)}}function as(n){if(!ss(n))throw new Error("bad x: need 0 < x < p");const t=tr(n*n),e=tr(t*n+BigInt(7));let r=os(e);r%vn!==_n&&(r=tr(-r));const p=new oi(n,r,is);return p.assertValidity(),p}function ls(...n){return Yt(Le(yn("BIP0340/challenge",...n)))}function Oc(n){return kr(n).bytes}function Dc(n,t,e=Yo(32)){const r=Se("message",n),{bytes:p,scalar:f}=kr(t),g=Se("auxRand",e,32),y=Tr(f^Le(yn("BIP0340/aux",g))),a=yn("BIP0340/nonce",y,p,r),d=Yt(Le(a));if(d===_n)throw new Error("sign failed: k is zero");const{bytes:o,scalar:i}=kr(d),u=ls(o,p,r),c=new Uint8Array(64);if(c.set(o,0),c.set(Tr(Yt(i+u*f)),32),!cs(c,r,p))throw new Error("sign: Invalid signature produced");return c}function cs(n,t,e){const r=Se("signature",n,64),p=Se("message",t),f=Se("publicKey",e,32);try{const g=as(Le(f)),y=Le(r.subarray(0,32));if(!ss(y))return!1;const a=Le(r.subarray(32,64));if(!_c(a))return!1;const d=ls(Tr(y),ii(g),p),o=Ic(g,a,Yt(-d));return!(!o||!o.hasEvenY()||o.toAffine().x!==y)}catch{return!1}}const jt={getPublicKey:Oc,sign:Dc,verify:cs,utils:{randomPrivateKey:Wt.utils.randomPrivateKey,lift_x:as,pointToBytes:ii,numberToBytesBE:pt,bytesToNumberBE:Le,taggedHash:yn,mod:we}},nr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const si=n=>n instanceof Uint8Array,rr=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Fe=(n,t)=>n<<32-t|n>>>t,Nc=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Nc)throw new Error("Non little-endian hardware is not supported");const Bc=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Ce(n){if(!si(n))throw new Error("Uint8Array expected");let t="";for(let e=0;e<n.length;e++)t+=Bc[n[e]];return t}function It(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const t=n.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const e=new Uint8Array(t/2);for(let r=0;r<e.length;r++){const p=r*2,f=n.slice(p,p+2),g=Number.parseInt(f,16);if(Number.isNaN(g)||g<0)throw new Error("Invalid byte sequence");e[r]=g}return e}function Fc(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Zt(n){if(typeof n=="string"&&(n=Fc(n)),!si(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function In(...n){const t=new Uint8Array(n.reduce((r,p)=>r+p.length,0));let e=0;return n.forEach(r=>{if(!si(r))throw new Error("Uint8Array expected");t.set(r,e),e+=r.length}),t}class us{clone(){return this._cloneInto()}}function hs(n){const t=r=>n().update(Zt(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function ds(n=32){if(nr&&typeof nr.getRandomValues=="function")return nr.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function Rr(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function Hc(n){if(typeof n!="boolean")throw new Error(`Expected boolean, not ${n}`)}function fs(n,...t){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(n.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${n.length}`)}function Wc(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Rr(n.outputLen),Rr(n.blockLen)}function Pc(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function zc(n,t){fs(n);const e=t.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const We={number:Rr,bool:Hc,bytes:fs,hash:Wc,exists:Pc,output:zc};function Uc(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const p=BigInt(32),f=BigInt(4294967295),g=Number(e>>p&f),y=Number(e&f),a=r?4:0,d=r?0:4;n.setUint32(t+a,g,r),n.setUint32(t+d,y,r)}class jc extends us{constructor(t,e,r,p){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=p,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=rr(this.buffer)}update(t){We.exists(this);const{view:e,buffer:r,blockLen:p}=this;t=Zt(t);const f=t.length;for(let g=0;g<f;){const y=Math.min(p-this.pos,f-g);if(y===p){const a=rr(t);for(;p<=f-g;g+=p)this.process(a,g);continue}r.set(t.subarray(g,g+y),this.pos),this.pos+=y,g+=y,this.pos===p&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){We.exists(this),We.output(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:p,isLE:f}=this;let{pos:g}=this;e[g++]=128,this.buffer.subarray(g).fill(0),this.padOffset>p-g&&(this.process(r,0),g=0);for(let i=g;i<p;i++)e[i]=0;Uc(r,p-8,BigInt(this.length*8),f),this.process(r,0);const y=rr(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=a/4,o=this.get();if(d>o.length)throw new Error("_sha2: outputLen bigger than state");for(let i=0;i<d;i++)y.setUint32(4*i,o[i],f)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:p,finished:f,destroyed:g,pos:y}=this;return t.length=p,t.pos=y,t.finished=f,t.destroyed=g,p%e&&t.buffer.set(r),t}}const Vc=(n,t,e)=>n&t^~n&e,Gc=(n,t,e)=>n&t^n&e^t&e,Kc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),at=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),lt=new Uint32Array(64);class ps extends jc{constructor(){super(64,32,8,!1),this.A=at[0]|0,this.B=at[1]|0,this.C=at[2]|0,this.D=at[3]|0,this.E=at[4]|0,this.F=at[5]|0,this.G=at[6]|0,this.H=at[7]|0}get(){const{A:t,B:e,C:r,D:p,E:f,F:g,G:y,H:a}=this;return[t,e,r,p,f,g,y,a]}set(t,e,r,p,f,g,y,a){this.A=t|0,this.B=e|0,this.C=r|0,this.D=p|0,this.E=f|0,this.F=g|0,this.G=y|0,this.H=a|0}process(t,e){for(let i=0;i<16;i++,e+=4)lt[i]=t.getUint32(e,!1);for(let i=16;i<64;i++){const u=lt[i-15],c=lt[i-2],s=Fe(u,7)^Fe(u,18)^u>>>3,l=Fe(c,17)^Fe(c,19)^c>>>10;lt[i]=l+lt[i-7]+s+lt[i-16]|0}let{A:r,B:p,C:f,D:g,E:y,F:a,G:d,H:o}=this;for(let i=0;i<64;i++){const u=Fe(y,6)^Fe(y,11)^Fe(y,25),c=o+u+Vc(y,a,d)+Kc[i]+lt[i]|0,l=(Fe(r,2)^Fe(r,13)^Fe(r,22))+Gc(r,p,f)|0;o=d,d=a,a=y,y=g+c|0,g=f,f=p,p=r,r=c+l|0}r=r+this.A|0,p=p+this.B|0,f=f+this.C|0,g=g+this.D|0,y=y+this.E|0,a=a+this.F|0,d=d+this.G|0,o=o+this.H|0,this.set(r,p,f,g,y,a,d,o)}roundClean(){lt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Yc extends ps{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Pt=hs(()=>new ps);hs(()=>new Yc);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function zt(n){if(!Number.isSafeInteger(n))throw new Error(`Wrong integer: ${n}`)}function et(...n){const t=(p,f)=>g=>p(f(g)),e=Array.from(n).reverse().reduce((p,f)=>p?t(p,f.encode):f.encode,void 0),r=n.reduce((p,f)=>p?t(p,f.decode):f.decode,void 0);return{encode:e,decode:r}}function tt(n){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(e=>{if(zt(e),e<0||e>=n.length)throw new Error(`Digit index outside alphabet: ${e} (alphabet: ${n.length})`);return n[e]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(e=>{if(typeof e!="string")throw new Error(`alphabet.decode: not string element=${e}`);const r=n.indexOf(e);if(r===-1)throw new Error(`Unknown letter: "${e}". Allowed: ${n}`);return r})}}}function nt(n=""){if(typeof n!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let e of t)if(typeof e!="string")throw new Error(`join.encode: non-string input=${e}`);return t.join(n)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(n)}}}function On(n,t="="){if(zt(n),typeof t!="string")throw new Error("padding chr should be string");return{encode(e){if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of e)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;e.length*n%8;)e.push(t);return e},decode(e){if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("padding.encode input should be array of strings");for(let p of e)if(typeof p!="string")throw new Error(`padding.decode: non-string input=${p}`);let r=e.length;if(r*n%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&e[r-1]===t;r--)if(!((r-1)*n%8))throw new Error("Invalid padding: string has too much padding");return e.slice(0,r)}}}function gs(n){if(typeof n!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>n(t)}}function io(n,t,e){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(e<2)throw new Error(`convertRadix: wrong to=${e}, base cannot be less than 2`);if(!Array.isArray(n))throw new Error("convertRadix: data should be array");if(!n.length)return[];let r=0;const p=[],f=Array.from(n);for(f.forEach(g=>{if(zt(g),g<0||g>=t)throw new Error(`Wrong integer: ${g}`)});;){let g=0,y=!0;for(let a=r;a<f.length;a++){const d=f[a],o=t*g+d;if(!Number.isSafeInteger(o)||t*g/t!==g||o-d!==t*g)throw new Error("convertRadix: carry overflow");if(g=o%e,f[a]=Math.floor(o/e),!Number.isSafeInteger(f[a])||f[a]*e+g!==o)throw new Error("convertRadix: carry overflow");if(y)f[a]?y=!1:r=a;else continue}if(p.push(g),y)break}for(let g=0;g<n.length-1&&n[g]===0;g++)p.push(0);return p.reverse()}const ms=(n,t)=>t?ms(t,n%t):n,wn=(n,t)=>n+(t-ms(n,t));function _r(n,t,e,r){if(!Array.isArray(n))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(e<=0||e>32)throw new Error(`convertRadix2: wrong to=${e}`);if(wn(t,e)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${e} carryBits=${wn(t,e)}`);let p=0,f=0;const g=2**e-1,y=[];for(const a of n){if(zt(a),a>=2**t)throw new Error(`convertRadix2: invalid data word=${a} from=${t}`);if(p=p<<t|a,f+t>32)throw new Error(`convertRadix2: carry overflow pos=${f} from=${t}`);for(f+=t;f>=e;f-=e)y.push((p>>f-e&g)>>>0);p&=2**f-1}if(p=p<<e-f&g,!r&&f>=t)throw new Error("Excess padding");if(!r&&p)throw new Error(`Non-zero padding: ${p}`);return r&&f>0&&y.push(p>>>0),y}function Zc(n){return zt(n),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return io(Array.from(t),2**8,n)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(io(t,n,2**8))}}}function mt(n,t=!1){if(zt(n),n<=0||n>32)throw new Error("radix2: bits should be in (0..32]");if(wn(8,n)>32||wn(n,8)>32)throw new Error("radix2: carry overflow");return{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return _r(Array.from(e),8,n,!t)},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(_r(e,n,8,t))}}}function oo(n){if(typeof n!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return n.apply(null,t)}catch{}}}const Qc=et(mt(4),tt("0123456789ABCDEF"),nt("")),Xc=et(mt(5),tt("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),On(5),nt(""));et(mt(5),tt("0123456789ABCDEFGHIJKLMNOPQRSTUV"),On(5),nt(""));et(mt(5),tt("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),nt(""),gs(n=>n.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const Je=et(mt(6),tt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),On(6),nt("")),qc=et(mt(6),tt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),On(6),nt("")),ai=n=>et(Zc(58),tt(n),nt("")),Ir=ai("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");ai("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");ai("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const so=[0,2,3,5,6,7,9,10,11],Jc={encode(n){let t="";for(let e=0;e<n.length;e+=8){const r=n.subarray(e,e+8);t+=Ir.encode(r).padStart(so[r.length],"1")}return t},decode(n){let t=[];for(let e=0;e<n.length;e+=11){const r=n.slice(e,e+11),p=so.indexOf(r.length),f=Ir.decode(r);for(let g=0;g<f.length-p;g++)if(f[g]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(f.slice(f.length-p)))}return Uint8Array.from(t)}},Or=et(tt("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),nt("")),ao=[996825010,642813549,513874426,1027748829,705979059];function Vt(n){const t=n>>25;let e=(n&33554431)<<5;for(let r=0;r<ao.length;r++)(t>>r&1)===1&&(e^=ao[r]);return e}function lo(n,t,e=1){const r=n.length;let p=1;for(let f=0;f<r;f++){const g=n.charCodeAt(f);if(g<33||g>126)throw new Error(`Invalid prefix (${n})`);p=Vt(p)^g>>5}p=Vt(p);for(let f=0;f<r;f++)p=Vt(p)^n.charCodeAt(f)&31;for(let f of t)p=Vt(p)^f;for(let f=0;f<6;f++)p=Vt(p);return p^=e,Or.encode(_r([p%2**30],30,5,!1))}function vs(n){const t=n==="bech32"?1:734539939,e=mt(5),r=e.decode,p=e.encode,f=oo(r);function g(o,i,u=90){if(typeof o!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof o}`);if(!Array.isArray(i)||i.length&&typeof i[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof i}`);const c=o.length+7+i.length;if(u!==!1&&c>u)throw new TypeError(`Length ${c} exceeds limit ${u}`);return o=o.toLowerCase(),`${o}1${Or.encode(i)}${lo(o,i,t)}`}function y(o,i=90){if(typeof o!="string")throw new Error(`bech32.decode input should be string, not ${typeof o}`);if(o.length<8||i!==!1&&o.length>i)throw new TypeError(`Wrong string length: ${o.length} (${o}). Expected (8..${i})`);const u=o.toLowerCase();if(o!==u&&o!==o.toUpperCase())throw new Error("String must be lowercase or uppercase");o=u;const c=o.lastIndexOf("1");if(c===0||c===-1)throw new Error('Letter "1" must be present between prefix and data only');const s=o.slice(0,c),l=o.slice(c+1);if(l.length<6)throw new Error("Data must be at least 6 characters long");const h=Or.decode(l).slice(0,-6),m=lo(s,h,t);if(!l.endsWith(m))throw new Error(`Invalid checksum in ${o}: expected "${m}"`);return{prefix:s,words:h}}const a=oo(y);function d(o){const{prefix:i,words:u}=y(o,!1);return{prefix:i,words:u,bytes:r(u)}}return{encode:g,decode:y,decodeToBytes:d,decodeUnsafe:a,fromWords:r,fromWordsUnsafe:f,toWords:p}}const Ot=vs("bech32");vs("bech32m");const eu={encode:n=>new TextDecoder().decode(n),decode:n=>new TextEncoder().encode(n)},tu=et(mt(4),tt("0123456789abcdef"),nt(""),gs(n=>{if(typeof n!="string"||n.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof n} with length ${n.length}`);return n.toLowerCase()})),nu={utf8:eu,hex:tu,base16:Qc,base32:Xc,base64:Je,base64url:qc,base58:Ir,base58xmr:Jc};`${Object.keys(nu).join(", ")}`;function ir(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`positive integer expected, not ${n}`)}function co(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function ru(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function Xe(n,...t){if(!ru(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${n.length}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const Ee=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),iu=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!iu)throw new Error("Non little-endian hardware is not supported");function ou(n,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(n,t)}function su(n,t){if(n.length!==t.length)return!1;let e=0;for(let r=0;r<n.length;r++)e|=n[r]^t[r];return e===0}const au=(n,t)=>(Object.assign(t,n),t),dt=16,lu=283;function li(n){return n<<1^lu&-(n>>7)}function Lt(n,t){let e=0;for(;t>0;t>>=1)e^=n&-(t&1),n=li(n);return e}const Dr=(()=>{let n=new Uint8Array(256);for(let e=0,r=1;e<256;e++,r^=li(r))n[e]=r;const t=new Uint8Array(256);t[0]=99;for(let e=0;e<255;e++){let r=n[255-e];r|=r<<8,t[n[e]]=(r^r>>4^r>>5^r>>6^r>>7^99)&255}return t})(),cu=Dr.map((n,t)=>Dr.indexOf(t)),uu=n=>n<<24|n>>>8,or=n=>n<<8|n>>>24;function ys(n,t){if(n.length!==256)throw new Error("Wrong sbox length");const e=new Uint32Array(256).map((d,o)=>t(n[o])),r=e.map(or),p=r.map(or),f=p.map(or),g=new Uint32Array(256*256),y=new Uint32Array(256*256),a=new Uint16Array(256*256);for(let d=0;d<256;d++)for(let o=0;o<256;o++){const i=d*256+o;g[i]=e[d]^r[o],y[i]=p[d]^f[o],a[i]=n[d]<<8|n[o]}return{sbox:n,sbox2:a,T0:e,T1:r,T2:p,T3:f,T01:g,T23:y}}const ci=ys(Dr,n=>Lt(n,3)<<24|n<<16|n<<8|Lt(n,2)),ws=ys(cu,n=>Lt(n,11)<<24|Lt(n,13)<<16|Lt(n,9)<<8|Lt(n,14)),hu=(()=>{const n=new Uint8Array(16);for(let t=0,e=1;t<16;t++,e=li(e))n[t]=e;return n})();function bs(n){Xe(n);const t=n.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);const{sbox2:e}=ci,r=Ee(n),p=r.length,f=y=>Pe(e,y,y,y,y),g=new Uint32Array(t+28);g.set(r);for(let y=p;y<g.length;y++){let a=g[y-1];y%p===0?a=f(uu(a))^hu[y/p-1]:p>6&&y%p===4&&(a=f(a)),g[y]=g[y-p]^a}return g}function du(n){const t=bs(n),e=t.slice(),r=t.length,{sbox2:p}=ci,{T0:f,T1:g,T2:y,T3:a}=ws;for(let d=0;d<r;d+=4)for(let o=0;o<4;o++)e[d+o]=t[r-d-4+o];t.fill(0);for(let d=4;d<r-4;d++){const o=e[d],i=Pe(p,o,o,o,o);e[d]=f[i&255]^g[i>>>8&255]^y[i>>>16&255]^a[i>>>24]}return e}function ht(n,t,e,r,p,f){return n[e<<8&65280|r>>>8&255]^t[p>>>8&65280|f>>>24&255]}function Pe(n,t,e,r,p){return n[t&255|e&65280]|n[r>>>16&255|p>>>16&65280]<<16}function uo(n,t,e,r,p){const{sbox2:f,T01:g,T23:y}=ci;let a=0;t^=n[a++],e^=n[a++],r^=n[a++],p^=n[a++];const d=n.length/4-2;for(let s=0;s<d;s++){const l=n[a++]^ht(g,y,t,e,r,p),h=n[a++]^ht(g,y,e,r,p,t),m=n[a++]^ht(g,y,r,p,t,e),w=n[a++]^ht(g,y,p,t,e,r);t=l,e=h,r=m,p=w}const o=n[a++]^Pe(f,t,e,r,p),i=n[a++]^Pe(f,e,r,p,t),u=n[a++]^Pe(f,r,p,t,e),c=n[a++]^Pe(f,p,t,e,r);return{s0:o,s1:i,s2:u,s3:c}}function fu(n,t,e,r,p){const{sbox2:f,T01:g,T23:y}=ws;let a=0;t^=n[a++],e^=n[a++],r^=n[a++],p^=n[a++];const d=n.length/4-2;for(let s=0;s<d;s++){const l=n[a++]^ht(g,y,t,p,r,e),h=n[a++]^ht(g,y,e,t,p,r),m=n[a++]^ht(g,y,r,e,t,p),w=n[a++]^ht(g,y,p,r,e,t);t=l,e=h,r=m,p=w}const o=n[a++]^Pe(f,t,p,r,e),i=n[a++]^Pe(f,e,t,p,r),u=n[a++]^Pe(f,r,e,t,p),c=n[a++]^Pe(f,p,r,e,t);return{s0:o,s1:i,s2:u,s3:c}}function $s(n,t){if(!t)return new Uint8Array(n);if(Xe(t),t.length<n)throw new Error(`aes: wrong destination length, expected at least ${n}, got: ${t.length}`);return t}function pu(n){if(Xe(n),n.length%dt!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${dt}`)}function gu(n,t,e){let r=n.length;const p=r%dt;if(!t&&p!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const f=Ee(n);if(t){let a=dt-p;a||(a=dt),r=r+a}const g=$s(r,e),y=Ee(g);return{b:f,o:y,out:g}}function mu(n,t){if(!t)return n;const e=n.length;if(!e)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=n[e-1];if(r<=0||r>16)throw new Error(`aes/pcks5: wrong padding byte: ${r}`);const p=n.subarray(0,-r);for(let f=0;f<r;f++)if(n[e-f-1]!==r)throw new Error("aes/pcks5: wrong padding");return p}function vu(n){const t=new Uint8Array(16),e=Ee(t);t.set(n);const r=dt-n.length;for(let p=dt-r;p<dt;p++)t[p]=r;return e}const Ss=au({blockSize:16,nonceLength:16},function(t,e,r={}){Xe(t),Xe(e,16);const p=!r.disablePadding;return{encrypt:(f,g)=>{const y=bs(t),{b:a,o:d,out:o}=gu(f,p,g),i=Ee(e);let u=i[0],c=i[1],s=i[2],l=i[3],h=0;for(;h+4<=a.length;)u^=a[h+0],c^=a[h+1],s^=a[h+2],l^=a[h+3],{s0:u,s1:c,s2:s,s3:l}=uo(y,u,c,s,l),d[h++]=u,d[h++]=c,d[h++]=s,d[h++]=l;if(p){const m=vu(f.subarray(h*4));u^=m[0],c^=m[1],s^=m[2],l^=m[3],{s0:u,s1:c,s2:s,s3:l}=uo(y,u,c,s,l),d[h++]=u,d[h++]=c,d[h++]=s,d[h++]=l}return y.fill(0),o},decrypt:(f,g)=>{pu(f);const y=du(t),a=Ee(e),d=$s(f.length,g),o=Ee(f),i=Ee(d);let u=a[0],c=a[1],s=a[2],l=a[3];for(let h=0;h+4<=o.length;){const m=u,w=c,C=s,A=l;u=o[h+0],c=o[h+1],s=o[h+2],l=o[h+3];const{s0:E,s1:b,s2:L,s3:_}=fu(y,u,c,s,l);i[h++]=E^m,i[h++]=b^w,i[h++]=L^C,i[h++]=_^A}return y.fill(0),mu(d,p)}}}),xs=n=>Uint8Array.from(n.split("").map(t=>t.charCodeAt(0))),yu=xs("expand 16-byte k"),wu=xs("expand 32-byte k"),bu=Ee(yu),Es=Ee(wu);Es.slice();function te(n,t){return n<<t|n>>>32-t}function Nr(n){return n.byteOffset%4===0}const cn=64,$u=16,As=2**32-1,ho=new Uint32Array;function Su(n,t,e,r,p,f,g,y){const a=p.length,d=new Uint8Array(cn),o=Ee(d),i=Nr(p)&&Nr(f),u=i?Ee(p):ho,c=i?Ee(f):ho;for(let s=0;s<a;g++){if(n(t,e,r,o,g,y),g>=As)throw new Error("arx: counter overflow");const l=Math.min(cn,a-s);if(i&&l===cn){const h=s/4;if(s%4!==0)throw new Error("arx: invalid block position");for(let m=0,w;m<$u;m++)w=h+m,c[w]=u[w]^o[m];s+=cn;continue}for(let h=0,m;h<l;h++)m=s+h,f[m]=p[m]^d[h];s+=l}}function xu(n,t){const{allowShortKeys:e,extendNonceFn:r,counterLength:p,counterRight:f,rounds:g}=ou({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof n!="function")throw new Error("core must be a function");return ir(p),ir(g),co(f),co(e),(y,a,d,o,i=0)=>{Xe(y),Xe(a),Xe(d);const u=d.length;if(o||(o=new Uint8Array(u)),Xe(o),ir(i),i<0||i>=As)throw new Error("arx: counter overflow");if(o.length<u)throw new Error(`arx: output (${o.length}) is shorter than data (${u})`);const c=[];let s=y.length,l,h;if(s===32)l=y.slice(),c.push(l),h=Es;else if(s===16&&e)l=new Uint8Array(32),l.set(y),l.set(y,16),h=bu,c.push(l);else throw new Error(`arx: invalid 32-byte key, got length=${s}`);Nr(a)||(a=a.slice(),c.push(a));const m=Ee(l);if(r){if(a.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(h,m,Ee(a.subarray(0,16)),m),a=a.subarray(16)}const w=16-p;if(w!==a.length)throw new Error(`arx: nonce must be ${w} or 16 bytes`);if(w!==12){const A=new Uint8Array(12);A.set(a,f?0:12-a.length),a=A,c.push(a)}const C=Ee(a);for(Su(n,h,m,C,d,o,i,g);c.length>0;)c.pop().fill(0);return o}}function Eu(n,t,e,r,p,f=20){let g=n[0],y=n[1],a=n[2],d=n[3],o=t[0],i=t[1],u=t[2],c=t[3],s=t[4],l=t[5],h=t[6],m=t[7],w=p,C=e[0],A=e[1],E=e[2],b=g,L=y,_=a,k=d,T=o,O=i,$=u,v=c,S=s,x=l,M=h,R=m,I=w,D=C,N=A,B=E;for(let F=0;F<f;F+=2)b=b+T|0,I=te(I^b,16),S=S+I|0,T=te(T^S,12),b=b+T|0,I=te(I^b,8),S=S+I|0,T=te(T^S,7),L=L+O|0,D=te(D^L,16),x=x+D|0,O=te(O^x,12),L=L+O|0,D=te(D^L,8),x=x+D|0,O=te(O^x,7),_=_+$|0,N=te(N^_,16),M=M+N|0,$=te($^M,12),_=_+$|0,N=te(N^_,8),M=M+N|0,$=te($^M,7),k=k+v|0,B=te(B^k,16),R=R+B|0,v=te(v^R,12),k=k+v|0,B=te(B^k,8),R=R+B|0,v=te(v^R,7),b=b+O|0,B=te(B^b,16),M=M+B|0,O=te(O^M,12),b=b+O|0,B=te(B^b,8),M=M+B|0,O=te(O^M,7),L=L+$|0,I=te(I^L,16),R=R+I|0,$=te($^R,12),L=L+$|0,I=te(I^L,8),R=R+I|0,$=te($^R,7),_=_+v|0,D=te(D^_,16),S=S+D|0,v=te(v^S,12),_=_+v|0,D=te(D^_,8),S=S+D|0,v=te(v^S,7),k=k+T|0,N=te(N^k,16),x=x+N|0,T=te(T^x,12),k=k+T|0,N=te(N^k,8),x=x+N|0,T=te(T^x,7);let W=0;r[W++]=g+b|0,r[W++]=y+L|0,r[W++]=a+_|0,r[W++]=d+k|0,r[W++]=o+T|0,r[W++]=i+O|0,r[W++]=u+$|0,r[W++]=c+v|0,r[W++]=s+S|0,r[W++]=l+x|0,r[W++]=h+M|0,r[W++]=m+R|0,r[W++]=w+I|0,r[W++]=C+D|0,r[W++]=A+N|0,r[W++]=E+B|0}const Cs=xu(Eu,{counterRight:!1,counterLength:4,allowShortKeys:!1});class Ms extends us{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,We.hash(t);const r=Zt(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const p=this.blockLen,f=new Uint8Array(p);f.set(r.length>p?t.create().update(r).digest():r);for(let g=0;g<f.length;g++)f[g]^=54;this.iHash.update(f),this.oHash=t.create();for(let g=0;g<f.length;g++)f[g]^=106;this.oHash.update(f),f.fill(0)}update(t){return We.exists(this),this.iHash.update(t),this}digestInto(t){We.exists(this),We.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:p,destroyed:f,blockLen:g,outputLen:y}=this;return t=t,t.finished=p,t.destroyed=f,t.blockLen=g,t.outputLen=y,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Dn=(n,t,e)=>new Ms(n,t).update(e).digest();Dn.create=(n,t)=>new Ms(n,t);function Au(n,t,e){return We.hash(n),Dn(n,Zt(e),Zt(t))}const sr=new Uint8Array([0]),fo=new Uint8Array;function Cu(n,t,e,r=32){if(We.hash(n),We.number(r),r>255*n.outputLen)throw new Error("Length should be <= 255*HashLen");const p=Math.ceil(r/n.outputLen);e===void 0&&(e=fo);const f=new Uint8Array(p*n.outputLen),g=Dn.create(n,t),y=g._cloneInto(),a=new Uint8Array(g.outputLen);for(let d=0;d<p;d++)sr[0]=d+1,y.update(d===0?fo:a).update(e).update(sr).digestInto(a),f.set(a,n.outputLen*d),g._cloneInto(y);return g.destroy(),y.destroy(),a.fill(0),sr.fill(0),f.slice(0,r)}var Mu=Object.defineProperty,ue=(n,t)=>{for(var e in t)Mu(n,e,{get:t[e],enumerable:!0})},Ct=Symbol("verified"),Lu=n=>n instanceof Object;function ui(n){if(!Lu(n)||typeof n.kind!="number"||typeof n.content!="string"||typeof n.created_at!="number"||typeof n.pubkey!="string"||!n.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(n.tags))return!1;for(let t=0;t<n.tags.length;t++){let e=n.tags[t];if(!Array.isArray(e))return!1;for(let r=0;r<e.length;r++)if(typeof e[r]=="object")return!1}return!0}var Tu={};ue(Tu,{Queue:()=>Iu,QueueNode:()=>Ls,binarySearch:()=>hi,insertEventIntoAscendingList:()=>_u,insertEventIntoDescendingList:()=>Ru,normalizeURL:()=>ku,utf8Decoder:()=>qe,utf8Encoder:()=>Ne});var qe=new TextDecoder("utf-8"),Ne=new TextEncoder;function ku(n){n.indexOf("://")===-1&&(n="wss://"+n);let t=new URL(n);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function Ru(n,t){const[e,r]=hi(n,p=>t.id===p.id?0:t.created_at===p.created_at?-1:p.created_at-t.created_at);return r||n.splice(e,0,t),n}function _u(n,t){const[e,r]=hi(n,p=>t.id===p.id?0:t.created_at===p.created_at?-1:t.created_at-p.created_at);return r||n.splice(e,0,t),n}function hi(n,t){let e=0,r=n.length-1;for(;e<=r;){const p=Math.floor((e+r)/2),f=t(n[p]);if(f===0)return[p,!0];f<0?r=p-1:e=p+1}return[e,!1]}var Ls=class{constructor(n){he(this,"value");he(this,"next",null);he(this,"prev",null);this.value=n}},Iu=class{constructor(){he(this,"first");he(this,"last");this.first=null,this.last=null}enqueue(n){const t=new Ls(n);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const t=this.first;return this.first=null,this.last=null,t.value}const n=this.first;return this.first=n.next,n.value}},Ou=class{generateSecretKey(){return jt.utils.randomPrivateKey()}getPublicKey(n){return Ce(jt.getPublicKey(n))}finalizeEvent(n,t){const e=n;return e.pubkey=Ce(jt.getPublicKey(t)),e.id=dn(e),e.sig=Ce(jt.sign(dn(e),t)),e[Ct]=!0,e}verifyEvent(n){if(typeof n[Ct]=="boolean")return n[Ct];const t=dn(n);if(t!==n.id)return n[Ct]=!1,!1;try{const e=jt.verify(n.sig,t,n.pubkey);return n[Ct]=e,e}catch{return n[Ct]=!1,!1}}};function Du(n){if(!ui(n))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,n.pubkey,n.created_at,n.kind,n.tags,n.content])}function dn(n){let t=Pt(Ne.encode(Du(n)));return Ce(t)}var Nn=new Ou,Nu=Nn.generateSecretKey,Ts=Nn.getPublicKey,je=Nn.finalizeEvent,di=Nn.verifyEvent,Bu={};ue(Bu,{Application:()=>Hh,BadgeAward:()=>Gu,BadgeDefinition:()=>_h,BlockedRelaysList:()=>mh,BookmarkList:()=>fh,Bookmarksets:()=>Th,Calendar:()=>Gh,CalendarEventRSVP:()=>Kh,ChannelCreation:()=>Ds,ChannelHideMessage:()=>Fs,ChannelMessage:()=>Bs,ChannelMetadata:()=>Ns,ChannelMuteUser:()=>Hs,ClassifiedListing:()=>zh,ClientAuth:()=>Ps,CommunitiesList:()=>ph,CommunityDefinition:()=>Qh,CommunityPostApproval:()=>nh,Contacts:()=>Uu,CreateOrUpdateProduct:()=>Dh,CreateOrUpdateStall:()=>Oh,Curationsets:()=>kh,Date:()=>jh,DirectMessageRelaysList:()=>bh,DraftClassifiedListing:()=>Uh,DraftLong:()=>Bh,Emojisets:()=>Fh,EncryptedDirectMessage:()=>ju,EventDeletion:()=>Vu,FileMetadata:()=>Qu,FileServerPreference:()=>$h,Followsets:()=>Ch,GenericRepost:()=>Yu,Genericlists:()=>Mh,GiftWrap:()=>Ws,HTTPAuth:()=>gi,Handlerinformation:()=>Zh,Handlerrecommendation:()=>Yh,Highlights:()=>ch,InterestsList:()=>yh,Interestsets:()=>Ih,JobFeedback:()=>oh,JobRequest:()=>rh,JobResult:()=>ih,Label:()=>th,LightningPubRPC:()=>xh,LiveChatMessage:()=>Xu,LiveEvent:()=>Wh,LongFormArticle:()=>Nh,Metadata:()=>Wu,Mutelist:()=>uh,NWCWalletInfo:()=>Sh,NWCWalletRequest:()=>zs,NWCWalletResponse:()=>Eh,NostrConnect:()=>Ah,OpenTimestamps:()=>Zu,Pinlist:()=>hh,PrivateDirectMessage:()=>Ku,ProblemTracker:()=>qu,ProfileBadges:()=>Rh,PublicChatsList:()=>gh,Reaction:()=>pi,RecommendRelay:()=>zu,RelayList:()=>dh,Relaysets:()=>Lh,Report:()=>Ju,Reporting:()=>eh,Repost:()=>fi,Seal:()=>Os,SearchRelaysList:()=>vh,ShortTextNote:()=>Pu,Time:()=>Vh,UserEmojiList:()=>wh,UserStatuses:()=>Ph,Zap:()=>lh,ZapGoal:()=>sh,ZapRequest:()=>ah,classifyKind:()=>Fu,isEphemeralKind:()=>_s,isKind:()=>Hu,isParameterizedReplaceableKind:()=>Is,isRegularKind:()=>ks,isReplaceableKind:()=>Rs});function ks(n){return 1e3<=n&&n<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(n)}function Rs(n){return[0,3].includes(n)||1e4<=n&&n<2e4}function _s(n){return 2e4<=n&&n<3e4}function Is(n){return 3e4<=n&&n<4e4}function Fu(n){return ks(n)?"regular":Rs(n)?"replaceable":_s(n)?"ephemeral":Is(n)?"parameterized":"unknown"}function Hu(n,t){const e=t instanceof Array?t:[t];return ui(n)&&e.includes(n.kind)||!1}var Wu=0,Pu=1,zu=2,Uu=3,ju=4,Vu=5,fi=6,pi=7,Gu=8,Os=13,Ku=14,Yu=16,Ds=40,Ns=41,Bs=42,Fs=43,Hs=44,Zu=1040,Ws=1059,Qu=1063,Xu=1311,qu=1971,Ju=1984,eh=1984,th=1985,nh=4550,rh=5999,ih=6999,oh=7e3,sh=9041,ah=9734,lh=9735,ch=9802,uh=1e4,hh=10001,dh=10002,fh=10003,ph=10004,gh=10005,mh=10006,vh=10007,yh=10015,wh=10030,bh=10050,$h=10096,Sh=13194,xh=21e3,Ps=22242,zs=23194,Eh=23195,Ah=24133,gi=27235,Ch=3e4,Mh=30001,Lh=30002,Th=30003,kh=30004,Rh=30008,_h=30009,Ih=30015,Oh=30017,Dh=30018,Nh=30023,Bh=30024,Fh=30030,Hh=30078,Wh=30311,Ph=30315,zh=30402,Uh=30403,jh=31922,Vh=31923,Gh=31924,Kh=31925,Yh=31989,Zh=31990,Qh=34550,Xh={};ue(Xh,{getHex64:()=>mi,getInt:()=>Us,getSubscriptionId:()=>qh,matchEventId:()=>Jh,matchEventKind:()=>td,matchEventPubkey:()=>ed});function mi(n,t){let e=t.length+3,r=n.indexOf(`"${t}":`)+e,p=n.slice(r).indexOf('"')+r+1;return n.slice(p,p+64)}function Us(n,t){let e=t.length,r=n.indexOf(`"${t}":`)+e+3,p=n.slice(r),f=Math.min(p.indexOf(","),p.indexOf("}"));return parseInt(p.slice(0,f),10)}function qh(n){let t=n.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let e=n.slice(t+7+1).indexOf('"');if(e===-1)return null;let r=t+7+1+e,p=n.slice(r+1,80).indexOf('"');if(p===-1)return null;let f=r+1+p;return n.slice(r+1,f)}function Jh(n,t){return t===mi(n,"id")}function ed(n,t){return t===mi(n,"pubkey")}function td(n,t){return t===Us(n,"kind")}var nd={};ue(nd,{makeAuthEvent:()=>rd});function rd(n,t){return{kind:Ps,created_at:Math.floor(Date.now()/1e3),tags:[["relay",n],["challenge",t]],content:""}}var id;try{id=WebSocket}catch{}var od;try{od=WebSocket}catch{}var js={};ue(js,{BECH32_REGEX:()=>Vs,Bech32MaxSize:()=>vi,NostrTypeGuard:()=>sd,decode:()=>Bn,encodeBytes:()=>Hn,naddrEncode:()=>fd,neventEncode:()=>dd,noteEncode:()=>ud,nprofileEncode:()=>hd,npubEncode:()=>cd,nsecEncode:()=>ld});var sd={isNProfile:n=>/^nprofile1[a-z\d]+$/.test(n||""),isNEvent:n=>/^nevent1[a-z\d]+$/.test(n||""),isNAddr:n=>/^naddr1[a-z\d]+$/.test(n||""),isNSec:n=>/^nsec1[a-z\d]{58}$/.test(n||""),isNPub:n=>/^npub1[a-z\d]{58}$/.test(n||""),isNote:n=>/^note1[a-z\d]+$/.test(n||""),isNcryptsec:n=>/^ncryptsec1[a-z\d]+$/.test(n||"")},vi=5e3,Vs=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function ad(n){const t=new Uint8Array(4);return t[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=n&255,t}function Bn(n){var p,f,g,y,a,d,o;let{prefix:t,words:e}=Ot.decode(n,vi),r=new Uint8Array(Ot.fromWords(e));switch(t){case"nprofile":{let i=ar(r);if(!((p=i[0])!=null&&p[0]))throw new Error("missing TLV 0 for nprofile");if(i[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Ce(i[0][0]),relays:i[1]?i[1].map(u=>qe.decode(u)):[]}}}case"nevent":{let i=ar(r);if(!((f=i[0])!=null&&f[0]))throw new Error("missing TLV 0 for nevent");if(i[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(i[2]&&i[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(i[3]&&i[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Ce(i[0][0]),relays:i[1]?i[1].map(u=>qe.decode(u)):[],author:(g=i[2])!=null&&g[0]?Ce(i[2][0]):void 0,kind:(y=i[3])!=null&&y[0]?parseInt(Ce(i[3][0]),16):void 0}}}case"naddr":{let i=ar(r);if(!((a=i[0])!=null&&a[0]))throw new Error("missing TLV 0 for naddr");if(!((d=i[2])!=null&&d[0]))throw new Error("missing TLV 2 for naddr");if(i[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((o=i[3])!=null&&o[0]))throw new Error("missing TLV 3 for naddr");if(i[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:qe.decode(i[0][0]),pubkey:Ce(i[2][0]),kind:parseInt(Ce(i[3][0]),16),relays:i[1]?i[1].map(u=>qe.decode(u)):[]}}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:Ce(r)};default:throw new Error(`unknown prefix ${t}`)}}function ar(n){let t={},e=n;for(;e.length>0;){let r=e[0],p=e[1],f=e.slice(2,2+p);if(e=e.slice(2+p),f.length<p)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(f)}return t}function ld(n){return Hn("nsec",n)}function cd(n){return Hn("npub",It(n))}function ud(n){return Hn("note",It(n))}function Fn(n,t){let e=Ot.toWords(t);return Ot.encode(n,e,vi)}function Hn(n,t){return Fn(n,t)}function hd(n){let t=yi({0:[It(n.pubkey)],1:(n.relays||[]).map(e=>Ne.encode(e))});return Fn("nprofile",t)}function dd(n){let t;n.kind!==void 0&&(t=ad(n.kind));let e=yi({0:[It(n.id)],1:(n.relays||[]).map(r=>Ne.encode(r)),2:n.author?[It(n.author)]:[],3:t?[new Uint8Array(t)]:[]});return Fn("nevent",e)}function fd(n){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,n.kind,!1);let e=yi({0:[Ne.encode(n.identifier)],1:(n.relays||[]).map(r=>Ne.encode(r)),2:[It(n.pubkey)],3:[new Uint8Array(t)]});return Fn("naddr",e)}function yi(n){let t=[];return Object.entries(n).reverse().forEach(([e,r])=>{r.forEach(p=>{let f=new Uint8Array(p.length+2);f.set([parseInt(e)],0),f.set([p.length],1),f.set(p,2),t.push(f)})}),In(...t)}var pd={};ue(pd,{decrypt:()=>gd,encrypt:()=>Gs});async function Gs(n,t,e){const r=n instanceof Uint8Array?Ce(n):n,p=Wt.getSharedSecret(r,"02"+t),f=Ks(p);let g=Uint8Array.from(ds(16)),y=Ne.encode(e),a=Ss(f,g).encrypt(y),d=Je.encode(new Uint8Array(a)),o=Je.encode(new Uint8Array(g.buffer));return`${d}?iv=${o}`}async function gd(n,t,e){const r=n instanceof Uint8Array?Ce(n):n;let[p,f]=e.split("?iv="),g=Wt.getSharedSecret(r,"02"+t),y=Ks(g),a=Je.decode(f),d=Je.decode(p),o=Ss(y,a).decrypt(d);return qe.decode(o)}function Ks(n){return n.slice(1,33)}var md={};ue(md,{NIP05_REGEX:()=>wi,isNip05:()=>vd,isValid:()=>bd,queryProfile:()=>Ys,searchDomain:()=>wd,useFetchImplementation:()=>yd});var wi=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,vd=n=>wi.test(n||""),Wn;try{Wn=fetch}catch{}function yd(n){Wn=n}async function wd(n,t=""){try{const e=`https://${n}/.well-known/nostr.json?name=${t}`,r=await Wn(e,{redirect:"manual"});if(r.status!==200)throw Error("Wrong response code");return(await r.json()).names}catch{return{}}}async function Ys(n){var p;const t=n.match(wi);if(!t)return null;const[,e="_",r]=t;try{const f=`https://${r}/.well-known/nostr.json?name=${e}`,g=await Wn(f,{redirect:"manual"});if(g.status!==200)throw Error("Wrong response code");const y=await g.json(),a=y.names[e];return a?{pubkey:a,relays:(p=y.relays)==null?void 0:p[a]}:null}catch{return null}}async function bd(n,t){const e=await Ys(t);return e?e.pubkey===n:!1}var $d={};ue($d,{parse:()=>Sd});function Sd(n){const t={reply:void 0,root:void 0,mentions:[],profiles:[],quotes:[]};let e,r;for(let p=n.tags.length-1;p>=0;p--){const f=n.tags[p];if(f[0]==="e"&&f[1]){const[g,y,a,d,o]=f,i={id:y,relays:a?[a]:[],author:o};if(d==="root"){t.root=i;continue}if(d==="reply"){t.reply=i;continue}if(d==="mention"){t.mentions.push(i);continue}e?r=i:e=i,t.mentions.push(i);continue}if(f[0]==="q"&&f[1]){const[g,y,a]=f;t.quotes.push({id:y,relays:a?[a]:[]})}if(f[0]==="p"&&f[1]){t.profiles.push({pubkey:f[1],relays:f[2]?[f[2]]:[]});continue}}return t.root||(t.root=r||e||t.reply),t.reply||(t.reply=e||t.root),[t.reply,t.root].forEach(p=>{if(!p)return;let f=t.mentions.indexOf(p);if(f!==-1&&t.mentions.splice(f,1),p.author){let g=t.profiles.find(y=>y.pubkey===p.author);g&&g.relays&&(p.relays||(p.relays=[]),g.relays.forEach(y=>{var a;((a=p.relays)==null?void 0:a.indexOf(y))===-1&&p.relays.push(y)}),g.relays=p.relays)}}),t.mentions.forEach(p=>{if(p.author){let f=t.profiles.find(g=>g.pubkey===p.author);f&&f.relays&&(p.relays||(p.relays=[]),f.relays.forEach(g=>{p.relays.indexOf(g)===-1&&p.relays.push(g)}),f.relays=p.relays)}}),t}var xd={};ue(xd,{fetchRelayInformation:()=>Ad,useFetchImplementation:()=>Ed});var Zs;try{Zs=fetch}catch{}function Ed(n){Zs=n}async function Ad(n){return await(await fetch(n.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var Cd={};ue(Cd,{fastEventHash:()=>Xs,getPow:()=>Qs,minePow:()=>Md});function Qs(n){let t=0;for(let e=0;e<64;e+=8){const r=parseInt(n.substring(e,e+8),16);if(r===0)t+=32;else{t+=Math.clz32(r);break}}return t}function Md(n,t){let e=0;const r=n,p=["nonce",e.toString(),t.toString()];for(r.tags.push(p);;){const f=Math.floor(new Date().getTime()/1e3);if(f!==r.created_at&&(e=0,r.created_at=f),p[1]=(++e).toString(),r.id=Xs(r),Qs(r.id)>=t)break}return r}function Xs(n){return Ce(Pt(Ne.encode(JSON.stringify([0,n.pubkey,n.created_at,n.kind,n.tags,n.content]))))}var Ld={};ue(Ld,{finishRepostEvent:()=>Td,getRepostedEvent:()=>kd,getRepostedEventPointer:()=>qs});function Td(n,t,e,r){return je({kind:fi,tags:[...n.tags??[],["e",t.id,e],["p",t.pubkey]],content:n.content===""?"":JSON.stringify(t),created_at:n.created_at},r)}function qs(n){if(n.kind!==fi)return;let t,e;for(let r=n.tags.length-1;r>=0&&(t===void 0||e===void 0);r--){const p=n.tags[r];p.length>=2&&(p[0]==="e"&&t===void 0?t=p:p[0]==="p"&&e===void 0&&(e=p))}if(t!==void 0)return{id:t[1],relays:[t[2],e==null?void 0:e[2]].filter(r=>typeof r=="string"),author:e==null?void 0:e[1]}}function kd(n,{skipVerification:t}={}){const e=qs(n);if(e===void 0||n.content==="")return;let r;try{r=JSON.parse(n.content)}catch{return}if(r.id===e.id&&!(!t&&!di(r)))return r}var Rd={};ue(Rd,{NOSTR_URI_REGEX:()=>Pn,parse:()=>Id,test:()=>_d});var Pn=new RegExp(`nostr:(${Vs.source})`);function _d(n){return typeof n=="string"&&new RegExp(`^${Pn.source}$`).test(n)}function Id(n){const t=n.match(new RegExp(`^${Pn.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${n}`);return{uri:t[0],value:t[1],decoded:Bn(t[1])}}var Od={};ue(Od,{finishReactionEvent:()=>Dd,getReactedEventPointer:()=>Nd});function Dd(n,t,e){const r=t.tags.filter(p=>p.length>=2&&(p[0]==="e"||p[0]==="p"));return je({...n,kind:pi,tags:[...n.tags??[],...r,["e",t.id],["p",t.pubkey]],content:n.content??"+"},e)}function Nd(n){if(n.kind!==pi)return;let t,e;for(let r=n.tags.length-1;r>=0&&(t===void 0||e===void 0);r--){const p=n.tags[r];p.length>=2&&(p[0]==="e"&&t===void 0?t=p:p[0]==="p"&&e===void 0&&(e=p))}if(!(t===void 0||e===void 0))return{id:t[1],relays:[t[2],e[2]].filter(r=>r!==void 0),author:e[1]}}var Bd={};ue(Bd,{matchAll:()=>Fd,regex:()=>bi,replaceAll:()=>Hd});var bi=()=>new RegExp(`\\b${Pn.source}\\b`,"g");function*Fd(n){const t=n.matchAll(bi());for(const e of t)try{const[r,p]=e;yield{uri:r,value:p,decoded:Bn(p),start:e.index,end:e.index+r.length}}catch{}}function Hd(n,t){return n.replaceAll(bi(),(e,r)=>t({uri:e,value:r,decoded:Bn(r)}))}var Wd={};ue(Wd,{channelCreateEvent:()=>Pd,channelHideMessageEvent:()=>jd,channelMessageEvent:()=>Ud,channelMetadataEvent:()=>zd,channelMuteUserEvent:()=>Vd});var Pd=(n,t)=>{let e;if(typeof n.content=="object")e=JSON.stringify(n.content);else if(typeof n.content=="string")e=n.content;else return;return je({kind:Ds,tags:[...n.tags??[]],content:e,created_at:n.created_at},t)},zd=(n,t)=>{let e;if(typeof n.content=="object")e=JSON.stringify(n.content);else if(typeof n.content=="string")e=n.content;else return;return je({kind:Ns,tags:[["e",n.channel_create_event_id],...n.tags??[]],content:e,created_at:n.created_at},t)},Ud=(n,t)=>{const e=[["e",n.channel_create_event_id,n.relay_url,"root"]];return n.reply_to_channel_message_event_id&&e.push(["e",n.reply_to_channel_message_event_id,n.relay_url,"reply"]),je({kind:Bs,tags:[...e,...n.tags??[]],content:n.content,created_at:n.created_at},t)},jd=(n,t)=>{let e;if(typeof n.content=="object")e=JSON.stringify(n.content);else if(typeof n.content=="string")e=n.content;else return;return je({kind:Fs,tags:[["e",n.channel_message_event_id],...n.tags??[]],content:e,created_at:n.created_at},t)},Vd=(n,t)=>{let e;if(typeof n.content=="object")e=JSON.stringify(n.content);else if(typeof n.content=="string")e=n.content;else return;return je({kind:Hs,tags:[["p",n.pubkey_to_mute],...n.tags??[]],content:e,created_at:n.created_at},t)},Gd={};ue(Gd,{EMOJI_SHORTCODE_REGEX:()=>Js,matchAll:()=>Kd,regex:()=>$i,replaceAll:()=>Yd});var Js=/:(\w+):/,$i=()=>new RegExp(`\\B${Js.source}\\B`,"g");function*Kd(n){const t=n.matchAll($i());for(const e of t)try{const[r,p]=e;yield{shortcode:r,name:p,start:e.index,end:e.index+r.length}}catch{}}function Yd(n,t){return n.replaceAll($i(),(e,r)=>t({shortcode:e,name:r}))}var Zd={};ue(Zd,{useFetchImplementation:()=>Qd,validateGithub:()=>Xd});var Si;try{Si=fetch}catch{}function Qd(n){Si=n}async function Xd(n,t,e){try{return await(await Si(`https://gist.github.com/${t}/${e}/raw`)).text()===`Verifying that I control the following Nostr public key: ${n}`}catch{return!1}}var qd={};ue(qd,{decrypt:()=>Ci,encrypt:()=>Ai,getConversationKey:()=>xi,v2:()=>rf});var ea=1,ta=65535;function xi(n,t){const e=Wt.getSharedSecret(n,"02"+t).subarray(1,33);return Au(Pt,e,"nip44-v2")}function na(n,t){const e=Cu(Pt,n,t,76);return{chacha_key:e.subarray(0,32),chacha_nonce:e.subarray(32,44),hmac_key:e.subarray(44,76)}}function Ei(n){if(!Number.isSafeInteger(n)||n<1)throw new Error("expected positive integer");if(n<=32)return 32;const t=1<<Math.floor(Math.log2(n-1))+1,e=t<=256?32:t/8;return e*(Math.floor((n-1)/e)+1)}function Jd(n){if(!Number.isSafeInteger(n)||n<ea||n>ta)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,n,!1),t}function ef(n){const t=Ne.encode(n),e=t.length,r=Jd(e),p=new Uint8Array(Ei(e)-e);return In(r,t,p)}function tf(n){const t=new DataView(n.buffer).getUint16(0),e=n.subarray(2,2+t);if(t<ea||t>ta||e.length!==t||n.length!==2+Ei(t))throw new Error("invalid padding");return qe.decode(e)}function ra(n,t,e){if(e.length!==32)throw new Error("AAD associated data must be 32 bytes");const r=In(e,t);return Dn(Pt,n,r)}function nf(n){if(typeof n!="string")throw new Error("payload must be a valid string");const t=n.length;if(t<132||t>87472)throw new Error("invalid payload length: "+t);if(n[0]==="#")throw new Error("unknown encryption version");let e;try{e=Je.decode(n)}catch(f){throw new Error("invalid base64: "+f.message)}const r=e.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const p=e[0];if(p!==2)throw new Error("unknown encryption version "+p);return{nonce:e.subarray(1,33),ciphertext:e.subarray(33,-32),mac:e.subarray(-32)}}function Ai(n,t,e=ds(32)){const{chacha_key:r,chacha_nonce:p,hmac_key:f}=na(t,e),g=ef(n),y=Cs(r,p,g),a=ra(f,y,e);return Je.encode(In(new Uint8Array([2]),e,y,a))}function Ci(n,t){const{nonce:e,ciphertext:r,mac:p}=nf(n),{chacha_key:f,chacha_nonce:g,hmac_key:y}=na(t,e),a=ra(y,r,e);if(!su(a,p))throw new Error("invalid MAC");const d=Cs(f,g,r);return tf(d)}var rf={utils:{getConversationKey:xi,calcPaddedLen:Ei},encrypt:Ai,decrypt:Ci},of={};ue(of,{makeNwcRequestEvent:()=>af,parseConnectionString:()=>sf});function sf(n){const{pathname:t,searchParams:e}=new URL(n),r=t,p=e.get("relay"),f=e.get("secret");if(!r||!p||!f)throw new Error("invalid connection string");return{pubkey:r,relay:p,secret:f}}async function af(n,t,e){const p=await Gs(t,n,JSON.stringify({method:"pay_invoice",params:{invoice:e}})),f={kind:zs,created_at:Math.round(Date.now()/1e3),content:p,tags:[["p",n]]};return je(f,t)}var lf={};ue(lf,{getZapEndpoint:()=>uf,makeZapReceipt:()=>ff,makeZapRequest:()=>hf,useFetchImplementation:()=>cf,validateZapRequest:()=>df});var Mi;try{Mi=fetch}catch{}function cf(n){Mi=n}async function uf(n){try{let t="",{lud06:e,lud16:r}=JSON.parse(n.content);if(e){let{words:g}=Ot.decode(e,1e3),y=Ot.fromWords(g);t=qe.decode(y)}else if(r){let[g,y]=r.split("@");t=new URL(`/.well-known/lnurlp/${g}`,`https://${y}`).toString()}else return null;let f=await(await Mi(t)).json();if(f.allowsNostr&&f.nostrPubkey)return f.callback}catch{}return null}function hf({profile:n,event:t,amount:e,relays:r,comment:p=""}){if(!e)throw new Error("amount not given");if(!n)throw new Error("profile not given");let f={kind:9734,created_at:Math.round(Date.now()/1e3),content:p,tags:[["p",n],["amount",e.toString()],["relays",...r]]};return t&&f.tags.push(["e",t]),f}function df(n){let t;try{t=JSON.parse(n)}catch{return"Invalid zap request JSON."}if(!ui(t))return"Zap request is not a valid Nostr event.";if(!di(t))return"Invalid signature on zap request.";let e=t.tags.find(([f,g])=>f==="p"&&g);if(!e)return"Zap request doesn't have a 'p' tag.";if(!e[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find(([f,g])=>f==="e"&&g);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find(([f,g])=>f==="relays"&&g)?null:"Zap request doesn't have a 'relays' tag."}function ff({zapRequest:n,preimage:t,bolt11:e,paidAt:r}){let p=JSON.parse(n),f=p.tags.filter(([y])=>y==="e"||y==="p"||y==="a"),g={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...f,["P",p.pubkey],["bolt11",e],["description",n]]};return t&&g.tags.push(["preimage",t]),g}var pf={};ue(pf,{createRumor:()=>la,createSeal:()=>ca,createWrap:()=>ua,unwrapEvent:()=>ha,unwrapManyEvents:()=>vf,wrapEvent:()=>Br,wrapManyEvents:()=>mf});var gf=2*24*60*60,ia=()=>Math.round(Date.now()/1e3),oa=()=>Math.round(ia()-Math.random()*gf),sa=(n,t)=>xi(n,t),aa=(n,t,e)=>Ai(JSON.stringify(n),sa(t,e)),po=(n,t)=>JSON.parse(Ci(n.content,sa(t,n.pubkey)));function la(n,t){const e={created_at:ia(),content:"",tags:[],...n,pubkey:Ts(t)};return e.id=dn(e),e}function ca(n,t,e){return je({kind:Os,content:aa(n,t,e),created_at:oa(),tags:[]},t)}function ua(n,t){const e=Nu();return je({kind:Ws,content:aa(n,e,t),created_at:oa(),tags:[["p",t]]},e)}function Br(n,t,e){const r=la(n,t),p=ca(r,t,e);return ua(p,e)}function mf(n,t,e){if(!e||e.length===0)throw new Error("At least one recipient is required.");const r=Ts(t),p=[Br(n,t,r)];return e.forEach(f=>{p.push(Br(n,t,f))}),p}function ha(n,t){const e=po(n,t);return po(e,t)}function vf(n,t){let e=[];return n.forEach(r=>{e.push(ha(r,t))}),e.sort((r,p)=>r.created_at-p.created_at),e}var yf={};ue(yf,{getToken:()=>wf,hashPayload:()=>Li,unpackEventFromToken:()=>fa,validateEvent:()=>wa,validateEventKind:()=>ga,validateEventMethodTag:()=>va,validateEventPayloadTag:()=>ya,validateEventTimestamp:()=>pa,validateEventUrlTag:()=>ma,validateToken:()=>bf});var da="Nostr ";async function wf(n,t,e,r=!1,p){const f={kind:gi,tags:[["u",n],["method",t]],created_at:Math.round(new Date().getTime()/1e3),content:""};p&&f.tags.push(["payload",Li(p)]);const g=await e(f);return(r?da:"")+Je.encode(Ne.encode(JSON.stringify(g)))}async function bf(n,t,e){const r=await fa(n).catch(f=>{throw f});return await wa(r,t,e).catch(f=>{throw f})}async function fa(n){if(!n)throw new Error("Missing token");n=n.replace(da,"");const t=qe.decode(Je.decode(n));if(!t||t.length===0||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}function pa(n){return n.created_at?Math.round(new Date().getTime()/1e3)-n.created_at<60:!1}function ga(n){return n.kind===gi}function ma(n,t){const e=n.tags.find(r=>r[0]==="u");return e?e.length>0&&e[1]===t:!1}function va(n,t){const e=n.tags.find(r=>r[0]==="method");return e?e.length>0&&e[1].toLowerCase()===t.toLowerCase():!1}function Li(n){const t=Pt(Ne.encode(JSON.stringify(n)));return Ce(t)}function ya(n,t){const e=n.tags.find(p=>p[0]==="payload");if(!e)return!1;const r=Li(t);return e.length>0&&e[1]===r}async function wa(n,t,e,r){if(!di(n))throw new Error("Invalid nostr event, signature invalid");if(!ga(n))throw new Error("Invalid nostr event, kind invalid");if(!pa(n))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!ma(n,t))throw new Error("Invalid nostr event, url tag invalid");if(!va(n,e))throw new Error("Invalid nostr event, method tag invalid");if(r&&typeof r=="object"&&Object.keys(r).length>0&&!ya(n,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}var $f=Object.defineProperty,Sf=(n,t,e)=>t in n?$f(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Z=(n,t,e)=>(Sf(n,typeof t!="symbol"?t+"":t,e),e);class qt extends Error{}class go extends qt{constructor(t){super(`RxNostrWebSocketError: WebSocket was closed with code ${t} by relay.`),this.code=t,this.name="RxNostrWebSocketError"}}class fn extends qt{constructor(t){super(`RxNostrInvalidUsageError: ${t}`),this.name="RxNostrInvalidUsageError"}}let lr=class extends qt{constructor(t){super(`RxNostrEnvironmentError: ${t}`),this.name="RxNostrEnvironmentError"}};class ba extends qt{constructor(){super("RxNostrLogicError: This is rx-nostr's internal bug. Please report to the author of the library."),this.name="RxNostrLogicError"}}class Ke extends qt{constructor(){super("RxNostrAlreadyDisposedError: Attempted to access a disposed resource."),this.name="RxNostrAlreadyDisposedError"}}const Jt=(n,t)=>({...t,...n});function xf(n){if(typeof n.id!="string"||typeof n.sig!="string"||typeof n.kind!="number"||typeof n.pubkey!="string"||typeof n.content!="string"||typeof n.created_at!="number"||!Array.isArray(n.tags))return!1;for(let t=0;t<n.tags.length;t++){const e=n.tags[t];if(!Array.isArray(e))return!1;for(let r=0;r<e.length;r++)if(typeof e[r]=="object")return!1}return!0}function cr(n){throw n}function Ef(n){return{async signEvent(t){var e,r;const p={...t,pubkey:t.pubkey??await((e=window==null?void 0:window.nostr)==null?void 0:e.getPublicKey())??cr(new lr("window.nostr.getPublicKey() is not found")),tags:[...t.tags??[]],created_at:t.created_at??Math.floor(Date.now()/1e3)};return xf(p)?p:await((r=window==null?void 0:window.nostr)==null?void 0:r.signEvent(p))??cr(new lr("window.nostr.signEvent() is not found"))},getPublicKey(){var t;return((t=window==null?void 0:window.nostr)==null?void 0:t.getPublicKey())??cr(new lr("window.nostr.getPublicKey() is not found"))}}}const Af=n=>Jt(n,{signer:Ef(),connectionStrategy:"lazy",retry:{strategy:"exponential",maxCount:5,initialDelay:1e3},eoseTimeout:30*1e3,okTimeout:30*1e3,authTimeout:30*1e3,skipVerify:!1,skipValidateFilterMatching:!1,skipExpirationCheck:!1,skipFetchNip11:!1});function Cf(n){return"length"in n?n.map(mo):[mo(n)]}function mo(n){return{...n,since:n.since?vo(n.since):void 0,until:n.until?vo(n.until):void 0}}function vo(n){return typeof n=="number"?n:n()}async function Mf(n){try{const t=new URL(n);return t.protocol=t.protocol.replace(/^ws(s?):/,"http$1:"),await(await fetch(t.toString(),{headers:{Accept:"application/nostr+json"}})).json()}catch{return{}}}function yo(n,t){try{return n()}catch(e){return t instanceof Function?t(e):t}}function Ye(n){let t="";try{t=n.trim();const e=new URL(t);e.hash="",e.pathname=yo(()=>decodeURI(e.pathname),e.pathname),e.pathname=e.pathname.replace(/\/$/,""),e.hostname=e.hostname.replace(/\.$/,""),e.searchParams.sort(),e.search=yo(()=>decodeURIComponent(e.search),e.search);let r=e.toString();return e.search||(r=r.replace(/\/$/,"")),r}catch{return t}}class Tt extends Map{constructor(t){if(super(),!!t)for(const[e,r]of Object.entries(t))this.set(Ye(e),r)}get(t){return super.get(Ye(t))}getMany(t){const e=[];for(const r of new Set(t.map(Ye))){const p=this.get(r);p!==void 0&&e.push(p)}return e}set(t,e){return super.set(Ye(t),e)}has(t){return super.has(Ye(t))}delete(t){return super.delete(Ye(t))}toObject(){const t={};for(const[e,r]of this.entries())t[e]=r;return t}toKeys(){return[...super.keys()]}toValues(){return[...super.values()]}copy(){return new Tt(this.toObject())}}class bn{static async getValue(t,e,r){if(!(r!=null&&r.skipCache)){const p=await this.cache.get(t);if(p)return e(p)}if(!(r!=null&&r.skipFetch)){const p=await this.fetch(t);if(p)return e(p)}return e(this.default)}static get(t){const e=this.cache.get(t);if(e&&!(e instanceof Promise))return e}static async fetch(t){const e=Mf(t);return this.cache.set(t,e),e.then(r=>{this.cache.set(t,r)}),e}static async getOrFetch(t){return this.cache.get(t)??this.fetch(t)}static set(t,e){this.cache.set(t,e)}static getDefault(){return this.default}static setDefault(t){this.default=t}static forget(t){this.cache.delete(t)}static forgetAll(){this.cache.clear()}}Z(bn,"cache",new Tt),Z(bn,"default",{});/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Lf(n,t,e){return Array.isArray(t)?t.some(r=>wo(n,r)):wo(n,t)}function wo(n,t,e){const{sinceInclusive:r,untilInclusive:p}=Jt({},{sinceInclusive:!0,untilInclusive:!0});if(t.ids&&t.ids.every(f=>!n.id.startsWith(f))||t.kinds&&!t.kinds.includes(n.kind)||t.authors&&t.authors.every(f=>!n.pubkey.startsWith(f))||t.since&&(r&&!(t.since<=n.created_at)||!r&&!(t.since<n.created_at))||t.until&&(p&&!(n.created_at<=t.until)||!p&&!(n.created_at<t.until)))return!1;for(const[f,g]of Object.entries(t)){if(!f.startsWith("#")||!Array.isArray(g))continue;const y=f.slice(1);if(!n.tags.find(([a,d])=>y===a&&g.includes(d)))return!1}return!0}function Tf(n,t){const e=n.tags.find(r=>r[0]==="expiration");if(!e)return!1;try{const r=Number(e[1]);return Number.isInteger(r)?r<=(t??Math.floor(Date.now()/1e3)):!1}catch{return!1}}var Fr=function(n,t){return Fr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var p in r)Object.prototype.hasOwnProperty.call(r,p)&&(e[p]=r[p])},Fr(n,t)};function rt(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Fr(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function kf(n,t,e,r){function p(f){return f instanceof e?f:new e(function(g){g(f)})}return new(e||(e=Promise))(function(f,g){function y(o){try{d(r.next(o))}catch(i){g(i)}}function a(o){try{d(r.throw(o))}catch(i){g(i)}}function d(o){o.done?f(o.value):p(o.value).then(y,a)}d((r=r.apply(n,[])).next())})}function $a(n,t){var e={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},r,p,f,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(d){return function(o){return a([d,o])}}function a(d){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,d[0]&&(e=0)),e;)try{if(r=1,p&&(f=d[0]&2?p.return:d[0]?p.throw||((f=p.return)&&f.call(p),0):p.next)&&!(f=f.call(p,d[1])).done)return f;switch(p=0,f&&(d=[d[0]&2,f.value]),d[0]){case 0:case 1:f=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,p=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(f=e.trys,!(f=f.length>0&&f[f.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!f||d[1]>f[0]&&d[1]<f[3])){e.label=d[1];break}if(d[0]===6&&e.label<f[1]){e.label=f[1],f=d;break}if(f&&e.label<f[2]){e.label=f[2],e.ops.push(d);break}f[2]&&e.ops.pop(),e.trys.pop();continue}d=t.call(n,e)}catch(o){d=[6,o],p=0}finally{r=f=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Dt(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nt(n,t){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var r=e.call(n),p,f=[],g;try{for(;(t===void 0||t-- >0)&&!(p=r.next()).done;)f.push(p.value)}catch(y){g={error:y}}finally{try{p&&!p.done&&(e=r.return)&&e.call(r)}finally{if(g)throw g.error}}return f}function Bt(n,t,e){if(arguments.length===2)for(var r=0,p=t.length,f;r<p;r++)(f||!(r in t))&&(f||(f=Array.prototype.slice.call(t,0,r)),f[r]=t[r]);return n.concat(f||Array.prototype.slice.call(t))}function kt(n){return this instanceof kt?(this.v=n,this):new kt(n)}function Rf(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),p,f=[];return p={},g("next"),g("throw"),g("return"),p[Symbol.asyncIterator]=function(){return this},p;function g(u){r[u]&&(p[u]=function(c){return new Promise(function(s,l){f.push([u,c,s,l])>1||y(u,c)})})}function y(u,c){try{a(r[u](c))}catch(s){i(f[0][3],s)}}function a(u){u.value instanceof kt?Promise.resolve(u.value.v).then(d,o):i(f[0][2],u)}function d(u){y("next",u)}function o(u){y("throw",u)}function i(u,c){u(c),f.shift(),f.length&&y(f[0][0],f[0][1])}}function _f(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof Dt=="function"?Dt(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(f){e[f]=n[f]&&function(g){return new Promise(function(y,a){g=n[f](g),p(y,a,g.done,g.value)})}}function p(f,g,y,a){Promise.resolve(a).then(function(d){f({value:d,done:y})},g)}}function pe(n){return typeof n=="function"}function zn(n){var t=function(r){Error.call(r),r.stack=new Error().stack},e=n(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var ur=zn(function(n){return function(t){n(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,r){return r+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function $n(n,t){if(n){var e=n.indexOf(t);0<=e&&n.splice(e,1)}}var en=function(){function n(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var t,e,r,p,f;if(!this.closed){this.closed=!0;var g=this._parentage;if(g)if(this._parentage=null,Array.isArray(g))try{for(var y=Dt(g),a=y.next();!a.done;a=y.next()){var d=a.value;d.remove(this)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=y.return)&&e.call(y)}finally{if(t)throw t.error}}else g.remove(this);var o=this.initialTeardown;if(pe(o))try{o()}catch(l){f=l instanceof ur?l.errors:[l]}var i=this._finalizers;if(i){this._finalizers=null;try{for(var u=Dt(i),c=u.next();!c.done;c=u.next()){var s=c.value;try{bo(s)}catch(l){f=f??[],l instanceof ur?f=Bt(Bt([],Nt(f)),Nt(l.errors)):f.push(l)}}}catch(l){r={error:l}}finally{try{c&&!c.done&&(p=u.return)&&p.call(u)}finally{if(r)throw r.error}}}if(f)throw new ur(f)}},n.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)bo(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},n.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},n.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},n.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&$n(e,t)},n.prototype.remove=function(t){var e=this._finalizers;e&&$n(e,t),t instanceof n&&t._removeParent(this)},n.EMPTY=function(){var t=new n;return t.closed=!0,t}(),n}(),Sa=en.EMPTY;function xa(n){return n instanceof en||n&&"closed"in n&&pe(n.remove)&&pe(n.add)&&pe(n.unsubscribe)}function bo(n){pe(n)?n():n.unsubscribe()}var If={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Of={setTimeout:function(n,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];return setTimeout.apply(void 0,Bt([n,t],Nt(e)))},clearTimeout:function(n){return clearTimeout(n)},delegate:void 0};function Ea(n){Of.setTimeout(function(){throw n})}function Hr(){}function pn(n){n()}var Ti=function(n){rt(t,n);function t(e){var r=n.call(this)||this;return r.isStopped=!1,e?(r.destination=e,xa(e)&&e.add(r)):r.destination=Bf,r}return t.create=function(e,r,p){return new Sn(e,r,p)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(en),Df=function(){function n(t){this.partialObserver=t}return n.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(r){un(r)}},n.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(r){un(r)}else un(t)},n.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){un(e)}},n}(),Sn=function(n){rt(t,n);function t(e,r,p){var f=n.call(this)||this,g;return pe(e)||!e?g={next:e??void 0,error:r??void 0,complete:p??void 0}:g=e,f.destination=new Df(g),f}return t}(Ti);function un(n){Ea(n)}function Nf(n){throw n}var Bf={closed:!0,next:Hr,error:Nf,complete:Hr},ki=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function it(n){return n}function Ff(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return Aa(n)}function Aa(n){return n.length===0?it:n.length===1?n[0]:function(t){return n.reduce(function(e,r){return r(e)},t)}}var ke=function(){function n(t){t&&(this._subscribe=t)}return n.prototype.lift=function(t){var e=new n;return e.source=this,e.operator=t,e},n.prototype.subscribe=function(t,e,r){var p=this,f=Wf(t)?t:new Sn(t,e,r);return pn(function(){var g=p,y=g.operator,a=g.source;f.add(y?y.call(f,a):a?p._subscribe(f):p._trySubscribe(f))}),f},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},n.prototype.forEach=function(t,e){var r=this;return e=$o(e),new e(function(p,f){var g=new Sn({next:function(y){try{t(y)}catch(a){f(a),g.unsubscribe()}},error:f,complete:p});r.subscribe(g)})},n.prototype._subscribe=function(t){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(t)},n.prototype[ki]=function(){return this},n.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Aa(t)(this)},n.prototype.toPromise=function(t){var e=this;return t=$o(t),new t(function(r,p){var f;e.subscribe(function(g){return f=g},function(g){return p(g)},function(){return r(f)})})},n.create=function(t){return new n(t)},n}();function $o(n){var t;return(t=n??If.Promise)!==null&&t!==void 0?t:Promise}function Hf(n){return n&&pe(n.next)&&pe(n.error)&&pe(n.complete)}function Wf(n){return n&&n instanceof Ti||Hf(n)&&xa(n)}function Pf(n){return pe(n==null?void 0:n.lift)}function Ae(n){return function(t){if(Pf(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function $e(n,t,e,r,p){return new zf(n,t,e,r,p)}var zf=function(n){rt(t,n);function t(e,r,p,f,g,y){var a=n.call(this,e)||this;return a.onFinalize=g,a.shouldUnsubscribe=y,a._next=r?function(d){try{r(d)}catch(o){e.error(o)}}:n.prototype._next,a._error=f?function(d){try{f(d)}catch(o){e.error(o)}finally{this.unsubscribe()}}:n.prototype._error,a._complete=p?function(){try{p()}catch(d){e.error(d)}finally{this.unsubscribe()}}:n.prototype._complete,a}return t.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;n.prototype.unsubscribe.call(this),!r&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},t}(Ti),Uf=zn(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ce=function(n){rt(t,n);function t(){var e=n.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype.lift=function(e){var r=new So(this,this);return r.operator=e,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new Uf},t.prototype.next=function(e){var r=this;pn(function(){var p,f;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var g=Dt(r.currentObservers),y=g.next();!y.done;y=g.next()){var a=y.value;a.next(e)}}catch(d){p={error:d}}finally{try{y&&!y.done&&(f=g.return)&&f.call(g)}finally{if(p)throw p.error}}}})},t.prototype.error=function(e){var r=this;pn(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=e;for(var p=r.observers;p.length;)p.shift().error(e)}})},t.prototype.complete=function(){var e=this;pn(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var r=e.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(e){return this._throwIfClosed(),n.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var r=this,p=this,f=p.hasError,g=p.isStopped,y=p.observers;return f||g?Sa:(this.currentObservers=null,y.push(e),new en(function(){r.currentObservers=null,$n(y,e)}))},t.prototype._checkFinalizedStatuses=function(e){var r=this,p=r.hasError,f=r.thrownError,g=r.isStopped;p?e.error(f):g&&e.complete()},t.prototype.asObservable=function(){var e=new ke;return e.source=this,e},t.create=function(e,r){return new So(e,r)},t}(ke),So=function(n){rt(t,n);function t(e,r){var p=n.call(this)||this;return p.destination=e,p.source=r,p}return t.prototype.next=function(e){var r,p;(p=(r=this.destination)===null||r===void 0?void 0:r.next)===null||p===void 0||p.call(r,e)},t.prototype.error=function(e){var r,p;(p=(r=this.destination)===null||r===void 0?void 0:r.error)===null||p===void 0||p.call(r,e)},t.prototype.complete=function(){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||r===void 0||r.call(e)},t.prototype._subscribe=function(e){var r,p;return(p=(r=this.source)===null||r===void 0?void 0:r.subscribe(e))!==null&&p!==void 0?p:Sa},t}(ce),jf=function(n){rt(t,n);function t(e){var r=n.call(this)||this;return r._value=e,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(e){var r=n.prototype._subscribe.call(this,e);return!r.closed&&e.next(this._value),r},t.prototype.getValue=function(){var e=this,r=e.hasError,p=e.thrownError,f=e._value;if(r)throw p;return this._throwIfClosed(),f},t.prototype.next=function(e){n.prototype.next.call(this,this._value=e)},t}(ce),Vf={now:function(){return Date.now()},delegate:void 0},Gf=function(n){rt(t,n);function t(e,r){return n.call(this)||this}return t.prototype.schedule=function(e,r){return this},t}(en),Wr={setInterval:function(n,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var p=Wr.delegate;return p!=null&&p.setInterval?p.setInterval.apply(p,Bt([n,t],Nt(e))):setInterval.apply(void 0,Bt([n,t],Nt(e)))},clearInterval:function(n){return clearInterval(n)},delegate:void 0},Kf=function(n){rt(t,n);function t(e,r){var p=n.call(this,e,r)||this;return p.scheduler=e,p.work=r,p.pending=!1,p}return t.prototype.schedule=function(e,r){var p;if(r===void 0&&(r=0),this.closed)return this;this.state=e;var f=this.id,g=this.scheduler;return f!=null&&(this.id=this.recycleAsyncId(g,f,r)),this.pending=!0,this.delay=r,this.id=(p=this.id)!==null&&p!==void 0?p:this.requestAsyncId(g,this.id,r),this},t.prototype.requestAsyncId=function(e,r,p){return p===void 0&&(p=0),Wr.setInterval(e.flush.bind(e,this),p)},t.prototype.recycleAsyncId=function(e,r,p){if(p===void 0&&(p=0),p!=null&&this.delay===p&&this.pending===!1)return r;r!=null&&Wr.clearInterval(r)},t.prototype.execute=function(e,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var p=this._execute(e,r);if(p)return p;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,r){var p=!1,f;try{this.work(e)}catch(g){p=!0,f=g||new Error("Scheduled action threw falsy error")}if(p)return this.unsubscribe(),f},t.prototype.unsubscribe=function(){if(!this.closed){var e=this,r=e.id,p=e.scheduler,f=p.actions;this.work=this.state=this.scheduler=null,this.pending=!1,$n(f,this),r!=null&&(this.id=this.recycleAsyncId(p,r,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},t}(Gf),xo=function(){function n(t,e){e===void 0&&(e=n.now),this.schedulerActionCtor=t,this.now=e}return n.prototype.schedule=function(t,e,r){return e===void 0&&(e=0),new this.schedulerActionCtor(this,t).schedule(r,e)},n.now=Vf.now,n}(),Yf=function(n){rt(t,n);function t(e,r){r===void 0&&(r=xo.now);var p=n.call(this,e,r)||this;return p.actions=[],p._active=!1,p}return t.prototype.flush=function(e){var r=this.actions;if(this._active){r.push(e);return}var p;this._active=!0;do if(p=e.execute(e.state,e.delay))break;while(e=r.shift());if(this._active=!1,p){for(;e=r.shift();)e.unsubscribe();throw p}},t}(xo),Ca=new Yf(Kf),Zf=Ca,tn=new ke(function(n){return n.complete()});function Qf(n){return n&&pe(n.schedule)}function Ri(n){return n[n.length-1]}function Xf(n){return pe(Ri(n))?n.pop():void 0}function _i(n){return Qf(Ri(n))?n.pop():void 0}function qf(n,t){return typeof Ri(n)=="number"?n.pop():t}var Ma=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function La(n){return pe(n==null?void 0:n.then)}function Ta(n){return pe(n[ki])}function ka(n){return Symbol.asyncIterator&&pe(n==null?void 0:n[Symbol.asyncIterator])}function Ra(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Jf(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var _a=Jf();function Ia(n){return pe(n==null?void 0:n[_a])}function Oa(n){return Rf(this,arguments,function(){var t,e,r,p;return $a(this,function(f){switch(f.label){case 0:t=n.getReader(),f.label=1;case 1:f.trys.push([1,,9,10]),f.label=2;case 2:return[4,kt(t.read())];case 3:return e=f.sent(),r=e.value,p=e.done,p?[4,kt(void 0)]:[3,5];case 4:return[2,f.sent()];case 5:return[4,kt(r)];case 6:return[4,f.sent()];case 7:return f.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function Da(n){return pe(n==null?void 0:n.getReader)}function Ve(n){if(n instanceof ke)return n;if(n!=null){if(Ta(n))return ep(n);if(Ma(n))return tp(n);if(La(n))return np(n);if(ka(n))return Na(n);if(Ia(n))return rp(n);if(Da(n))return ip(n)}throw Ra(n)}function ep(n){return new ke(function(t){var e=n[ki]();if(pe(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function tp(n){return new ke(function(t){for(var e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function np(n){return new ke(function(t){n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,Ea)})}function rp(n){return new ke(function(t){var e,r;try{for(var p=Dt(n),f=p.next();!f.done;f=p.next()){var g=f.value;if(t.next(g),t.closed)return}}catch(y){e={error:y}}finally{try{f&&!f.done&&(r=p.return)&&r.call(p)}finally{if(e)throw e.error}}t.complete()})}function Na(n){return new ke(function(t){op(n,t).catch(function(e){return t.error(e)})})}function ip(n){return Na(Oa(n))}function op(n,t){var e,r,p,f;return kf(this,void 0,void 0,function(){var g,y;return $a(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),e=_f(n),a.label=1;case 1:return[4,e.next()];case 2:if(r=a.sent(),!!r.done)return[3,4];if(g=r.value,t.next(g),t.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return y=a.sent(),p={error:y},[3,11];case 6:return a.trys.push([6,,9,10]),r&&!r.done&&(f=e.return)?[4,f.call(e)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(p)throw p.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Ue(n,t,e,r,p){r===void 0&&(r=0),p===void 0&&(p=!1);var f=t.schedule(function(){e(),p?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(f),!p)return f}function Ba(n,t){return t===void 0&&(t=0),Ae(function(e,r){e.subscribe($e(r,function(p){return Ue(r,n,function(){return r.next(p)},t)},function(){return Ue(r,n,function(){return r.complete()},t)},function(p){return Ue(r,n,function(){return r.error(p)},t)}))})}function Fa(n,t){return t===void 0&&(t=0),Ae(function(e,r){r.add(n.schedule(function(){return e.subscribe(r)},t))})}function sp(n,t){return Ve(n).pipe(Fa(t),Ba(t))}function ap(n,t){return Ve(n).pipe(Fa(t),Ba(t))}function lp(n,t){return new ke(function(e){var r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}function cp(n,t){return new ke(function(e){var r;return Ue(e,t,function(){r=n[_a](),Ue(e,t,function(){var p,f,g;try{p=r.next(),f=p.value,g=p.done}catch(y){e.error(y);return}g?e.complete():e.next(f)},0,!0)}),function(){return pe(r==null?void 0:r.return)&&r.return()}})}function Ha(n,t){if(!n)throw new Error("Iterable cannot be null");return new ke(function(e){Ue(e,t,function(){var r=n[Symbol.asyncIterator]();Ue(e,t,function(){r.next().then(function(p){p.done?e.complete():e.next(p.value)})},0,!0)})})}function up(n,t){return Ha(Oa(n),t)}function hp(n,t){if(n!=null){if(Ta(n))return sp(n,t);if(Ma(n))return lp(n,t);if(La(n))return ap(n,t);if(ka(n))return Ha(n,t);if(Ia(n))return cp(n,t);if(Da(n))return up(n,t)}throw Ra(n)}function nn(n,t){return t?hp(n,t):Ve(n)}function Wa(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=_i(n);return nn(n,e)}var Ii=zn(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function Pa(n,t){return new Promise(function(e,r){var p=new Sn({next:function(f){e(f),p.unsubscribe()},error:r,complete:function(){r(new Ii)}});n.subscribe(p)})}function za(n){return n instanceof Date&&!isNaN(n)}var Ua=zn(function(n){return function(t){t===void 0&&(t=null),n(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function ja(n,t){var e=za(n)?{first:n}:typeof n=="number"?{each:n}:n,r=e.first,p=e.each,f=e.with,g=f===void 0?dp:f,y=e.scheduler,a=y===void 0?Ca:y,d=e.meta,o=d===void 0?null:d;if(r==null&&p==null)throw new TypeError("No timeout provided.");return Ae(function(i,u){var c,s,l=null,h=0,m=function(w){s=Ue(u,a,function(){try{c.unsubscribe(),Ve(g({meta:o,lastValue:l,seen:h})).subscribe(u)}catch(C){u.error(C)}},w)};c=i.subscribe($e(u,function(w){s==null||s.unsubscribe(),h++,u.next(l=w),p>0&&m(p)},void 0,void 0,function(){s!=null&&s.closed||s==null||s.unsubscribe(),l=null})),!h&&m(r!=null?typeof r=="number"?r:+r-a.now():p)})}function dp(n){throw new Ua(n)}function ft(n,t){return Ae(function(e,r){var p=0;e.subscribe($e(r,function(f){r.next(n.call(t,f,p++))}))})}var fp=Array.isArray;function pp(n,t){return fp(t)?n.apply(void 0,Bt([],Nt(t))):n(t)}function gp(n){return ft(function(t){return pp(n,t)})}var mp=Array.isArray,vp=Object.getPrototypeOf,yp=Object.prototype,wp=Object.keys;function bp(n){if(n.length===1){var t=n[0];if(mp(t))return{args:t,keys:null};if($p(t)){var e=wp(t);return{args:e.map(function(r){return t[r]}),keys:e}}}return{args:n,keys:null}}function $p(n){return n&&typeof n=="object"&&vp(n)===yp}function Sp(n,t){return n.reduce(function(e,r,p){return e[r]=t[p],e},{})}function xp(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=_i(n),r=Xf(n),p=bp(n),f=p.args,g=p.keys;if(f.length===0)return nn([],e);var y=new ke(Ep(f,e,g?function(a){return Sp(g,a)}:it));return r?y.pipe(gp(r)):y}function Ep(n,t,e){return e===void 0&&(e=it),function(r){Eo(t,function(){for(var p=n.length,f=new Array(p),g=p,y=p,a=function(o){Eo(t,function(){var i=nn(n[o],t),u=!1;i.subscribe($e(r,function(c){f[o]=c,u||(u=!0,y--),y||r.next(e(f.slice()))},function(){--g||r.complete()}))},r)},d=0;d<p;d++)a(d)},r)}}function Eo(n,t,e){n?Ue(e,n,t):t()}function Ap(n,t,e,r,p,f,g,y){var a=[],d=0,o=0,i=!1,u=function(){i&&!a.length&&!d&&t.complete()},c=function(l){return d<r?s(l):a.push(l)},s=function(l){d++;var h=!1;Ve(e(l,o++)).subscribe($e(t,function(m){t.next(m)},function(){h=!0},void 0,function(){if(h)try{d--;for(var m=function(){var w=a.shift();g?Ue(t,g,function(){return s(w)}):s(w)};a.length&&d<r;)m();u()}catch(w){t.error(w)}}))};return n.subscribe($e(t,c,function(){i=!0,u()})),function(){}}function xn(n,t,e){return e===void 0&&(e=1/0),pe(t)?xn(function(r,p){return ft(function(f,g){return t(r,f,p,g)})(Ve(n(r,p)))},e):(typeof t=="number"&&(e=t),Ae(function(r,p){return Ap(r,p,n,e)}))}function Va(n){return n===void 0&&(n=1/0),xn(it,n)}function Ao(n,t,e){return n===void 0&&(n=0),e===void 0&&(e=Zf),new ke(function(r){var p=za(n)?+n-e.now():n;p<0&&(p=0);var f=0;return e.schedule(function(){r.closed||(r.next(f++),r.complete())},p)})}function Cp(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=_i(n),r=qf(n,1/0),p=n;return p.length?p.length===1?Ve(p[0]):Va(r)(nn(p,e)):tn}function De(n,t){return Ae(function(e,r){var p=0;e.subscribe($e(r,function(f){return n.call(t,f,p++)&&r.next(f)}))})}function Ga(n){return Ae(function(t,e){var r=null,p=!1,f;r=t.subscribe($e(e,void 0,void 0,function(g){f=Ve(n(g,Ga(n)(t))),r?(r.unsubscribe(),r=null,f.subscribe(e)):p=!0})),p&&(r.unsubscribe(),r=null,f.subscribe(e))})}function Mp(n){return Ae(function(t,e){var r=!1;t.subscribe($e(e,function(p){r=!0,e.next(p)},function(){r||e.next(n),e.complete()}))})}function Lp(n){return n<=0?function(){return tn}:Ae(function(t,e){var r=0;t.subscribe($e(e,function(p){++r<=n&&(e.next(p),n<=r&&e.complete())}))})}function Tp(n,t){return t===void 0&&(t=it),n=n??kp,Ae(function(e,r){var p,f=!0;e.subscribe($e(r,function(g){var y=t(g);(f||!n(p,y))&&(f=!1,p=y,r.next(g))}))})}function kp(n,t){return n===t}function Rp(n){return n===void 0&&(n=_p),Ae(function(t,e){var r=!1;t.subscribe($e(e,function(p){r=!0,e.next(p)},function(){return r?e.complete():e.error(n())}))})}function _p(){return new Ii}function hr(n){return Ae(function(t,e){try{t.subscribe(e)}finally{e.add(n)}})}function Pr(n,t){var e=arguments.length>=2;return function(r){return r.pipe(n?De(function(p,f){return n(p,f,r)}):it,Lp(1),e?Mp(t):Rp(function(){return new Ii}))}}function Ip(n,t){return Ae(function(e,r){var p=null,f=0,g=!1,y=function(){return g&&!p&&r.complete()};e.subscribe($e(r,function(a){p==null||p.unsubscribe();var d=0,o=f++;Ve(n(a,o)).subscribe(p=$e(r,function(i){return r.next(t?t(a,i,o,d++):i)},function(){p=null,y()}))},function(){g=!0,y()}))})}function Op(){return Ip(it)}function Gt(n){return Ae(function(t,e){Ve(n).subscribe($e(e,function(){return e.complete()},Hr)),!e.closed&&t.subscribe(e)})}function Dp(n,t){return Ae(function(e,r){var p=0;e.subscribe($e(r,function(f){var g=n(f,p++);(g||t)&&r.next(f),!g&&r.complete()}))})}function hn(n,t,e){var r=pe(n)||t||e?{next:n,error:t,complete:e}:n;return r?Ae(function(p,f){var g;(g=r.subscribe)===null||g===void 0||g.call(r);var y=!0;p.subscribe($e(f,function(a){var d;(d=r.next)===null||d===void 0||d.call(r,a),f.next(a)},function(){var a;y=!1,(a=r.complete)===null||a===void 0||a.call(r),f.complete()},function(a){var d;y=!1,(d=r.error)===null||d===void 0||d.call(r,a),f.error(a)},function(){var a,d;y&&((a=r.unsubscribe)===null||a===void 0||a.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):it}function Np(n){return xn((t,e)=>nn(n(t,e)).pipe(xn(r=>r?Wa(t):tn)))}function Co(n){return Ff(ja(n),Ga(t=>{if(t instanceof Ua)return tn;throw t}))}function dr(n,t){const{not:e}=Jt(t,{not:!1});return De(r=>Bp(r.subId===n,e))}function Bp(n,t){return!n&&t||n&&!t}class Fp{constructor(t){Z(this,"relay"),Z(this,"config"),Z(this,"authenticator"),Z(this,"ongoings",new Set),Z(this,"authResult$",new ce),Z(this,"disposed",!1),this.relay=t.relay,this.config=t.config,this.authenticator=t.authenticator;const e=this.relay.getOKObservable().subscribe(p=>{const{eventId:f,ok:g}=p;this.ongoings.has(f)&&(this.ongoings.delete(f),this.authResult$.next(g),g||(e.unsubscribe(),r.unsubscribe()))}),r=this.relay.getAUTHObservable().subscribe(({challenge:p})=>{this.challenge(p)})}getAuthResultObservable(){return this.authResult$.asObservable()}async challenge(t){try{const e=await this.signer.signEvent({kind:22242,content:"",tags:[["relay",this.relay.url],["challenge",t]]});this.ongoings.add(e.id),this.relay.send(["AUTH",e])}catch{}}get signer(){return this.authenticator.signer??this.config.signer}dispose(){this[Symbol.dispose]()}[Symbol.dispose](){if(this.disposed)return;this.disposed=!0;const t=[this.authResult$];for(const e of t)e.complete()}}let Ka=class extends jf{constructor(t){super(t??0)}increment(){this.next(this.getValue()+1)}decrement(){this.next(this.getValue()-1)}next(t){typeof t=="number"?super.next(t):super.next(t(this.getValue()))}};class Hp extends ce{waitNext(){return Pa(this.pipe(Pr(null,void 0)))}}class Wp{constructor(t){Z(this,"relay"),Z(this,"authProxy"),Z(this,"pubs",new Map),Z(this,"authRequiredPubs",new Set),Z(this,"count$",new Ka(0)),Z(this,"ok$",new ce),Z(this,"disposed",!1);var e;this.relay=t.relay,this.authProxy=t.authProxy,this.relay.getReconnectedObservable().subscribe(r=>{for(const[p,f]of r)p==="EVENT"&&this.pubs.has(f.id)&&this.sendEVENT(f)}),this.relay.getOKObservable().subscribe(async r=>{const{eventId:p,notice:f}=r;this.pubs.get(p)&&(this.authProxy&&f!=null&&f.startsWith("auth-required:")?(this.authRequiredPubs.add(p),this.ok$.next({...r,done:!1})):(this.ok$.next({...r,done:!0}),this.confirmOK(p)))}),(e=this.authProxy)==null||e.getAuthResultObservable().subscribe(r=>{if(r)for(const p of this.authRequiredPubs){const f=this.pubs.get(p);f&&this.sendEVENT(f)}else for(const p of this.authRequiredPubs)this.confirmOK(p);this.authRequiredPubs.clear()})}async publish(t){if(!this.disposed)return this.pubs.has(t.id)||(this.pubs.set(t.id,t),this.count$.increment()),this.sendEVENT(t)}confirmOK(t){this.disposed||this.pubs.has(t)||(this.pubs.delete(t),this.count$.decrement())}getOkAgainstEventObservable(){return this.ok$.asObservable()}getLogicalConnectionSizeObservable(){return this.count$.asObservable()}dispose(){this[Symbol.dispose]()}[Symbol.dispose](){if(this.disposed)return;this.disposed=!0;const t=[this.count$,this.ok$];for(const e of t)e.complete()}sendEVENT(t){return this.relay.send(["EVENT",t])}}const Mo={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3};class Pp{constructor(t,e){Z(this,"socket",null),Z(this,"buffer",[]),Z(this,"unsent",[]),Z(this,"reconnected$",new ce),Z(this,"outgoing$",new ce),Z(this,"message$",new ce),Z(this,"error$",new ce),Z(this,"retryTimer",null),Z(this,"sendAttempted$",new Hp),Z(this,"disposed",!1),Z(this,"state$",new ce),Z(this,"_state","initialized"),this.url=t,this.config=e,e.skipFetchNip11||bn.getOrFetch(t),this.setState("initialized")}get state(){return this._state}setState(t){this._state=t,this.state$.next(t)}connectManually(){this.connect()}connect(t){if(this.state==="terminated")return;const e=typeof t=="number";(this.state==="initialized"||this.state==="dormant"||this.state==="error"||this.state==="rejected"||e)&&(this.socket=this.createSocket(t??0))}createSocket(t){const e=t>0,r=this.state==="error"||this.state==="rejected";e?this.setState("retrying"):this.setState("connecting");const p=async()=>{if(this.state==="terminated"){a==null||a.close(Mt.RX_NOSTR_DISPOSED);return}this.setState("connected"),(e||r)&&(this.reconnected$.next(this.unsent),this.unsent=[]);try{for(const d of this.buffer)this.send(d)}catch(d){this.error$.next(d)}finally{this.buffer=[]}},f=({data:d})=>{if(this.state!=="terminated")try{this.message$.next(this.pack(JSON.parse(d)))}catch(o){this.error$.next(o)}},g=({code:d})=>{var o;if(a==null||a.removeEventListener("open",p),a==null||a.removeEventListener("message",f),a==null||a.removeEventListener("close",g),this.socket===a&&(this.socket=null),this.state==="terminated"||d===Mt.RX_NOSTR_DISPOSED){this.unsent=[],this.buffer=[];return}if(d===Mt.RX_NOSTR_IDLE)this.setState("dormant"),this.buffer.length>0&&this.connect();else if(d===Mt.DONT_RETRY)this.unsent=[],this.buffer=[],this.error$.next(new go(d)),this.setState("rejected");else{this.unsent.push(...this.buffer),this.buffer=[],this.error$.next(new go(d));const i=t+1;this.config.retry.strategy!=="off"&&i<=this.config.retry.maxCount?(this.setState("waiting-for-retrying"),(o=this.retryTimer)==null||o.unsubscribe(),this.retryTimer=zp(this.config.retry,i).subscribe(()=>{this.disposed||this.connect(i)})):this.setState("error")}},y=this.config.websocketCtor??globalThis.WebSocket;if(!y)throw new fn("WebSocket constructor is missing");const a=(()=>{try{return new y(this.url)}catch(d){return g({type:"close",code:0,reason:`${d}`}),null}})();return a==null||a.addEventListener("open",p),a==null||a.addEventListener("message",f),a==null||a.addEventListener("close",g),a}pack(t){const e=t[0],r=this.url;switch(e){case"EVENT":return{from:r,type:e,message:t,subId:t[1],event:t[2]};case"EOSE":return{from:r,type:e,message:t,subId:t[1]};case"OK":return{from:r,type:e,message:t,eventId:t[1],ok:t[2],notice:t[3]};case"CLOSED":return{from:r,type:e,message:t,subId:t[1],notice:t[2]};case"NOTICE":return{from:r,type:e,message:t,notice:t[1]};case"AUTH":return{from:r,type:e,message:t,challenge:t[1]};case"COUNT":return{from:r,type:e,message:t,subId:t[1],count:t[2]};default:return{from:r,type:"unknown",message:t}}}disconnect(t){var e;((e=this.socket)==null?void 0:e.readyState)===Mo.OPEN&&this.socket.close(t)}send(t){const e=this.sendAttempted$.waitNext();switch(this.state){case"terminated":case"rejected":return this.sendAttempted$.next(),e;case"initialized":case"connecting":case"dormant":return this.buffer.push(t),this.connect(),e;case"connected":{if(!this.socket)throw new ba;return this.socket.readyState===Mo.OPEN?(this.outgoing$.next({to:this.url,message:t}),this.socket.send(JSON.stringify(t)),this.sendAttempted$.next(),e):(this.buffer.push(t),e)}case"waiting-for-retrying":case"retrying":case"error":return this.sendAttempted$.next(),this.unsent.push(t),e}}getEVENTObservable(){return this.message$.pipe(De(t=>t.type==="EVENT"))}getEOSEObservable(){return this.message$.pipe(De(t=>t.type==="EOSE"))}getCLOSEDObservable(){return this.message$.pipe(De(t=>t.type==="CLOSED"))}getOKObservable(){return this.message$.pipe(De(t=>t.type==="OK"))}getAUTHObservable(){return this.message$.pipe(De(t=>t.type==="AUTH"))}getAllMessageObservable(){return this.message$.asObservable()}getOutgoingMessageObservable(){return this.outgoing$.asObservable()}getReconnectedObservable(){return this.reconnected$.asObservable()}getConnectionStateObservable(){return this.state$.pipe(Tp(),ft(t=>({from:this.url,state:t})))}getErrorObservable(){return this.error$.asObservable()}dispose(){this[Symbol.dispose]()}[Symbol.dispose](){var t,e;if(this.disposed)return;this.disposed=!0,this.setState("terminated"),(t=this.retryTimer)==null||t.unsubscribe(),(e=this.socket)==null||e.close(Mt.RX_NOSTR_DISPOSED),this.socket=null;const r=[this.state$,this.outgoing$,this.message$,this.error$,this.reconnected$,this.sendAttempted$];for(const p of r)p.complete()}}function zp(n,t){switch(n.strategy){case"exponential":{const e=Math.max(n.initialDelay*2**(t-1)+(Math.random()-.5)*1e3,1e3);return Ao(e)}case"immediately":return Wa(0);case"linear":return Ao(n.interval);case"off":return tn}}const Mt={ABNORMAL_CLOSURE:1006,DONT_RETRY:4e3,RX_NOSTR_IDLE:4537,RX_NOSTR_DISPOSED:4538};class Up{constructor(t){Z(this,"relay"),Z(this,"authProxy"),Z(this,"config"),Z(this,"subs",new Map),Z(this,"authRequiredSubs",new Set),Z(this,"fin$",new ce),Z(this,"disposed",!1),Z(this,"queue");var e;this.relay=t.relay,this.authProxy=t.authProxy,this.config=t.config,this.queue=new jp(this.relay.url,this.config),this.queue.getActivationObservable().subscribe(r=>{for(const{req:p}of r)this.sendREQ(p)}),this.relay.getReconnectedObservable().subscribe(()=>{for(const{req:r}of this.queue.ongoings)this.sendREQ(r)}),this.relay.getEOSEObservable().subscribe(({subId:r})=>{var p;(p=this.subs.get(r))!=null&&p.autoclose&&this.unsubscribe(r)}),this.relay.getCLOSEDObservable().subscribe(async({subId:r,notice:p})=>{this.subs.get(r)&&(this.authProxy&&p!=null&&p.startsWith("auth-required:")?this.authRequiredSubs.add(r):this.fin(r))}),(e=this.authProxy)==null||e.getAuthResultObservable().subscribe(r=>{var p;if(r)for(const f of this.authRequiredSubs){const g=(p=this.subs.get(f))==null?void 0:p.req;g&&this.sendREQ(g)}else for(const f of this.authRequiredSubs)this.fin(f);this.authRequiredSubs.clear()})}subscribe(t,e){if(this.disposed)return;const r=t[1],p={subId:r,req:t,autoclose:e};this.subs.set(r,p),this.queue.enqueue(p)}unsubscribe(t){this.disposed||(this.subs.has(t)&&this.sendCLOSE(t),this.fin(t))}isOngoingOrQueued(t){return this.subs.has(t)}getEventObservable(){return this.relay.getEVENTObservable().pipe(De(({subId:t,event:e})=>{var r;const p=(r=this.subs.get(t))==null?void 0:r.filters;return p?this.config.skipValidateFilterMatching||Lf(e,p):!1}))}getFinObservable(){return this.fin$.asObservable()}getLogicalConnectionSizeObservable(){return this.queue.getSizeObservable()}dispose(){this[Symbol.dispose]()}[Symbol.dispose](){if(this.disposed)return;this.disposed=!0;const t=[this.fin$];for(const e of t)e.complete();this.queue.dispose()}sendREQ([,t,...e]){const r=Cf(e),p=this.subs.get(t);p&&(p.filters=r,this.relay.send(["REQ",t,...r]))}sendCLOSE(t){this.relay.send(["CLOSE",t])}fin(t){this.subs.delete(t),this.queue.drop(t),this.fin$.next({from:this.relay.url,subId:t})}}class jp{constructor(t,e){Z(this,"_queuings",[]),Z(this,"_ongoings",[]),Z(this,"activated$",new ce),Z(this,"count$",new Ka),this.url=t,this.config=e}get queuings(){return this._queuings}set queuings(t){this._queuings=t}get ongoings(){return this._ongoings}set ongoings(t){this._ongoings=t}enqueue(t){this.queuings=[...this.queuings,t],this.count$.increment(),this.shift()}drop(t){const e=(y,a)=>{const d=y.length,o=y.filter(u=>u.subId!==a),i=d-o.length;return[o,i]},[r,p]=e(this.queuings,t),[f,g]=e(this.ongoings,t);this.queuings=r,this.ongoings=f,this.count$.next(y=>y-(p+g)),this.shift()}getActivationObservable(){return this.activated$.asObservable()}getSizeObservable(){return this.count$.asObservable()}dispose(){const t=[this.activated$,this.count$];for(const e of t)e.complete()}async shift(){const t=await this.capacity(),e=[...this.ongoings,...this.queuings],r=e.slice(0,t),p=e.slice(t),f=this.queuings.slice(0,t-this.ongoings.length);this.ongoings=r,this.queuings=p,f.length>0&&this.activated$.next(f)}async capacity(){return await bn.getValue(this.url,t=>{var e;return(e=t.limitation)==null?void 0:e.max_subscriptions},{skipFetch:this.config.skipFetchNip11})??1/0}}class Vp{constructor(t,e){Z(this,"relay"),Z(this,"pubProxy"),Z(this,"subProxy"),Z(this,"defaultSubscriptionIds",new Set),Z(this,"communicating",!1),Z(this,"strategy","lazy"),Z(this,"isDefaultRelay",!1),Z(this,"disposed",!1),Z(this,"_url"),this._url=Ye(t);const r=Gp(t,e),p=new Pp(this.url,e),f=r?new Fp({relay:p,config:e,authenticator:r}):null,g=new Wp({relay:p,authProxy:f}),y=new Up({relay:p,authProxy:f,config:e});this.relay=p,this.pubProxy=g,this.subProxy=y,xp([this.pubProxy.getLogicalConnectionSizeObservable(),this.subProxy.getLogicalConnectionSizeObservable()]).pipe(ft(([a,d])=>a+d)).subscribe(a=>{this.communicating=a>0,this.resetConnection()})}get url(){return this._url}setConnectionStrategy(t){this.disposed||(this.strategy=t,this.resetConnection())}resetConnection(){let t=this.strategy;switch(this.isDefaultRelay||(t="lazy"),t){case"lazy":{this.communicating||this.relay.disconnect(Mt.RX_NOSTR_IDLE);break}case"lazy-keep":break;case"aggressive":{(this.connectionState==="initialized"||this.connectionState==="dormant")&&this.relay.connectManually();break}}}markAsDefault(t){if(!this.disposed){if(this.isDefaultRelay=t,!this.isDefaultRelay){for(const e of this.defaultSubscriptionIds)this.subProxy.unsubscribe(e);this.defaultSubscriptionIds.clear()}this.resetConnection()}}async publish(t){if(!this.disposed)return this.pubProxy.publish(t)}confirmOK(t){this.disposed||this.pubProxy.confirmOK(t)}subscribe(t,e){if(this.disposed)return;const{mode:r,overwrite:p,autoclose:f}=Jt(e??{},{overwrite:!1,autoclose:!1,mode:"default"}),[,g]=t;r==="default"&&!this.isDefaultRelay||!p&&this.subProxy.isOngoingOrQueued(g)||(r==="default"&&this.defaultSubscriptionIds.add(g),this.subProxy.subscribe(t,f))}unsubscribe(t){this.disposed||(this.defaultSubscriptionIds.delete(t),this.subProxy.unsubscribe(t))}getEventObservable(){if(this.disposed)throw new Ke;return this.subProxy.getEventObservable()}getFinObservable(){if(this.disposed)throw new Ke;return this.subProxy.getFinObservable()}getOkAgainstEventObservable(){if(this.disposed)throw new Ke;return this.pubProxy.getOkAgainstEventObservable()}getAllMessageObservable(){if(this.disposed)throw new Ke;return this.relay.getAllMessageObservable()}getOutgoingMessageObservable(){if(this.disposed)throw new Ke;return this.relay.getOutgoingMessageObservable()}getConnectionStateObservable(){if(this.disposed)throw new Ke;return this.relay.getConnectionStateObservable()}get connectionState(){return this.relay.state}getErrorObservable(){if(this.disposed)throw new Ke;return this.relay.getErrorObservable().pipe(ft(t=>({from:this.url,reason:t})))}connectManually(){this.relay.connectManually()}dispose(){this[Symbol.dispose]()}[Symbol.dispose](){this.disposed||(this.disposed=!0,this.relay.dispose(),this.pubProxy.dispose(),this.subProxy.dispose())}}function Gp(n,t){const e=t.authenticator;if(!e)return;const r=e instanceof Function?e(n):e;return r==="auto"?{}:r}function Kp(n,t){return n.filter(e=>!t.includes(e))}function Yp(n){const{rxReq:t,index:e}=n,{rxReqId:r,strategy:p}=t;return`${r}:${p==="backward"?e:0}`}function Zp(n){const{rxReq:t,filters:e,index:r}=n;return["REQ",Yp({rxReq:t,index:r}),...e]}function Lo(n){if(Array.isArray(n)){const t=n.map(e=>{let r="",p=!1,f=!1;if(typeof e=="string")r=e,p=!0,f=!0;else if(Array.isArray(e)){const g=e[2];r=e[1],p=!g||g==="read",f=!g||g==="write"}else r=e.url,p=e.read,f=e.write;return{url:r,read:p,write:f}});return Object.fromEntries(t.map(e=>[e.url,e]))}else{const t=Object.entries(n).map(([e,r])=>({url:e,...r}));return Object.fromEntries(t.map(e=>[e.url,e]))}}function To(n,t){const e=new Set;if(t!=null&&t.on){const r=t.on;if(!r.defaultReadRelays&&!r.defaultWriteRelays&&!r.relays)return;const p=n.getDefaultRelays();if(r.defaultReadRelays)for(const{url:f}of Object.values(p).filter(g=>g.read))e.add(f);if(r.defaultWriteRelays)for(const{url:f}of Object.values(p).filter(g=>g.write))e.add(f);if(r.relays)for(const f of r.relays)e.add(Ye(f));return[...e]}else if(t!=null&&t.relays){for(const r of t.relays)e.add(Ye(r));return[...e]}else return}function Qp(n){return new Xp(Af(n))}class Xp{constructor(t){Z(this,"connections",new Tt),Z(this,"defaultRelays",new Tt),Z(this,"defaultSubscriptions",new Map),Z(this,"event$",new ce),Z(this,"fin$",new ce),Z(this,"ok$",new ce),Z(this,"all$",new ce),Z(this,"error$",new ce),Z(this,"connectionState$",new ce),Z(this,"outgoing$",new ce),Z(this,"dispose$",new ce),Z(this,"disposed",!1),this.config=t}get defaultReadables(){const t=[];for(const{url:e,read:r}of this.defaultRelays.values()){const p=this.connections.get(e);r&&p&&t.push(p)}return t}get defaultWritables(){const t=[];for(const{url:e,write:r}of this.defaultRelays.values()){const p=this.connections.get(e);r&&p&&t.push(p)}return t}getDefaultRelays(){if(this.disposed)throw new Ke;return this.defaultRelays.toObject()}getDefaultRelay(t){return this.defaultRelays.get(t)}setDefaultRelays(t){if(this.disposed)throw new Ke;const e=new Tt(Lo(t)),r=[];for(const{read:p,url:f}of e.values()){const g=this.ensureNostrConnection(f);g.setConnectionStrategy(this.config.connectionStrategy),p&&r.push(g)}this.updateDefaultSubscriptions(r),this.defaultRelays=e}ensureNostrConnection(t){let e=this.connections.get(t);return e||(e=new Vp(t,this.config),this.attachNostrConnection(e),this.connections.set(t,e),e)}attachNostrConnection(t){t.getEventObservable().subscribe(this.event$),t.getFinObservable().subscribe(this.fin$),t.getOkAgainstEventObservable().subscribe(this.ok$),t.getAllMessageObservable().subscribe(this.all$),t.getConnectionStateObservable().subscribe(this.connectionState$),t.getErrorObservable().subscribe(this.error$),t.getOutgoingMessageObservable().subscribe(this.outgoing$)}updateDefaultSubscriptions(t){const e=Kp(this.defaultReadables,t);for(const r of e)r.markAsDefault(!1);for(const r of t){r.markAsDefault(!0);for(const{req:p,autoclose:f}of this.defaultSubscriptions.values())r==null||r.subscribe(p,{mode:"default",overwrite:!1,autoclose:f})}}addDefaultRelays(t){const e=Lo(t);this.setDefaultRelays({...this.defaultRelays.toObject(),...e})}removeDefaultRelays(t){const e=this.defaultRelays.copy(),r=Array.isArray(t)?t:[t];for(const p of r)e.delete(p);this.setDefaultRelays(e.toObject())}getAllRelayStatus(){return Object.fromEntries(Array.from(this.connections.values()).map(t=>[t.url,{connection:t.connectionState}]))}getRelayStatus(t){const e=this.connections.get(t);if(e)return{connection:e.connectionState}}reconnect(t){const e=this.getDefaultRelay(t);if(!e)throw new fn(`The relay (${t}) is not a default relay. \`reconnect()\` can be used only for a readable default relay.`);if(!e.read)throw new fn(`The relay (${t}) is not readable. \`reconnect()\` can be used only for a readable default relay.`);const r=this.connections.get(t);if(!r)throw new ba;(r.connectionState==="error"||r.connectionState==="rejected")&&r.connectManually()}use(t,e){const r=To(this,e),p=({filters:o,relays:i},u)=>{var c;const s=t.strategy==="backward"?i:void 0,l=Zp({rxReq:t,filters:o,index:u});return{subId:l[1],req:l,targetConnections:((c=s??r)==null?void 0:c.map(h=>this.ensureNostrConnection(h)))??this.defaultReadables,mode:s===void 0&&r===void 0?"default":"temporary"}},f=({req:o,targetConnections:i,mode:u})=>{this.startSubscription({req:o,targetConnections:i,mode:u,overwrite:t.strategy==="forward",autoclose:t.strategy==="backward"})},g=({subId:o,targetConnections:i,mode:u})=>{this.teardownSubscription({subId:o,targetConnections:i,mode:u})},y=({req:o,targetConnections:i})=>t.strategy==="forward"?this.createForwardEventObservable({req:o}).pipe(Gt(this.dispose$)):this.createBackwardEventObservable({req:o,targetConnections:i}).pipe(Gt(this.dispose$)),a=t.getReqPacketObservable().pipe(De(({filters:o})=>o.length>0),ft(p),Gt(this.dispose$)),d=()=>Np(async({event:o})=>(this.config.skipVerify||await this.config.verifier(o))&&(this.config.skipExpirationCheck||!Tf(o)));if(t.strategy==="forward"){let o;return a.pipe(hn(i=>{o=i}),hn(f),ft(y),hr(()=>{o&&g(o)}),Op(),d())}else return a.pipe(hn(f),ft(o=>y(o).pipe(hr(()=>{g(o)}))),Va(),d())}createForwardEventObservable(t){const{req:e}=t,r=e[1];return this.event$.pipe(dr(r))}createBackwardEventObservable(t){const{req:e,targetConnections:r}=t,p=e[1],f=new Set,g=o=>o==="error"||o==="rejected"||o==="terminated",y=()=>r.every(({connectionState:o,url:i})=>g(o)||f.has(i)),a=this.fin$.pipe(dr(p),hn(({from:o})=>{f.add(o)})),d=Cp(a,this.connectionState$.asObservable()).pipe(De(()=>y()),Pr(null,void 0));return this.event$.pipe(Gt(d),Co(this.config.eoseTimeout),dr(p),De(o=>!f.has(o.from)))}startSubscription(t){const{req:e,targetConnections:r,mode:p,overwrite:f,autoclose:g}=t,y=e[1];p==="default"&&this.defaultSubscriptions.set(y,{req:e,autoclose:g});for(const a of r)a.subscribe(e,{mode:p,overwrite:f,autoclose:g})}teardownSubscription(t){const{subId:e,targetConnections:r,mode:p}=t;p==="default"&&this.defaultSubscriptions.delete(e);for(const f of r)f.unsubscribe(e)}createAllEventObservable(){return this.event$.asObservable()}createAllErrorObservable(){return this.error$.asObservable()}createAllMessageObservable(){return this.all$.asObservable()}createConnectionStateObservable(){return this.connectionState$.asObservable()}createOutgoingMessageObservable(){return this.outgoing$.asObservable()}send(t,e){const{signer:r,errorOnTimeout:p,completeOn:f}=Jt(e??{},{signer:this.config.signer,errorOnTimeout:!1,completeOn:"all-ok"}),g=To(this,e),y=g===void 0?this.defaultWritables:g.map(c=>this.ensureNostrConnection(c)),a=new ce,d=new Set;let o="";const i=()=>{a.closed||a.complete();for(const c of y)c.confirmOK(o)};r.signEvent(t).then(async c=>{a.closed||(o=c.id,this.ok$.pipe(De(({eventId:s})=>s===c.id)).subscribe(a),await Promise.all(y.map(s=>s.publish(c))),f==="sent"&&a.complete())}).catch(c=>{throw i(),new fn(c instanceof Error?c.message:"Failed to sign the given event")});const u=(()=>{switch(f){case"sent":return it;case"all-ok":return Dp(({from:c,done:s})=>(s&&d.add(c),d.size<y.length),!0);case"any-ok":return Pr(c=>c.ok)}})();return a.pipe(u,Gt(this.dispose$),p?ja(this.config.okTimeout):Co(this.config.okTimeout),hr(i))}async cast(t,e){await Pa(this.send(t,{...e,completeOn:"sent"}))}dispose(){this[Symbol.dispose]()}[Symbol.dispose](){if(this.disposed)return;this.disposed=!0;for(const e of this.connections.values())e.dispose();this.connections.clear();const t=[this.event$,this.ok$,this.fin$,this.all$,this.connectionState$,this.error$,this.outgoing$];for(const e of t)e.complete();this.dispose$.next(),this.dispose$.complete()}}const Ya=n=>{const{strategy:t}=n,e=n.operators??[],r=n.rxReqId??Jp(),p=n.subject??new ce;return{strategy:t,rxReqId:r,getReqPacketObservable(){return p.pipe(...e)},pipe(...f){return Ya({strategy:t,rxReqId:r,operators:[...e,...f],subject:p})},emit(f,g){p.next({filters:tg(f),...g??{}})},over(){p.complete()}}};function qp(n){return Ya({strategy:"backward",rxReqId:n})}function Jp(){return`${Math.floor(Math.random()*1e6)}`}function eg(n){var t,e;const r={},p=f=>/^#[a-zA-Z]$/.test(f);for(const f of Object.keys(n)){if(f==="limit"&&(n[f]??-1)>=0){r[f]=n[f];continue}if(f==="since"||f==="until"){const g=n[f];if(typeof g!="number"||(g??-1)>=0){r[f]=g;continue}}if((p(f)||f==="ids"||f==="authors")&&n[f]!==void 0&&(((t=n[f])==null?void 0:t.length)??-1)>0){r[f]=n[f];continue}if(f==="kinds"&&n[f]!==void 0&&(((e=n[f])==null?void 0:e.length)??-1)>0){r[f]=n[f];continue}if(f==="search"&&n[f]!==void 0){r[f]=n[f];continue}}return typeof r.since!="number"||typeof r.until!="number"||r.since<=r.until?r:null}function tg(n){return(Array.isArray(n)?n:[n]).map(t=>eg(t)).filter(t=>t!==null)}function ko(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`positive integer expected, not ${n}`)}function ng(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function rn(n,...t){if(!ng(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${n.length}`)}function rg(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ko(n.outputLen),ko(n.blockLen)}function En(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function ig(n,t){rn(n);const e=t.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const fr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pr=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),He=(n,t)=>n<<32-t|n>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];const og=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function zr(n){rn(n);let t="";for(let e=0;e<n.length;e++)t+=og[n[e]];return t}function sg(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Oi(n){return typeof n=="string"&&(n=sg(n)),rn(n),n}function ag(...n){let t=0;for(let r=0;r<n.length;r++){const p=n[r];rn(p),t+=p.length}const e=new Uint8Array(t);for(let r=0,p=0;r<n.length;r++){const f=n[r];e.set(f,p),p+=f.length}return e}class Za{clone(){return this._cloneInto()}}function lg(n){const t=r=>n().update(Oi(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function Qa(n=32){if(fr&&typeof fr.getRandomValues=="function")return fr.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function cg(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const p=BigInt(32),f=BigInt(4294967295),g=Number(e>>p&f),y=Number(e&f),a=r?4:0,d=r?0:4;n.setUint32(t+a,g,r),n.setUint32(t+d,y,r)}const ug=(n,t,e)=>n&t^~n&e,hg=(n,t,e)=>n&t^n&e^t&e;class dg extends Za{constructor(t,e,r,p){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=p,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=pr(this.buffer)}update(t){En(this);const{view:e,buffer:r,blockLen:p}=this;t=Oi(t);const f=t.length;for(let g=0;g<f;){const y=Math.min(p-this.pos,f-g);if(y===p){const a=pr(t);for(;p<=f-g;g+=p)this.process(a,g);continue}r.set(t.subarray(g,g+y),this.pos),this.pos+=y,g+=y,this.pos===p&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){En(this),ig(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:p,isLE:f}=this;let{pos:g}=this;e[g++]=128,this.buffer.subarray(g).fill(0),this.padOffset>p-g&&(this.process(r,0),g=0);for(let i=g;i<p;i++)e[i]=0;cg(r,p-8,BigInt(this.length*8),f),this.process(r,0);const y=pr(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=a/4,o=this.get();if(d>o.length)throw new Error("_sha2: outputLen bigger than state");for(let i=0;i<d;i++)y.setUint32(4*i,o[i],f)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:p,finished:f,destroyed:g,pos:y}=this;return t.length=p,t.pos=y,t.finished=f,t.destroyed=g,p%e&&t.buffer.set(r),t}}const fg=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ct=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ut=new Uint32Array(64);class pg extends dg{constructor(){super(64,32,8,!1),this.A=ct[0]|0,this.B=ct[1]|0,this.C=ct[2]|0,this.D=ct[3]|0,this.E=ct[4]|0,this.F=ct[5]|0,this.G=ct[6]|0,this.H=ct[7]|0}get(){const{A:t,B:e,C:r,D:p,E:f,F:g,G:y,H:a}=this;return[t,e,r,p,f,g,y,a]}set(t,e,r,p,f,g,y,a){this.A=t|0,this.B=e|0,this.C=r|0,this.D=p|0,this.E=f|0,this.F=g|0,this.G=y|0,this.H=a|0}process(t,e){for(let i=0;i<16;i++,e+=4)ut[i]=t.getUint32(e,!1);for(let i=16;i<64;i++){const u=ut[i-15],c=ut[i-2],s=He(u,7)^He(u,18)^u>>>3,l=He(c,17)^He(c,19)^c>>>10;ut[i]=l+ut[i-7]+s+ut[i-16]|0}let{A:r,B:p,C:f,D:g,E:y,F:a,G:d,H:o}=this;for(let i=0;i<64;i++){const u=He(y,6)^He(y,11)^He(y,25),c=o+u+ug(y,a,d)+fg[i]+ut[i]|0,s=(He(r,2)^He(r,13)^He(r,22))+hg(r,p,f)|0;o=d,d=a,a=y,y=g+c|0,g=f,f=p,p=r,r=c+s|0}r=r+this.A|0,p=p+this.B|0,f=f+this.C|0,g=g+this.D|0,y=y+this.E|0,a=a+this.F|0,d=d+this.G|0,o=o+this.H|0,this.set(r,p,f,g,y,a,d,o)}roundClean(){ut.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const An=lg(()=>new pg);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xa=BigInt(0),Un=BigInt(1),gg=BigInt(2);function Et(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function on(n){if(!Et(n))throw new Error("Uint8Array expected")}const mg=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Ft(n){on(n);let t="";for(let e=0;e<n.length;e++)t+=mg[n[e]];return t}function qa(n){const t=n.toString(16);return t.length&1?`0${t}`:t}function Di(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}const Ge={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ro(n){if(n>=Ge._0&&n<=Ge._9)return n-Ge._0;if(n>=Ge._A&&n<=Ge._F)return n-(Ge._A-10);if(n>=Ge._a&&n<=Ge._f)return n-(Ge._a-10)}function Ht(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const t=n.length,e=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let p=0,f=0;p<e;p++,f+=2){const g=Ro(n.charCodeAt(f)),y=Ro(n.charCodeAt(f+1));if(g===void 0||y===void 0){const a=n[f]+n[f+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+f)}r[p]=g*16+y}return r}function Te(n){return Di(Ft(n))}function Ni(n){return on(n),Di(Ft(Uint8Array.from(n).reverse()))}function gt(n,t){return Ht(n.toString(16).padStart(t*2,"0"))}function Bi(n,t){return gt(n,t).reverse()}function vg(n){return Ht(qa(n))}function xe(n,t,e){let r;if(typeof t=="string")try{r=Ht(t)}catch(f){throw new Error(`${n} must be valid hex string, got "${t}". Cause: ${f}`)}else if(Et(t))r=Uint8Array.from(t);else throw new Error(`${n} must be hex string or Uint8Array`);const p=r.length;if(typeof e=="number"&&p!==e)throw new Error(`${n} expected ${e} bytes, got ${p}`);return r}function At(...n){let t=0;for(let r=0;r<n.length;r++){const p=n[r];on(p),t+=p.length}const e=new Uint8Array(t);for(let r=0,p=0;r<n.length;r++){const f=n[r];e.set(f,p),p+=f.length}return e}function yg(n,t){if(n.length!==t.length)return!1;let e=0;for(let r=0;r<n.length;r++)e|=n[r]^t[r];return e===0}function wg(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function bg(n){let t;for(t=0;n>Xa;n>>=Un,t+=1);return t}function $g(n,t){return n>>BigInt(t)&Un}function Sg(n,t,e){return n|(e?Un:Xa)<<BigInt(t)}const Fi=n=>(gg<<BigInt(n-1))-Un,gr=n=>new Uint8Array(n),_o=n=>Uint8Array.from(n);function Ja(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=gr(n),p=gr(n),f=0;const g=()=>{r.fill(1),p.fill(0),f=0},y=(...o)=>e(p,r,...o),a=(o=gr())=>{p=y(_o([0]),o),r=y(),o.length!==0&&(p=y(_o([1]),o),r=y())},d=()=>{if(f++>=1e3)throw new Error("drbg: tried 1000 values");let o=0;const i=[];for(;o<t;){r=y();const u=r.slice();i.push(u),o+=r.length}return At(...i)};return(o,i)=>{g(),a(o);let u;for(;!(u=i(d()));)a();return g(),u}}const xg={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||Et(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function sn(n,t,e={}){const r=(p,f,g)=>{const y=xg[f];if(typeof y!="function")throw new Error(`Invalid validator "${f}", expected function`);const a=n[p];if(!(g&&a===void 0)&&!y(a,n))throw new Error(`Invalid param ${String(p)}=${a} (${typeof a}), expected ${f}`)};for(const[p,f]of Object.entries(t))r(p,f,!1);for(const[p,f]of Object.entries(e))r(p,f,!0);return n}const Eg=Object.freeze(Object.defineProperty({__proto__:null,abytes:on,bitGet:$g,bitLen:bg,bitMask:Fi,bitSet:Sg,bytesToHex:Ft,bytesToNumberBE:Te,bytesToNumberLE:Ni,concatBytes:At,createHmacDrbg:Ja,ensureBytes:xe,equalBytes:yg,hexToBytes:Ht,hexToNumber:Di,isBytes:Et,numberToBytesBE:gt,numberToBytesLE:Bi,numberToHexUnpadded:qa,numberToVarBytesBE:vg,utf8ToBytes:wg,validateObject:sn},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ye=BigInt(0),fe=BigInt(1),bt=BigInt(2),Ag=BigInt(3),Ur=BigInt(4),Io=BigInt(5),Oo=BigInt(8);BigInt(9);BigInt(16);function be(n,t){const e=n%t;return e>=ye?e:t+e}function Cg(n,t,e){if(e<=ye||t<ye)throw new Error("Expected power/modulo > 0");if(e===fe)return ye;let r=fe;for(;t>ye;)t&fe&&(r=r*n%e),n=n*n%e,t>>=fe;return r}function _e(n,t,e){let r=n;for(;t-- >ye;)r*=r,r%=e;return r}function jr(n,t){if(n===ye||t<=ye)throw new Error(`invert: expected positive integers, got n=${n} mod=${t}`);let e=be(n,t),r=t,p=ye,f=fe;for(;e!==ye;){const g=r/e,y=r%e,a=p-f*g;r=e,e=y,p=f,f=a}if(r!==fe)throw new Error("invert: does not exist");return be(p,t)}function Mg(n){const t=(n-fe)/bt;let e,r,p;for(e=n-fe,r=0;e%bt===ye;e/=bt,r++);for(p=bt;p<n&&Cg(p,t,n)!==n-fe;p++);if(r===1){const g=(n+fe)/Ur;return function(y,a){const d=y.pow(a,g);if(!y.eql(y.sqr(d),a))throw new Error("Cannot find square root");return d}}const f=(e+fe)/bt;return function(g,y){if(g.pow(y,t)===g.neg(g.ONE))throw new Error("Cannot find square root");let a=r,d=g.pow(g.mul(g.ONE,p),e),o=g.pow(y,f),i=g.pow(y,e);for(;!g.eql(i,g.ONE);){if(g.eql(i,g.ZERO))return g.ZERO;let u=1;for(let s=g.sqr(i);u<a&&!g.eql(s,g.ONE);u++)s=g.sqr(s);const c=g.pow(d,fe<<BigInt(a-u-1));d=g.sqr(c),o=g.mul(o,c),i=g.mul(i,d),a=u}return o}}function Lg(n){if(n%Ur===Ag){const t=(n+fe)/Ur;return function(e,r){const p=e.pow(r,t);if(!e.eql(e.sqr(p),r))throw new Error("Cannot find square root");return p}}if(n%Oo===Io){const t=(n-Io)/Oo;return function(e,r){const p=e.mul(r,bt),f=e.pow(p,t),g=e.mul(r,f),y=e.mul(e.mul(g,bt),f),a=e.mul(g,e.sub(y,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return Mg(n)}const Tg=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function kg(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=Tg.reduce((r,p)=>(r[p]="function",r),t);return sn(n,e)}function Rg(n,t,e){if(e<ye)throw new Error("Expected power > 0");if(e===ye)return n.ONE;if(e===fe)return t;let r=n.ONE,p=t;for(;e>ye;)e&fe&&(r=n.mul(r,p)),p=n.sqr(p),e>>=fe;return r}function _g(n,t){const e=new Array(t.length),r=t.reduce((f,g,y)=>n.is0(g)?f:(e[y]=f,n.mul(f,g)),n.ONE),p=n.inv(r);return t.reduceRight((f,g,y)=>n.is0(g)?f:(e[y]=n.mul(f,e[y]),n.mul(f,g)),p),e}function el(n,t){const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function Ig(n,t,e=!1,r={}){if(n<=ye)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:p,nByteLength:f}=el(n,t);if(f>2048)throw new Error("Field lengths over 2048 bytes are not supported");const g=Lg(n),y=Object.freeze({ORDER:n,BITS:p,BYTES:f,MASK:Fi(p),ZERO:ye,ONE:fe,create:a=>be(a,n),isValid:a=>{if(typeof a!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof a}`);return ye<=a&&a<n},is0:a=>a===ye,isOdd:a=>(a&fe)===fe,neg:a=>be(-a,n),eql:(a,d)=>a===d,sqr:a=>be(a*a,n),add:(a,d)=>be(a+d,n),sub:(a,d)=>be(a-d,n),mul:(a,d)=>be(a*d,n),pow:(a,d)=>Rg(y,a,d),div:(a,d)=>be(a*jr(d,n),n),sqrN:a=>a*a,addN:(a,d)=>a+d,subN:(a,d)=>a-d,mulN:(a,d)=>a*d,inv:a=>jr(a,n),sqrt:r.sqrt||(a=>g(y,a)),invertBatch:a=>_g(y,a),cmov:(a,d,o)=>o?d:a,toBytes:a=>e?Bi(a,f):gt(a,f),fromBytes:a=>{if(a.length!==f)throw new Error(`Fp.fromBytes: expected ${f}, got ${a.length}`);return e?Ni(a):Te(a)}});return Object.freeze(y)}function tl(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function nl(n){const t=tl(n);return t+Math.ceil(t/2)}function Og(n,t,e=!1){const r=n.length,p=tl(t),f=nl(t);if(r<16||r<f||r>1024)throw new Error(`expected ${f}-1024 bytes of input, got ${r}`);const g=e?Te(n):Ni(n),y=be(g,t-fe)+fe;return e?Bi(y,p):gt(y,p)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dg=BigInt(0),mr=BigInt(1);function Ng(n,t){const e=(p,f)=>{const g=f.negate();return p?g:f},r=p=>{const f=Math.ceil(t/p)+1,g=2**(p-1);return{windows:f,windowSize:g}};return{constTimeNegate:e,unsafeLadder(p,f){let g=n.ZERO,y=p;for(;f>Dg;)f&mr&&(g=g.add(y)),y=y.double(),f>>=mr;return g},precomputeWindow(p,f){const{windows:g,windowSize:y}=r(f),a=[];let d=p,o=d;for(let i=0;i<g;i++){o=d,a.push(o);for(let u=1;u<y;u++)o=o.add(d),a.push(o);d=o.double()}return a},wNAF(p,f,g){const{windows:y,windowSize:a}=r(p);let d=n.ZERO,o=n.BASE;const i=BigInt(2**p-1),u=2**p,c=BigInt(p);for(let s=0;s<y;s++){const l=s*a;let h=Number(g&i);g>>=c,h>a&&(h-=u,g+=mr);const m=l,w=l+Math.abs(h)-1,C=s%2!==0,A=h<0;h===0?o=o.add(e(C,f[m])):d=d.add(e(A,f[w]))}return{p:d,f:o}},wNAFCached(p,f,g,y){const a=p._WINDOW_SIZE||1;let d=f.get(p);return d||(d=this.precomputeWindow(p,a),a!==1&&f.set(p,y(d))),this.wNAF(a,d,g)}}}function rl(n){return kg(n.Fp),sn(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...el(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Bg(n){const t=rl(n);sn(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:p}=t;if(e){if(!r.eql(p,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Fg,hexToBytes:Hg}=Eg,St={Err:class extends Error{constructor(n=""){super(n)}},_parseInt(n){const{Err:t}=St;if(n.length<2||n[0]!==2)throw new t("Invalid signature integer tag");const e=n[1],r=n.subarray(2,e+2);if(!e||r.length!==e)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Fg(r),l:n.subarray(e+2)}},toSig(n){const{Err:t}=St,e=typeof n=="string"?Hg(n):n;on(e);let r=e.length;if(r<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:p,l:f}=St._parseInt(e.subarray(2)),{d:g,l:y}=St._parseInt(f);if(y.length)throw new t("Invalid signature: left bytes after parsing");return{r:p,s:g}},hexFromSig(n){const t=d=>Number.parseInt(d[0],16)&8?"00"+d:d,e=d=>{const o=d.toString(16);return o.length&1?`0${o}`:o},r=t(e(n.s)),p=t(e(n.r)),f=r.length/2,g=p.length/2,y=e(f),a=e(g);return`30${e(g+f+4)}02${a}${p}02${y}${r}`}},Qe=BigInt(0),Oe=BigInt(1);BigInt(2);const Do=BigInt(3);BigInt(4);function Wg(n){const t=Bg(n),{Fp:e}=t,r=t.toBytes||((s,l,h)=>{const m=l.toAffine();return At(Uint8Array.from([4]),e.toBytes(m.x),e.toBytes(m.y))}),p=t.fromBytes||(s=>{const l=s.subarray(1),h=e.fromBytes(l.subarray(0,e.BYTES)),m=e.fromBytes(l.subarray(e.BYTES,2*e.BYTES));return{x:h,y:m}});function f(s){const{a:l,b:h}=t,m=e.sqr(s),w=e.mul(m,s);return e.add(e.add(w,e.mul(s,l)),h)}if(!e.eql(e.sqr(t.Gy),f(t.Gx)))throw new Error("bad generator point: equation left != right");function g(s){return typeof s=="bigint"&&Qe<s&&s<t.n}function y(s){if(!g(s))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function a(s){const{allowedPrivateKeyLengths:l,nByteLength:h,wrapPrivateKey:m,n:w}=t;if(l&&typeof s!="bigint"){if(Et(s)&&(s=Ft(s)),typeof s!="string"||!l.includes(s.length))throw new Error("Invalid key");s=s.padStart(h*2,"0")}let C;try{C=typeof s=="bigint"?s:Te(xe("private key",s,h))}catch{throw new Error(`private key must be ${h} bytes, hex or bigint, not ${typeof s}`)}return m&&(C=be(C,w)),y(C),C}const d=new Map;function o(s){if(!(s instanceof i))throw new Error("ProjectivePoint expected")}class i{constructor(l,h,m){if(this.px=l,this.py=h,this.pz=m,l==null||!e.isValid(l))throw new Error("x required");if(h==null||!e.isValid(h))throw new Error("y required");if(m==null||!e.isValid(m))throw new Error("z required")}static fromAffine(l){const{x:h,y:m}=l||{};if(!l||!e.isValid(h)||!e.isValid(m))throw new Error("invalid affine point");if(l instanceof i)throw new Error("projective point not allowed");const w=C=>e.eql(C,e.ZERO);return w(h)&&w(m)?i.ZERO:new i(h,m,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(l){const h=e.invertBatch(l.map(m=>m.pz));return l.map((m,w)=>m.toAffine(h[w])).map(i.fromAffine)}static fromHex(l){const h=i.fromAffine(p(xe("pointHex",l)));return h.assertValidity(),h}static fromPrivateKey(l){return i.BASE.multiply(a(l))}_setWindowSize(l){this._WINDOW_SIZE=l,d.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:l,y:h}=this.toAffine();if(!e.isValid(l)||!e.isValid(h))throw new Error("bad point: x or y not FE");const m=e.sqr(h),w=f(l);if(!e.eql(m,w))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:l}=this.toAffine();if(e.isOdd)return!e.isOdd(l);throw new Error("Field doesn't support isOdd")}equals(l){o(l);const{px:h,py:m,pz:w}=this,{px:C,py:A,pz:E}=l,b=e.eql(e.mul(h,E),e.mul(C,w)),L=e.eql(e.mul(m,E),e.mul(A,w));return b&&L}negate(){return new i(this.px,e.neg(this.py),this.pz)}double(){const{a:l,b:h}=t,m=e.mul(h,Do),{px:w,py:C,pz:A}=this;let E=e.ZERO,b=e.ZERO,L=e.ZERO,_=e.mul(w,w),k=e.mul(C,C),T=e.mul(A,A),O=e.mul(w,C);return O=e.add(O,O),L=e.mul(w,A),L=e.add(L,L),E=e.mul(l,L),b=e.mul(m,T),b=e.add(E,b),E=e.sub(k,b),b=e.add(k,b),b=e.mul(E,b),E=e.mul(O,E),L=e.mul(m,L),T=e.mul(l,T),O=e.sub(_,T),O=e.mul(l,O),O=e.add(O,L),L=e.add(_,_),_=e.add(L,_),_=e.add(_,T),_=e.mul(_,O),b=e.add(b,_),T=e.mul(C,A),T=e.add(T,T),_=e.mul(T,O),E=e.sub(E,_),L=e.mul(T,k),L=e.add(L,L),L=e.add(L,L),new i(E,b,L)}add(l){o(l);const{px:h,py:m,pz:w}=this,{px:C,py:A,pz:E}=l;let b=e.ZERO,L=e.ZERO,_=e.ZERO;const k=t.a,T=e.mul(t.b,Do);let O=e.mul(h,C),$=e.mul(m,A),v=e.mul(w,E),S=e.add(h,m),x=e.add(C,A);S=e.mul(S,x),x=e.add(O,$),S=e.sub(S,x),x=e.add(h,w);let M=e.add(C,E);return x=e.mul(x,M),M=e.add(O,v),x=e.sub(x,M),M=e.add(m,w),b=e.add(A,E),M=e.mul(M,b),b=e.add($,v),M=e.sub(M,b),_=e.mul(k,x),b=e.mul(T,v),_=e.add(b,_),b=e.sub($,_),_=e.add($,_),L=e.mul(b,_),$=e.add(O,O),$=e.add($,O),v=e.mul(k,v),x=e.mul(T,x),$=e.add($,v),v=e.sub(O,v),v=e.mul(k,v),x=e.add(x,v),O=e.mul($,x),L=e.add(L,O),O=e.mul(M,x),b=e.mul(S,b),b=e.sub(b,O),O=e.mul(S,$),_=e.mul(M,_),_=e.add(_,O),new i(b,L,_)}subtract(l){return this.add(l.negate())}is0(){return this.equals(i.ZERO)}wNAF(l){return c.wNAFCached(this,d,l,h=>{const m=e.invertBatch(h.map(w=>w.pz));return h.map((w,C)=>w.toAffine(m[C])).map(i.fromAffine)})}multiplyUnsafe(l){const h=i.ZERO;if(l===Qe)return h;if(y(l),l===Oe)return this;const{endo:m}=t;if(!m)return c.unsafeLadder(this,l);let{k1neg:w,k1:C,k2neg:A,k2:E}=m.splitScalar(l),b=h,L=h,_=this;for(;C>Qe||E>Qe;)C&Oe&&(b=b.add(_)),E&Oe&&(L=L.add(_)),_=_.double(),C>>=Oe,E>>=Oe;return w&&(b=b.negate()),A&&(L=L.negate()),L=new i(e.mul(L.px,m.beta),L.py,L.pz),b.add(L)}multiply(l){y(l);let h=l,m,w;const{endo:C}=t;if(C){const{k1neg:A,k1:E,k2neg:b,k2:L}=C.splitScalar(h);let{p:_,f:k}=this.wNAF(E),{p:T,f:O}=this.wNAF(L);_=c.constTimeNegate(A,_),T=c.constTimeNegate(b,T),T=new i(e.mul(T.px,C.beta),T.py,T.pz),m=_.add(T),w=k.add(O)}else{const{p:A,f:E}=this.wNAF(h);m=A,w=E}return i.normalizeZ([m,w])[0]}multiplyAndAddUnsafe(l,h,m){const w=i.BASE,C=(E,b)=>b===Qe||b===Oe||!E.equals(w)?E.multiplyUnsafe(b):E.multiply(b),A=C(this,h).add(C(l,m));return A.is0()?void 0:A}toAffine(l){const{px:h,py:m,pz:w}=this,C=this.is0();l==null&&(l=C?e.ONE:e.inv(w));const A=e.mul(h,l),E=e.mul(m,l),b=e.mul(w,l);if(C)return{x:e.ZERO,y:e.ZERO};if(!e.eql(b,e.ONE))throw new Error("invZ was invalid");return{x:A,y:E}}isTorsionFree(){const{h:l,isTorsionFree:h}=t;if(l===Oe)return!0;if(h)return h(i,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:l,clearCofactor:h}=t;return l===Oe?this:h?h(i,this):this.multiplyUnsafe(t.h)}toRawBytes(l=!0){return this.assertValidity(),r(i,this,l)}toHex(l=!0){return Ft(this.toRawBytes(l))}}i.BASE=new i(t.Gx,t.Gy,e.ONE),i.ZERO=new i(e.ZERO,e.ONE,e.ZERO);const u=t.nBitLength,c=Ng(i,t.endo?Math.ceil(u/2):u);return{CURVE:t,ProjectivePoint:i,normPrivateKeyToScalar:a,weierstrassEquation:f,isWithinCurveOrder:g}}function Pg(n){const t=rl(n);return sn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function zg(n){const t=Pg(n),{Fp:e,n:r}=t,p=e.BYTES+1,f=2*e.BYTES+1;function g(x){return Qe<x&&x<e.ORDER}function y(x){return be(x,r)}function a(x){return jr(x,r)}const{ProjectivePoint:d,normPrivateKeyToScalar:o,weierstrassEquation:i,isWithinCurveOrder:u}=Wg({...t,toBytes(x,M,R){const I=M.toAffine(),D=e.toBytes(I.x),N=At;return R?N(Uint8Array.from([M.hasEvenY()?2:3]),D):N(Uint8Array.from([4]),D,e.toBytes(I.y))},fromBytes(x){const M=x.length,R=x[0],I=x.subarray(1);if(M===p&&(R===2||R===3)){const D=Te(I);if(!g(D))throw new Error("Point is not on curve");const N=i(D);let B;try{B=e.sqrt(N)}catch(F){const H=F instanceof Error?": "+F.message:"";throw new Error("Point is not on curve"+H)}const W=(B&Oe)===Oe;return(R&1)===1!==W&&(B=e.neg(B)),{x:D,y:B}}else if(M===f&&R===4){const D=e.fromBytes(I.subarray(0,e.BYTES)),N=e.fromBytes(I.subarray(e.BYTES,2*e.BYTES));return{x:D,y:N}}else throw new Error(`Point of length ${M} was invalid. Expected ${p} compressed bytes or ${f} uncompressed bytes`)}}),c=x=>Ft(gt(x,t.nByteLength));function s(x){const M=r>>Oe;return x>M}function l(x){return s(x)?y(-x):x}const h=(x,M,R)=>Te(x.slice(M,R));class m{constructor(M,R,I){this.r=M,this.s=R,this.recovery=I,this.assertValidity()}static fromCompact(M){const R=t.nByteLength;return M=xe("compactSignature",M,R*2),new m(h(M,0,R),h(M,R,2*R))}static fromDER(M){const{r:R,s:I}=St.toSig(xe("DER",M));return new m(R,I)}assertValidity(){if(!u(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!u(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(M){return new m(this.r,this.s,M)}recoverPublicKey(M){const{r:R,s:I,recovery:D}=this,N=L(xe("msgHash",M));if(D==null||![0,1,2,3].includes(D))throw new Error("recovery id invalid");const B=D===2||D===3?R+t.n:R;if(B>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const W=D&1?"03":"02",F=d.fromHex(W+c(B)),H=a(B),z=y(-N*H),P=y(I*H),U=d.BASE.multiplyAndAddUnsafe(F,z,P);if(!U)throw new Error("point at infinify");return U.assertValidity(),U}hasHighS(){return s(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,y(-this.s),this.recovery):this}toDERRawBytes(){return Ht(this.toDERHex())}toDERHex(){return St.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ht(this.toCompactHex())}toCompactHex(){return c(this.r)+c(this.s)}}const w={isValidPrivateKey(x){try{return o(x),!0}catch{return!1}},normPrivateKeyToScalar:o,randomPrivateKey:()=>{const x=nl(t.n);return Og(t.randomBytes(x),t.n)},precompute(x=8,M=d.BASE){return M._setWindowSize(x),M.multiply(BigInt(3)),M}};function C(x,M=!0){return d.fromPrivateKey(x).toRawBytes(M)}function A(x){const M=Et(x),R=typeof x=="string",I=(M||R)&&x.length;return M?I===p||I===f:R?I===2*p||I===2*f:x instanceof d}function E(x,M,R=!0){if(A(x))throw new Error("first arg must be private key");if(!A(M))throw new Error("second arg must be public key");return d.fromHex(M).multiply(o(x)).toRawBytes(R)}const b=t.bits2int||function(x){const M=Te(x),R=x.length*8-t.nBitLength;return R>0?M>>BigInt(R):M},L=t.bits2int_modN||function(x){return y(b(x))},_=Fi(t.nBitLength);function k(x){if(typeof x!="bigint")throw new Error("bigint expected");if(!(Qe<=x&&x<_))throw new Error(`bigint expected < 2^${t.nBitLength}`);return gt(x,t.nByteLength)}function T(x,M,R=O){if(["recovered","canonical"].some(K=>K in R))throw new Error("sign() legacy options not supported");const{hash:I,randomBytes:D}=t;let{lowS:N,prehash:B,extraEntropy:W}=R;N==null&&(N=!0),x=xe("msgHash",x),B&&(x=xe("prehashed msgHash",I(x)));const F=L(x),H=o(M),z=[k(H),k(F)];if(W!=null&&W!==!1){const K=W===!0?D(e.BYTES):W;z.push(xe("extraEntropy",K))}const P=At(...z),U=F;function G(K){const V=b(K);if(!u(V))return;const Y=a(V),q=d.BASE.multiply(V).toAffine(),ee=y(q.x);if(ee===Qe)return;const ne=y(Y*y(U+ee*H));if(ne===Qe)return;let re=(q.x===ee?0:2)|Number(q.y&Oe),me=ne;return N&&s(ne)&&(me=l(ne),re^=1),new m(ee,me,re)}return{seed:P,k2sig:G}}const O={lowS:t.lowS,prehash:!1},$={lowS:t.lowS,prehash:!1};function v(x,M,R=O){const{seed:I,k2sig:D}=T(x,M,R),N=t;return Ja(N.hash.outputLen,N.nByteLength,N.hmac)(I,D)}d.BASE._setWindowSize(8);function S(x,M,R,I=$){var D;const N=x;if(M=xe("msgHash",M),R=xe("publicKey",R),"strict"in I)throw new Error("options.strict was renamed to lowS");const{lowS:B,prehash:W}=I;let F,H;try{if(typeof N=="string"||Et(N))try{F=m.fromDER(N)}catch(q){if(!(q instanceof St.Err))throw q;F=m.fromCompact(N)}else if(typeof N=="object"&&typeof N.r=="bigint"&&typeof N.s=="bigint"){const{r:q,s:ee}=N;F=new m(q,ee)}else throw new Error("PARSE");H=d.fromHex(R)}catch(q){if(q.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(B&&F.hasHighS())return!1;W&&(M=t.hash(M));const{r:z,s:P}=F,U=L(M),G=a(P),K=y(U*G),V=y(z*G),Y=(D=d.BASE.multiplyAndAddUnsafe(H,K,V))==null?void 0:D.toAffine();return Y?y(Y.x)===z:!1}return{CURVE:t,getPublicKey:C,getSharedSecret:E,sign:v,verify:S,ProjectivePoint:d,Signature:m,utils:w}}class il extends Za{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,rg(t);const r=Oi(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const p=this.blockLen,f=new Uint8Array(p);f.set(r.length>p?t.create().update(r).digest():r);for(let g=0;g<f.length;g++)f[g]^=54;this.iHash.update(f),this.oHash=t.create();for(let g=0;g<f.length;g++)f[g]^=106;this.oHash.update(f),f.fill(0)}update(t){return En(this),this.iHash.update(t),this}digestInto(t){En(this),rn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:p,destroyed:f,blockLen:g,outputLen:y}=this;return t=t,t.finished=p,t.destroyed=f,t.blockLen=g,t.outputLen=y,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ol=(n,t,e)=>new il(n,t).update(e).digest();ol.create=(n,t)=>new il(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ug(n){return{hash:n,hmac:(t,...e)=>ol(n,t,ag(...e)),randomBytes:Qa}}function jg(n,t){const e=r=>zg({...n,...Ug(r)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jn=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Cn=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),sl=BigInt(1),Mn=BigInt(2),No=(n,t)=>(n+t/Mn)/t;function al(n){const t=jn,e=BigInt(3),r=BigInt(6),p=BigInt(11),f=BigInt(22),g=BigInt(23),y=BigInt(44),a=BigInt(88),d=n*n*n%t,o=d*d*n%t,i=_e(o,e,t)*o%t,u=_e(i,e,t)*o%t,c=_e(u,Mn,t)*d%t,s=_e(c,p,t)*c%t,l=_e(s,f,t)*s%t,h=_e(l,y,t)*l%t,m=_e(h,a,t)*h%t,w=_e(m,y,t)*l%t,C=_e(w,e,t)*o%t,A=_e(C,g,t)*s%t,E=_e(A,r,t)*d%t,b=_e(E,Mn,t);if(!Vr.eql(Vr.sqr(b),n))throw new Error("Cannot find square root");return b}const Vr=Ig(jn,void 0,void 0,{sqrt:al}),Hi=jg({a:BigInt(0),b:BigInt(7),Fp:Vr,n:Cn,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=Cn,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-sl*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),p=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),f=e,g=BigInt("0x100000000000000000000000000000000"),y=No(f*n,t),a=No(-r*n,t);let d=be(n-y*e-a*p,t),o=be(-y*r-a*f,t);const i=d>g,u=o>g;if(i&&(d=t-d),u&&(o=t-o),d>g||o>g)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:i,k1:d,k2neg:u,k2:o}}}},An),Vn=BigInt(0),ll=n=>typeof n=="bigint"&&Vn<n&&n<jn,Vg=n=>typeof n=="bigint"&&Vn<n&&n<Cn,Bo={};function Ln(n,...t){let e=Bo[n];if(e===void 0){const r=An(Uint8Array.from(n,p=>p.charCodeAt(0)));e=At(r,r),Bo[n]=e}return An(At(e,...t))}const Wi=n=>n.toRawBytes(!0).slice(1),Gr=n=>gt(n,32),vr=n=>be(n,jn),Qt=n=>be(n,Cn),Pi=Hi.ProjectivePoint,Gg=(n,t,e)=>Pi.BASE.multiplyAndAddUnsafe(n,t,e);function Kr(n){let t=Hi.utils.normPrivateKeyToScalar(n),e=Pi.fromPrivateKey(t);return{scalar:e.hasEvenY()?t:Qt(-t),bytes:Wi(e)}}function cl(n){if(!ll(n))throw new Error("bad x: need 0 < x < p");const t=vr(n*n),e=vr(t*n+BigInt(7));let r=al(e);r%Mn!==Vn&&(r=vr(-r));const p=new Pi(n,r,sl);return p.assertValidity(),p}function ul(...n){return Qt(Te(Ln("BIP0340/challenge",...n)))}function Kg(n){return Kr(n).bytes}function Yg(n,t,e=Qa(32)){const r=xe("message",n),{bytes:p,scalar:f}=Kr(t),g=xe("auxRand",e,32),y=Gr(f^Te(Ln("BIP0340/aux",g))),a=Ln("BIP0340/nonce",y,p,r),d=Qt(Te(a));if(d===Vn)throw new Error("sign failed: k is zero");const{bytes:o,scalar:i}=Kr(d),u=ul(o,p,r),c=new Uint8Array(64);if(c.set(o,0),c.set(Gr(Qt(i+u*f)),32),!hl(c,r,p))throw new Error("sign: Invalid signature produced");return c}function hl(n,t,e){const r=xe("signature",n,64),p=xe("message",t),f=xe("publicKey",e,32);try{const g=cl(Te(f)),y=Te(r.subarray(0,32));if(!ll(y))return!1;const a=Te(r.subarray(32,64));if(!Vg(a))return!1;const d=ul(Gr(y),Wi(g),p),o=Gg(g,a,Qt(-d));return!(!o||!o.hasEvenY()||o.toAffine().x!==y)}catch{return!1}}const yr={getPublicKey:Kg,sign:Yg,verify:hl,utils:{randomPrivateKey:Hi.utils.randomPrivateKey,lift_x:cl,pointToBytes:Wi,numberToBytesBE:gt,bytesToNumberBE:Te,taggedHash:Ln,mod:be}},Zg=new TextEncoder;function Qg(n){return zr(An(Zg.encode(n)))}const Xg={sign:(n,t)=>zr(yr.sign(n,t)),verify:yr.verify,getPublicKey:n=>zr(yr.getPublicKey(n))};function qg(n){const t=JSON.stringify([0,n.pubkey,n.created_at,n.kind,n.tags,n.content]);return Qg(t)}function Jg(n){try{return Xg.verify(n.sig,qg(n),n.pubkey)}catch(t){return console.warn("The following error occurred during verify():",t),!1}}const em=async n=>Jg(n),tm=["wss://relay.damus.io","wss://nostr-pub.wellorder.net","wss://relay.snort.social"];class nm{constructor(){he(this,"nostr");this.nostr=Qp({verifier:em}),this.nostr.setDefaultRelays(tm)}getPosts(t){const e=this.nostr,r=rm(t),p=qp(),f=[{kinds:[1],authors:[r]}];return im(()=>e.use(p).pipe(Er(g=>g.event.content)),()=>p.emit(f))}}function rm(n){const t=js.decode(n);if(t.type!=="npub")throw new Error(`Invalid npub: ${n}`);return t.data}function im(n,t){return new jo(e=>{const r=n().subscribe({next:p=>e.next(p),error:p=>e.error(p),complete:()=>e.complete()});return t(),()=>{r.unsubscribe()}})}const om=`<div class="glostr-notice">
    <h1>What's this? What does it do?</h1>

    <h2><b>It renders shaders on nostr notes</b></h2>
    <p><code class="glostr-name"><span class="purple">gl</span><span class="white">ostr</span></code> reads <a class="purple" href="https://nostter.app/nprofile1qqswgcxtzjagjaux5e6cc9f7hy274f2ued5ps9fagl64a08pqxa4emg5nr0xs" target="_blank">nostr</a> notes, and renders <code class="code">GLSL</code> shaders in them</p>

    <h2><b>It lets you write shader notes</b></h2>
    <p>just write <code class="code">\`\`\`glsl main() { yourAwesomeShaderCode() } \`\`\`</code></p>

    <h2><b>Try it out</b></h2>
    <p>append an npub after <a href="http://rowdaboat.github.io/glostr/#" target="_blank">http://rowdaboat.github.io/glostr/#</a>, <a href="http://rowdaboat.github.io/glostr/#npub1u3svk99639mcdfn43s2nawg4a2j4ejmgrq2n63l4t67wzqdmtnks2uxaql" target="_blank">like so</a></p>

    <h2><b>It's a prototype</b></h2>
    <p><code class="glostr-name"><span class="purple">gl</span><span class="white">ostr</span></code> is still green (JA!), expect <b>la totalidad de los</b> breaking changes</p>

    <h2><b>In short</b></h2>
    <p><code class="glostr-name"><span class="purple">gl</span><span class="white">ostr</span></code> is <a href="http://shadertoy.com" target="_blank">shadertoy</a> over <span class="purple">nostr</span></p>
</div>
`,sm=".glostr-notice{font-family:Roboto,sans-serif;color:#d0d0d0;background-color:#383838;border-radius:8px;padding:20px;max-width:800px;margin:0 auto;box-shadow:0 4px 8px #00000020;text-shadow:2px 2px 5px rgba(0,0,0,.6)}.glostr-notice .glostr-name{font-size:1.15em}.glostr-notice h1{margin-top:0;margin-bottom:1.5em;color:#d5d5d5}.glostr-notice h2{color:#d0d0d0;margin-top:1.4em;margin-bottom:.8em}.glostr-notice p{color:#c5c5c5;margin-bottom:2.5em;margin-left:.5em}.glostr-notice a{color:#c5c5c5;text-decoration:none;text-decoration:underline}.glostr-notice a.purple{color:#8e30eb}.glostr-notice code{font-size:1.15em}.glostr-notice code.code{font-size:1em;background-color:#2d2d2d;color:#e0e0e0;border-radius:6px;padding:6px 10px;display:inline-block}",Fo=window.location.hash.substring(1),wr=document.getElementById("glostr-posts"),Ho=new Ul,Wo=new nm;Fo.length>0?Wo.getPosts(Fo).pipe(Zi(n=>Po(n)),Er(n=>zo(n))).subscribe(n=>{const t=Ho.shader(n.trim(),1.3333333333333333);wr.appendChild(t.container)}):(Wo.getPosts("npub1u3svk99639mcdfn43s2nawg4a2j4ejmgrq2n63l4t67wzqdmtnks2uxaql").pipe(Zi(t=>Po(t)),Er(t=>(console.log("woot"),zo(t))),_l(1)).subscribe(t=>{console.log("weet");const e=Ho.shader(t.trim(),4/3);wr.prepend(e.container)}),wr.appendChild(am(om,sm)));function Po(n){return n.indexOf("```glsl")>=0}function zo(n){return n.split("```glsl")[1].split("```")[0]}function am(n,t){const p=new DOMParser().parseFromString(n,"text/html").body.firstElementChild,f=document.createElement("style");return f.textContent=t,p.appendChild(f),p}
